<!DOCTYPE html>
<html lang="en">
  <head>

  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114915944-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-114915944-1');
</script>



  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Laszlo Treszkai – Some versatile tools for bash</title>
  <meta name="description" content="I rarely use bash besides the basics: I could use a for loop even if woken up at night, but my knowledge of the language doesn’t go much further. Hence inste...">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Mono|Roboto:300,400,900,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="/2018/2018-05-16-bash-versatile">
  <!-- <link rel="alternate" type="application/rss+xml" title="Laszlo Treszkai" href="/feed.xml"> --> 
  <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=" rel="icon" type="image/x-icon" />


</head>

  <body>
    <main class="u-container" aria-label="Content">
      <div class="c-page">
  <header class="c-page__header">
  
  <h1>Laszlo Treszkai</h1>
  
  <p>
    <a href="/">Posts</a>
    <span class="u-separate"></span>
    <a href="/about/">About me</a>
  </p>
</header>

  <div class="c-page__main">
    <article class="c-article">
  <header class="c-article__header">
    <h1 class="c-article__title">Some versatile tools for bash</h1>
    <p class="c-article__time"><time datetime="2018-05-16T00:00:00+01:00" itemprop="datePublished">May 16, 2018</time></p>
    <!-- Post Tags -->
    </ul>
  </header>
  <div class="c-article__main">
    <p>I rarely use bash besides the basics: I could use a <code class="highlighter-rouge">for</code> loop even if woken up at night, but my knowledge of the language doesn’t go much further. Hence instead of trying to memorize all the <code class="highlighter-rouge">{}%$</code> magic, having a few versatile commands in my toolbox comes handy.</p>

<p>Recently I faced the task of renaming a set of files {<code class="highlighter-rouge">foo 02.jpg</code>, …, <code class="highlighter-rouge">foo 74.jpg</code>} to {<code class="highlighter-rouge">foo 06.jpg</code>, …, <code class="highlighter-rouge">foo 78.jpg</code>}, while keeping the order. My approach contained nothing extraordinary:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="k">for </span>i <span class="k">in</span> <span class="sb">`</span>seq 74 2<span class="sb">`</span>
<span class="k">do
    </span><span class="nb">printf</span> <span class="nt">-v</span> oldname <span class="s2">"foo %02d.jpg"</span> <span class="nv">$i</span>
    <span class="nb">printf</span> <span class="nt">-v</span> newname <span class="s2">"foo %02d.jpg"</span> <span class="k">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2">+4"</span> | bc<span class="k">)</span>

    mv <span class="s2">"</span><span class="nv">$oldname</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$newname</span><span class="s2">"</span>
<span class="k">done</span>
</code></pre></div></div>

<p>Yet there were some educational points in it:</p>
<ul>
  <li>One loops a variable <code class="highlighter-rouge">x</code> over the lines of a string <code class="highlighter-rouge">values</code> by <code class="highlighter-rouge">for x in values; do something; something_else; done</code>.</li>
  <li><code class="highlighter-rouge">seq a b</code> simply prints out the integers from <code class="highlighter-rouge">a</code> to <code class="highlighter-rouge">b</code>, inclusive, regardless of which is larger.</li>
  <li>Variable <code class="highlighter-rouge">x</code> is assigned a value by <code class="highlighter-rouge">x=foobar</code>, where there must be <em>no spaces around the equation sign</em>.The value of <code class="highlighter-rouge">x</code> can then be referred to by <code class="highlighter-rouge">$x</code>.</li>
  <li>Renaming a set of files to a similar name but later in the alphabet must be done in reverse order.</li>
  <li>Bash has a built-in <code class="highlighter-rouge">printf</code> that seems to work as in C: first the string to be printed with format specifiers like <code class="highlighter-rouge">%02d</code>, followed by the arguments whose values are used according to the format specifiers.</li>
  <li>With the <code class="highlighter-rouge">-v</code> option of <code class="highlighter-rouge">printf</code>, you can save the output into a variable.</li>
  <li>One can use <code class="highlighter-rouge">$(  )</code> for executing a command and having bash treat the output as the source code. (It’s the same as using backticks, as around <code class="highlighter-rouge">seq 74 2</code>, but allows nesting and is clearer. Kinda like <code class="highlighter-rouge">eval</code> in other languages, like JavaScript.) Not shown here, but it even works in quotation marks, e.g. <code class="highlighter-rouge">"$(echo hey yo)"</code> is like writing <code class="highlighter-rouge">"hey yo"</code>. Note that the trailing newline is deleted.</li>
  <li><code class="highlighter-rouge">bc</code> is a calculator that reads from the input and outputs nothing but the result on a single line.</li>
  <li>Don’t forget the quotes around arguments with spaces, like with <code class="highlighter-rouge">mv</code> above.</li>
</ul>

<p>One minute of further bash tips are provided by Julia Evans <a href="https://drawings.jvns.ca/bashtips/">[here]</a>.</p>

  </div>
  <!-- Previous / Next Buttons -->
  <div class="pagenav">
    
    <div class="wrapper" id="left">
      <small><b>Previous</b> Feb 27, 2018</small>
      <br>
      <a class="no-hov" href="/2018/2018-02-27-courseworks">&laquo; Some proofs in first-order logic</a>
    </div>
    
    
    <div class="wrapper" id="right">
      <small>May 23, 2018 <b>Next</b></small>
      <br>
      <a class="no-hov" href="/2018/2018-05-23-youtube-speed">Change YouTube speed from your favorites bar &raquo;</a>
    </div>
    
  </div>
  <!-- Disqus comments view -->
  
</article>

  </div>
  <footer class="c-page__footer">
  <p><a href="LICENSE.html">&copy;</a>  Laszlo Treszkai 2018</p>
  <p>
    <a href="https://twitter.com/ltreszkai">Twitter</a>
    <span class="u-separate"></span><a href="https://github.com/treszkai">GitHub</a>
    <span class="u-separate"></span><a href="mailto:firstname.lastname@gmail.com">Email</a>
  </p>
</footer>

</div>
<hr>

    </main>
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114915944-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-114915944-1');
</script>


    
  </body>
</html>
