<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Laszlo Treszkai</title><link href="https://www.treszkai.com/" rel="alternate"></link><link href="https://www.treszkai.com/feeds/all.atom.xml" rel="self"></link><id>https://www.treszkai.com/</id><updated>2019-11-11T00:00:00+01:00</updated><entry><title>The effects of daylight savings time adjustment on the incidence rate of acute myocardial infarction: a Bayesian meta-analysis (original research)</title><link href="https://www.treszkai.com/2019/11/11/dst-vs-ami/" rel="alternate"></link><published>2019-11-11T00:00:00+01:00</published><updated>2019-11-11T00:00:00+01:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2019-11-11:/2019/11/11/dst-vs-ami/</id><summary type="html">&lt;p&gt;A Bayesian meta-analysis to evaluate whether one is more likely to get a heart attack after losing an hour of sleep. They are, a&amp;nbsp;little.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;Laszlo Treszkai&amp;nbsp;(firstname.lastname@gmail.com)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Version of 11 November,&amp;nbsp;2019.&lt;/p&gt;
&lt;p&gt;This document might be revised in the future; any potential updates will be linked from&amp;nbsp;here.&lt;/p&gt;
&lt;h2&gt;Abstract&lt;/h2&gt;
&lt;h3&gt;Background&lt;/h3&gt;
&lt;p&gt;Multiple observational studies claim that the daylight savings time (&lt;span class="caps"&gt;DST&lt;/span&gt;) adjustment in spring causes an increase in acute myocardial infarction (&lt;span class="caps"&gt;AMI&lt;/span&gt;) count during the following days or weeks, attributing this increase to the reduction in sleep or the disturbance in the circadian rhythm. Previous studies used frequentist methods for interval estimation and often showed “statistically significant” differences, although the results were inconsistent and sometimes the effects in the same study were incoherent (such as a significant difference on Tuesday but not on Monday). A recent meta-analysis used frequentist methods and showed an increase in incidence rate after the spring adjustment and could not show a change after the autumn&amp;nbsp;adjustment.&lt;/p&gt;
&lt;h3&gt;Methods&lt;/h3&gt;
&lt;p&gt;This study reanalyzes the data described in the relevant observational studies. We propose a Bayesian model that should capture the alleged phenomenon truthfully, apply this model consistently to every study, and combine the results using a fixed-effects model. Under our model, the risk ratio on Monday is the highest, it is slightly lower on Tuesday, and it decreases linearly to 1 until Saturday. We do the calculations using both analytic methods and Monte Carlo methods with the Stan&amp;nbsp;software.&lt;/p&gt;
&lt;h3&gt;Results&lt;/h3&gt;
&lt;p&gt;In total, 7 observational studies were identified and analyzed, from which one was excluded. The remaining 6 studies included 14,024 &lt;span class="caps"&gt;AMI&lt;/span&gt; incidences on the week following spring &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment, and 15,921 incidences on the week following autumn &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment.
Together with related trend data obtained from the surrounding weeks, these figures show a risk ratio (&lt;span class="caps"&gt;RR&lt;/span&gt;) of 107.7% on the Monday following a spring &lt;span class="caps"&gt;DST&lt;/span&gt; change (95% credible interval: [104.8%, 110.7%]), and a mean &lt;span class="caps"&gt;RR&lt;/span&gt; of 97.7% (95% CrI: [95.1%, 100.3%]) after the autumn &lt;span class="caps"&gt;DST&lt;/span&gt; change. The results from analytic and Monte Carlo methods matched precisely. The credible intervals obtained from a non-informative prior yield practically the same results, and so does a slightly more complex model for the time decay of the&amp;nbsp;effect.&lt;/p&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;Overall, the spring &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment has a small but quasi-certain positive effect on &lt;span class="caps"&gt;AMI&lt;/span&gt; incidences, and the risk ratio in autumn is approximately 1 or slightly less than 1.
We note that the combined &lt;span class="caps"&gt;RR&lt;/span&gt; is less than half of what has been suggested by certain smaller but highly cited studies, but our analysis shows larger effects than the recent meta-analysis of the same data by Manfredini et al. (2019).
Our results give strong support to the hypothesis that the &lt;span class="caps"&gt;DST&lt;/span&gt; transitions – especially the spring transition when sleep is reduced – have a noticeable effect on our circadian rhythm.
Nonetheless, we cannot confidently claim that these results are of direct practical importance: there is no evidence that the additional &lt;span class="caps"&gt;AMI&lt;/span&gt; counts in the days after &lt;span class="caps"&gt;DST&lt;/span&gt; transition are not merely shifted earlier from the following&amp;nbsp;weeks.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;This study has a two-fold purpose. First, it compiles all the published data about the effects of &lt;span class="caps"&gt;DST&lt;/span&gt; on the risk of &lt;span class="caps"&gt;AMI&lt;/span&gt;, and presents a meta-analysis where the data from multiple countries and years is analyzed in a unified model. On the other hand, it demonstrates the use of Bayesian methods in an analysis or meta-analysis, explaining the thinking behind model specification and quantifying our prior beliefs about the parameters. The software required for reproducing this paper is freely available at &lt;a href="https://github.com/treszkai/BayesianScience"&gt;https://github.com/treszkai/BayesianScience&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sipilä et al. (2016) explain the importance of sleep and its effects on the risk of heart&amp;nbsp;disease:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Sleep is essential for well-being and its disturbances
have been associated with disruption of numerous
physiological processes and changes in cardiovascular
risk factors (1,2). Sleep disordered breathing has been
associated with risk of coronary heart disease (3,4) and
sleep impairment with prognosis of myocardial infarction
(&lt;span class="caps"&gt;MI&lt;/span&gt;)&amp;nbsp;(5).&lt;/p&gt;
&lt;p&gt;Daylight saving time (&lt;span class="caps"&gt;DST&lt;/span&gt;) is used in many countries
including the United States and the members of
the European Union for prolonging of sun-light
proportion of day. Clock shifts however alter and disrupt
chronobiological rhythms and impair sleep (7,8) providing
a ‘‘natural experiment’’ for studying the effects of
rhythm and sleep disruptions on the incidence of
vascular events. Although chronobiological factors
have been shown to affect the incidence of &lt;span class="caps"&gt;MI&lt;/span&gt; (9,10),
studies on the association of &lt;span class="caps"&gt;DST&lt;/span&gt; and the incidence of &lt;span class="caps"&gt;MI&lt;/span&gt;
have been partly conflicting. With one exception (11), all
studies show changes in the temporal distribution of &lt;span class="caps"&gt;MI&lt;/span&gt;
in the week following &lt;span class="caps"&gt;DST&lt;/span&gt; transitions but the patterns of
change differ (12–15) and there is no agreement about
the impact of these changes on the overall incidence of
&lt;span class="caps"&gt;MI&lt;/span&gt;&amp;nbsp;(11–16).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We will see that there is a simple reason for the disagreement between studies: most of the studies have been critically&amp;nbsp;underpowered.&lt;/p&gt;
&lt;p&gt;Although the majority of medical research uses frequentist methods, this is not the first meta-analysis in medicine that uses Bayesian statistics. The following are some noteworthy&amp;nbsp;examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gelman et al. (2013) present an example for estimating mortality ratios after a myocardial infarction between the control group and a group that uses beta-blockers, using data from 22 independent&amp;nbsp;studies.&lt;/li&gt;
&lt;li&gt;Devin Incerti (2015) provides a Bayesian re-analysis of the effects of mammography on breast cancer-related mortality&amp;nbsp;rates.&lt;/li&gt;
&lt;li&gt;Yang et al. (2017) analyze 25 randomized controlled trials of prokinetics for the treatment of functional dyspepsia in a Bayesian network&amp;nbsp;meta-analysis.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Methodology shared in most&amp;nbsp;papers&lt;/h3&gt;
&lt;p&gt;Following the naming of (Čulić 2013), we refer to the week following the &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment as “posttransitional&amp;nbsp;week”.&lt;/p&gt;
&lt;p&gt;Every study that was included compares the observed &lt;span class="caps"&gt;AMI&lt;/span&gt; counts against a trend prediction. The trend prediction for &lt;span class="caps"&gt;AMI&lt;/span&gt; counts on given days – sometimes called “control group” – was usually defined as the average of the respective days on the two weeks before and after the posttransitional week. The analysis of Sandhu et al. (2014) was the only exception, as they used a regression model that included AMIs from all year except the two weeks following the spring and autumn &lt;span class="caps"&gt;DST&lt;/span&gt;&amp;nbsp;adjustments.&lt;/p&gt;
&lt;p&gt;Years on which the &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment coincided with Easter were usually excluded from the studies. If Easter fell on the 2 weeks following (or preceding) the &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment, the control period was the two out of three weeks that did not include&amp;nbsp;Easter.&lt;/p&gt;
&lt;p&gt;Every paper adjusted the &lt;span class="caps"&gt;AMI&lt;/span&gt; counts for the shorter (resp. longer) Sunday following a spring (resp. autumn) &lt;span class="caps"&gt;DST&lt;/span&gt; transition by multiplying the real counts with &lt;script type="math/tex"&gt;24/23&lt;/script&gt; (resp. &lt;script type="math/tex"&gt;24/25&lt;/script&gt;). This sometimes resulted in fractional &lt;span class="caps"&gt;AMI&lt;/span&gt; counts, which we rounded to the nearest integer when treated as an&amp;nbsp;observation.&lt;/p&gt;
&lt;h2&gt;Materials and&amp;nbsp;methods&lt;/h2&gt;
&lt;h3&gt;Study&amp;nbsp;selection&lt;/h3&gt;
&lt;p&gt;We analyzed data from every study that was included in the meta-analysis of Manfredini et al.&amp;nbsp;(2019).&lt;/p&gt;
&lt;p&gt;Performing a PubMed search instead of using the list of publications from (Manfredini et al. 2019) would be a tedious process with little benefit: said meta-analysis retrieved 2633 papers dated up to 31 December 2018 (from which 7 were&amp;nbsp;relevant).&lt;/p&gt;
&lt;h3&gt;Analyzed&amp;nbsp;data&lt;/h3&gt;
&lt;p&gt;From each paper, we extracted the trend predictions and the actual &lt;span class="caps"&gt;AMI&lt;/span&gt; counts on each day of the spring and autumn posttransitional weeks. When the trend prediction was not available, we divided the total number of &lt;span class="caps"&gt;AMI&lt;/span&gt; cases by the study length in days. We restricted our analysis to the number of incidences, and ignored all variables that describe incidences, such as age and gender of patient, &lt;span class="caps"&gt;STEMI&lt;/span&gt; (&lt;span class="caps"&gt;ST&lt;/span&gt; elevation &lt;span class="caps"&gt;MI&lt;/span&gt;) or non-&lt;span class="caps"&gt;STEMI&lt;/span&gt;, or various medications taken prior to the&amp;nbsp;incident.&lt;/p&gt;
&lt;h3&gt;Problems with standard statistical&amp;nbsp;tests&lt;/h3&gt;
&lt;p&gt;The standard statistical practice for deciding whether there is a difference in a particular variable (such as &lt;span class="caps"&gt;AMI&lt;/span&gt; counts) between two groups is to use a &lt;em&gt;null hypothesis significance test&lt;/em&gt; (&lt;span class="caps"&gt;NHST&lt;/span&gt;).
Using this method, one defines a &lt;em&gt;null hypothesis&lt;/em&gt; as the variable of interest having some predetermined value, which in this case would correspond to zero increase in &lt;span class="caps"&gt;AMI&lt;/span&gt; counts after a &lt;span class="caps"&gt;DST&lt;/span&gt; change.
The &lt;span class="caps"&gt;NHST&lt;/span&gt; answers the question: assuming the null hypothesis is true, what is the probability that data which is generated according to the sampling and testing intentions has a more extreme test statistic than that of the actual observations (Kruschke, Liddell 2018). If this probability is less than some fixed threshold (typically 0.05), the effect is claimed to exist.
The &lt;span class="caps"&gt;NHST&lt;/span&gt; suffers from a multitude of problems, and has received its fair share of criticism from statisticians.
It encourages black-and-white thinking without allowing uncertainty (claiming that an effect either exists or not, depending on the p-value), it encourages binary classification of effects without quantifying the relationship (&lt;em&gt;statistically&lt;/em&gt; significant differences might be of no &lt;em&gt;practical&lt;/em&gt; relevance if they are small), and these tests are conducted &lt;em&gt;against&lt;/em&gt; a given null hypothesis without any way to gain evidence &lt;em&gt;for&lt;/em&gt; the null hypothesis (an inability to refute the null hypothesis is not equal to accepting it).
Recently, The American Statistician released a special issue titled &lt;em&gt;Moving to a World Beyond “p &amp;lt; 0.05”&lt;/em&gt; (Wasserstein 2019), together with commentaries from 94&amp;nbsp;authors.&lt;/p&gt;
&lt;p&gt;We can get a more accurate sense of the value of the parameter if instead of testing a hypothesis, we estimate the value of the parameter. The standard tool for this is stating the 95% confidence interval (&lt;span class="caps"&gt;CI&lt;/span&gt;) for a parameter, which is the set of parameter values that wouldn’t be rejected at the &lt;script type="math/tex"&gt;p&lt;0.05&lt;/script&gt; level. This is the approach suggested by Cumming (2014) and Cumming and Calin-Jageman (2016), who call it the &lt;em&gt;New Statistics&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;While reporting intervals is better than a single value from it (i.e. the p-value), confidence intervals still suffer from deep-rooted flaws. It still encourages black-and-white thinking: parameter values inside the &lt;span class="caps"&gt;CI&lt;/span&gt; are compatible with the null hypothesis, those outside it are not. Confidence intervals do not give distributional information, i.e. a value close to the limits of the &lt;span class="caps"&gt;CI&lt;/span&gt; is not &amp;#8220;less compatible&amp;#8221; with the hypothesis then a value in the middle, nor is a study of large sample size &amp;#8220;more confident&amp;#8221; than a smaller study (although usually the &lt;span class="caps"&gt;CI&lt;/span&gt; of a large study is narrower). This binary nature makes it hard to aggregate the results of multiple studies and to perform a meta-analysis accurately. In addition, confidence intervals are also frequently misinterpreted: specifically, the true parameter value is &lt;em&gt;not&lt;/em&gt; 95% likely to be inside the &lt;span class="caps"&gt;CI&lt;/span&gt;, although they are often thought to&amp;nbsp;be.&lt;/p&gt;
&lt;p&gt;Kruschke and Liddell (2018) compare approaches to statistical inference along two axes: whether the method uses a frequentist or Bayesian framework, and whether the method compares hypotheses or estimates parameter values. They make a detailed case that Bayesian parameter estimation is superior in most situations to the frequentist methods or Bayesian hypothesis testing, hence the title of the paper, &lt;em&gt;The Bayesian New Statistics&lt;/em&gt;.&lt;/p&gt;
&lt;h3&gt;Overview of our model and statistical&amp;nbsp;methods&lt;/h3&gt;
&lt;p&gt;In this meta-analysis we define a (Bayesian) statistical model for the parameter of interest and our observations. For every paper, we have the following observations: the &lt;span class="caps"&gt;AMI&lt;/span&gt; counts on each day of the posttransitional week, and the &lt;span class="caps"&gt;AMI&lt;/span&gt; counts predicted by the trend. The unobserved parameter is the risk ratio (&lt;span class="caps"&gt;RR&lt;/span&gt;), i.e. the multiplier by which mean &lt;span class="caps"&gt;AMI&lt;/span&gt; counts increase in the posttransitional week, compared to the same day of an ordinary week. Our description of this parameter initially also include some reasonable uncertainty in our beliefs, quantified in the &lt;em&gt;prior distribution&lt;/em&gt;. The goal of the analysis is to derive the &lt;em&gt;posterior probability distribution&lt;/em&gt; of the &lt;span class="caps"&gt;RR&lt;/span&gt; (or &lt;em&gt;posterior&lt;/em&gt; for short), which is an adjustment of the prior probabilities based on the likelihood of each parameter value, i.e. the probability that a given parameter value would produce the observed data. Although the posterior is influenced by the prior and the statistical model, this influence can be insubstantial in the face of enough data, as will be the case in this analysis. Finally, the posterior is summarized in a 95% credible interval of parameter values, which is either a central credible interval or a highest density posterior&amp;nbsp;interval.&lt;/p&gt;
&lt;h3&gt;Notation&lt;/h3&gt;
&lt;p&gt;For a particular study &lt;script type="math/tex"&gt;s&lt;/script&gt;, &lt;script type="math/tex"&gt;t_i^{(s)}&lt;/script&gt; denotes the &lt;span class="caps"&gt;AMI&lt;/span&gt; counts as predicted by the trend model on day &lt;script type="math/tex"&gt;i&lt;/script&gt; of the posttransitional week (with &lt;script type="math/tex"&gt;d = 1,\,\ldots,\,5&lt;/script&gt; for Monday, …, Friday after the &lt;span class="caps"&gt;DST&lt;/span&gt; change) and &lt;script type="math/tex"&gt;y_d^{(s)}&lt;/script&gt; denotes the observed count on day &lt;script type="math/tex"&gt;i&lt;/script&gt;. The (unobserved) mean of the distribution of &lt;script type="math/tex"&gt;y_d^{(s)}&lt;/script&gt; is denoted by &lt;script type="math/tex"&gt;x_d^{(s)}&lt;/script&gt; – the meaning of this variable will become clear in the next section.
The risk ratio for day &lt;script type="math/tex"&gt;d&lt;/script&gt; is denoted by &lt;script type="math/tex"&gt;r_d^{(s)} = x_d^{(s)} / t_d^{(s)}&lt;/script&gt;. Finally, &lt;script type="math/tex"&gt;\mathcal D^{(s)}&lt;/script&gt; denotes the whole dataset, i.e. all of the observations &lt;script type="math/tex"&gt;\{y_1^{(s)},\ldots,y_5^{(s)}\}&lt;/script&gt;. To avoid cluttered notation, sometimes the superscript is omitted, resulting in e.g. &lt;script type="math/tex"&gt;y_1&lt;/script&gt;.&lt;/p&gt;
&lt;h3&gt;Poisson&amp;nbsp;distribution&lt;/h3&gt;
&lt;p&gt;The &lt;a href="https://en.wikipedia.org/wiki/Poisson_distribution"&gt;Poisson distribution&lt;/a&gt; is a discrete probability distribution that expresses the probability of a given number of events occurring in a fixed interval of time or space if these events occur with a known constant rate and independently of the time since the last event. In our case, the “event” is an &lt;span class="caps"&gt;AMI&lt;/span&gt;, and the fixed interval of time is a day. Although AMIs don&amp;#8217;t happen at a constant rate throughout the day, the &lt;a href="https://en.wikipedia.org/wiki/Poisson_distribution#Sums_of_Poisson-distributed_random_variables"&gt;sum of Poisson-distributed random variables&lt;/a&gt; is also Poisson-distributed, so any day&amp;#8217;s total will also be&amp;nbsp;Poisson-distributed.&lt;/p&gt;
&lt;p&gt;The distribution has a single parameter, which is a positive real number, and is often denoted &lt;script type="math/tex"&gt;λ&lt;/script&gt;. The mean (expected value) of &lt;script type="math/tex"&gt;\text{Poisson}(λ)&lt;/script&gt; is &lt;script type="math/tex"&gt;λ&lt;/script&gt;, and the standard deviation is &lt;script type="math/tex"&gt;\sqrt{λ}&lt;/script&gt;. Its probability mass function is shown below for &lt;script type="math/tex"&gt;λ=100&lt;/script&gt;, along with the 95% highest density interval (&lt;span class="caps"&gt;HDI&lt;/span&gt;) – the shortest interval that covers 95% of the probability&amp;nbsp;mass.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Distribution of Poisson plot with mean 100" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/poisson-dist.svg"&gt;&lt;/p&gt;
&lt;p&gt;The analyzed studies reported the sum of AMIs on a given day over the period of the study (e.g. all posttransitional Tuesdays during the years 2010–2013), never the &lt;span class="caps"&gt;AMI&lt;/span&gt; counts for individual years. This sum is denoted with &lt;script type="math/tex"&gt;y_d&lt;/script&gt;, where &lt;script type="math/tex"&gt;d&lt;/script&gt; signifies the day. We note again that the individual counts are each Poisson-distributed, so their sum is Poisson-distributed too. (However, their &lt;em&gt;average&lt;/em&gt; would not be Poisson-distributed.) This means that &lt;script type="math/tex"&gt;y_d&lt;/script&gt; is sampled from a Poisson distribution whose parameter &lt;script type="math/tex"&gt;x_d&lt;/script&gt; is the sum of the trend on day &lt;script type="math/tex"&gt;d&lt;/script&gt; over the period of the study (&lt;script type="math/tex"&gt;t_d&lt;/script&gt;), multiplied with the &lt;span class="caps"&gt;RR&lt;/span&gt; for the given day (&lt;script type="math/tex"&gt;r_d&lt;/script&gt;).&lt;/p&gt;
&lt;p&gt;In order for the Poisson assumption to &lt;em&gt;not hold&lt;/em&gt; in this analysis, two individuals experiencing an &lt;span class="caps"&gt;AMI&lt;/span&gt; on a given day need to be statistically dependent &lt;em&gt;conditional on the day’s average&lt;/em&gt;. This is not the case during a heat wave or a news broadcast about a major catastrophe, when the AMIs are dependent but not conditionally dependent. The rare scenarios for conditional dependence are when two people partake in a strenuous activity together (such as hiking), or when the &lt;span class="caps"&gt;AMI&lt;/span&gt; of a person causes an &lt;span class="caps"&gt;AMI&lt;/span&gt; in&amp;nbsp;another.&lt;/p&gt;
&lt;h3&gt;Model of posttransitional &lt;span class="caps"&gt;AMI&lt;/span&gt;&amp;nbsp;counts&lt;/h3&gt;
&lt;p&gt;We perform the analysis using a fixed-effects model, which assumes that the &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment effects an identical increase in &lt;span class="caps"&gt;AMI&lt;/span&gt; counts in every country, every year. The independence of region is a strong assumption because the leading hypothesis attributes the increase in myocardial infarctions to the disruption of the circadian rhythm, and those beyond their working age do not necessarily experience sleep loss on a posttransitional Monday. Therefore, we hypothesize that the effect is likely to be lower in countries where the average age of retirement is lower – a random-effects model could account for these differences. The independence of year is a weak&amp;nbsp;assumption.&lt;/p&gt;
&lt;p&gt;The model for the &lt;span class="caps"&gt;AMI&lt;/span&gt; count on a posttransitional Monday is described by the following graph – such a graph is called a Bayes network or a directed graphical&amp;nbsp;model:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Bayes network for the Monday counts" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/tikz_bayesnet_Mon.png"&gt;&lt;/p&gt;
&lt;p&gt;Loosely speaking, the arrows denote causal or logical dependencies, where the exact formula for the dependency is shown next to the nodes (in a canonical Bayes network, the formulas are described only in the text). The model can be translated into the following&amp;nbsp;sentences:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The observed posttransitional &lt;span class="caps"&gt;AMI&lt;/span&gt; count on Monday follows a Poisson&amp;nbsp;distribution.&lt;/li&gt;
&lt;li&gt;The mean of the posttransitional &lt;span class="caps"&gt;AMI&lt;/span&gt; count on Monday is equal to the trend count on Monday, multiplied by the &lt;span class="caps"&gt;RR&lt;/span&gt; on&amp;nbsp;Monday.&lt;/li&gt;
&lt;li&gt;Monday&amp;#8217;s &lt;span class="caps"&gt;RR&lt;/span&gt; is a random variable, meaning it has an associated prior belief distribution (which we define&amp;nbsp;below).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Moving to a multi-day&amp;nbsp;model&lt;/h3&gt;
&lt;p&gt;The reviewed literature performed hypothesis tests for every day of the posttransitional week – including weekends, sometimes noting a significant difference for Tuesday, but not Monday (Sandhu 2014). Such day-by-day tests of “statistical significance” need not concern themselves of &lt;em&gt;consistency&lt;/em&gt; – in the everyday sense of the word –, i.e. that prior to observations we expect any effect to be highest on Monday and wear off as time&amp;nbsp;progresses.&lt;/p&gt;
&lt;p&gt;When performing a Bayesian analysis, we &lt;em&gt;must&lt;/em&gt; have prior expectations on the expected parameter values – these prior beliefs are then changed according to the model and the observed data, resulting in the posterior distribution. In accordance with the literature, we assume that the effect is constrained to the posttransitional week, and that if there is an effect on Monday, there is some effect on Friday too. We expect no increase on Sunday, the day of the adjustment (after adjusting for the shorter day), because relatively few people wake up at the same time on Sundays (and sleep shorter as a consequence). On Tuesday, Wednesday, Thursday, Friday, we expect the relative increase to be 80%, 60%, 40%, 20% of the increase on Monday (see figure below) – this we call the “linear weekday model”. (This linear assumption will be weakened in a later analysis.) We denote the increase in &lt;span class="caps"&gt;RR&lt;/span&gt; on Monday with &lt;script type="math/tex"&gt;\theta&lt;/script&gt; (the only parameter of the model), thus &lt;script type="math/tex"&gt;r_\text{Mo} = 1 + \theta&lt;/script&gt;, &lt;script type="math/tex"&gt;r_\text{Tu} = 1 + 0.8 \cdot \theta&lt;/script&gt;, …, &lt;script type="math/tex"&gt;r_\text{Fr} = 1 + 0.2 \cdot \theta&lt;/script&gt;.&lt;/p&gt;
&lt;p&gt;The infarction counts on neighboring days are conditionally independent given &lt;script type="math/tex"&gt;\theta&lt;/script&gt; (apart from exceptional cases, such as a mass catastrophe), which means we can model the days separately and simply multiply their likelihoods. (Prior to observing the data, it feels &lt;em&gt;very&lt;/em&gt; unlikely to us that there would be any effect on Friday, but one paper attempted to measure effects on the 2 and 4 weeks following &lt;span class="caps"&gt;DST&lt;/span&gt; adjustment, meaning they didn&amp;#8217;t think such a long-lasting effect is completely implausible, therefore we consider including Friday as part of the expert&amp;nbsp;opinion.)&lt;/p&gt;
&lt;p&gt;&lt;img alt="Risk ratio on given days of the posttransitional week under the linear weekday model, for θ=0.5" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/rr_example.svg"&gt;&lt;/p&gt;
&lt;p&gt;This model of all weekdays is described by the following&amp;nbsp;graph:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Bayes network for the counts of all weekdays" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/tikz_bayesnet.png"&gt;&lt;/p&gt;
&lt;p&gt;Here the rectangle means the nodes inside it should be repeated for &lt;script type="math/tex"&gt;d = \text{Mo}..\text{Fr})&lt;/script&gt; &amp;#8212; this rectangle is called a “plate”. A common parameter &lt;script type="math/tex"&gt;\theta&lt;/script&gt; determines &lt;script type="math/tex"&gt;r_d&lt;/script&gt; for a given day &lt;script type="math/tex"&gt;d&lt;/script&gt;, which, together with &lt;script type="math/tex"&gt;t_d&lt;/script&gt;, determines the number of expected AMIs (&lt;script type="math/tex"&gt;x_d&lt;/script&gt;) and actual AMIs (&lt;script type="math/tex"&gt;y_d&lt;/script&gt;).&lt;/p&gt;
&lt;h3&gt;Prior beliefs about &lt;span class="caps"&gt;RR&lt;/span&gt;&amp;nbsp;(spring)&lt;/h3&gt;
&lt;p&gt;We would like to estimate the value of a continuous parameter &lt;script type="math/tex"&gt;\theta&lt;/script&gt;, where the standard procedure is to conduct a one-sided t-test, with the null hypothesis defined as &lt;script type="math/tex"&gt;\theta = 0&lt;/script&gt;.&lt;/p&gt;
&lt;p&gt;Gelman et al. (2013) suggest beginning Bayesian data analysis with a noninformative or &lt;em&gt;weakly informative prior&lt;/em&gt; – this avoid biasing the results to any particular value, and lets the posterior represent the data more&amp;nbsp;closely.&lt;/p&gt;
&lt;p&gt;I believe &lt;script type="math/tex"&gt;\theta&lt;/script&gt; is likely to be approximately &lt;script type="math/tex"&gt;0.0&lt;/script&gt; (i.e., &lt;script type="math/tex"&gt;\text{RR} \approx 1&lt;/script&gt;, no effect), but it wouldn&amp;#8217;t be very surprising if &lt;script type="math/tex"&gt;\theta&lt;/script&gt; were positive. (I find it very unlikely, less than &lt;script type="math/tex"&gt;\approx 0.1\%&lt;/script&gt;, that the &lt;span class="caps"&gt;RR&lt;/span&gt; decreases.) So I would like to place substantial probability mass close to 0.0, and spread the rest on values between &lt;script type="math/tex"&gt;0.0&lt;/script&gt; and &lt;script type="math/tex"&gt;1.0&lt;/script&gt; (&lt;script type="math/tex"&gt;P(\theta &gt; 1.0) \lessapprox 0.1\%&lt;/script&gt;).&lt;/p&gt;
&lt;p&gt;We can formalize this description by placing 50-50% of the prior probability mass of either there being zero effect (a Gaussian distribution with standard deviation of 0.01), or there being an increase in &lt;span class="caps"&gt;AMI&lt;/span&gt; counts, where the increase in &lt;span class="caps"&gt;RR&lt;/span&gt; has an Exponential(&lt;script type="math/tex"&gt;\lambda=0.2^{-1}&lt;/script&gt;) prior on it. (An Exponential(&lt;script type="math/tex"&gt;\lambda=0.2^{-1}&lt;/script&gt;) distribution has a mean of &lt;script type="math/tex"&gt;0.2&lt;/script&gt;.) This distribution is plotted on the figure&amp;nbsp;below.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Prior distribution of Monday RR" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/prior_Monday.svg"&gt;&lt;/p&gt;
&lt;h3&gt;Prior beliefs about the &lt;span class="caps"&gt;RR&lt;/span&gt;&amp;nbsp;(autumn)&lt;/h3&gt;
&lt;p&gt;The &lt;span class="caps"&gt;AMI&lt;/span&gt; counts on the autumn posttransitional week used the same model as the spring counts, but it assumed an (improper) uniform prior on &lt;script type="math/tex"&gt;\theta&lt;/script&gt;. (This prior is improper because no distribution exists that is uniformly distributed on the whole linear number line. In practice we would get the same posterior if we assumed a Uniform(−2,+2)&amp;nbsp;prior.)&lt;/p&gt;
&lt;h3&gt;Summary of&amp;nbsp;assumptions&lt;/h3&gt;
&lt;p&gt;Every statistical test makes assumptions about the data, but in most reports using null hypothesis tests significance tests, these assumptions are never mentioned, instead they are implicit in the performed tests.
Therefore, statistics is often sold as a sort of alchemy that transmutes randomness into certainty, an “uncertainty laundering” that begins with data and concludes with success as measured by statistical significance (Gelman 2016).
I view it as a &lt;em&gt;strength&lt;/em&gt; of Bayesian data analysis that these assumptions must be stated explicitly. To summarize this section, we make the following assumptions in this&amp;nbsp;analysis:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Every region that use &lt;span class="caps"&gt;DST&lt;/span&gt; has the same &lt;span class="caps"&gt;RR&lt;/span&gt; in every&amp;nbsp;year.&lt;/li&gt;
&lt;li&gt;Any effect is limited to the posttransitional weekdays, and the effect is highest on Monday, 20% less on Tuesday, and so on until 0% on&amp;nbsp;Saturday.&lt;/li&gt;
&lt;li&gt;Our prior belief on the spring &lt;span class="caps"&gt;RR&lt;/span&gt; is split half-half between &lt;script type="math/tex"&gt;1.0&lt;/script&gt; and all values greater than &lt;script type="math/tex"&gt;1&lt;/script&gt;, with the probability decaying exponentially at a rate of &lt;script type="math/tex"&gt;0.2^{-1}&lt;/script&gt;. We make no prior assumptions about the autumn &lt;span class="caps"&gt;RR&lt;/span&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Posterior calculations&amp;nbsp;analytically&lt;/h3&gt;
&lt;p&gt;We performed our calculations for the fixed-effects model in spring analytically, using custom software written in Python. The result of these calculations was a 95% central credible interval, which is an interval of parameter values containing 95% of the posterior probability, with 2.5% on the negative and positive ends. This is not equal to the &lt;span class="caps"&gt;HDI&lt;/span&gt; when the distribution is skewed, but is usually a good&amp;nbsp;approximation.&lt;/p&gt;
&lt;h3&gt;Posterior calculations with Monte Carlo&amp;nbsp;methods&lt;/h3&gt;
&lt;p&gt;We also performed our posterior calculations with Monte Carlo methods using the open source statistical modeling software &lt;a href="https://mc-stan.org/"&gt;Stan&lt;/a&gt;. Models in Stan are written using its own description language (which comes with &lt;a href="https://mc-stan.org/users/documentation/"&gt;extensive documentation&lt;/a&gt; and a &lt;a href="https://discourse.mc-stan.org/"&gt;supportive community&lt;/a&gt;), and they need to be first compiled into binary form using an interface in R, Python, or other languages. Then, after providing the observable data to the model, Stan draws samples from the posterior distribution of the parameters, and calculates the 95% highest posterior density interval (&lt;span class="caps"&gt;HDI&lt;/span&gt;, a.k.a. &lt;span class="caps"&gt;HPD&lt;/span&gt;) – the interval that covers the most plausible parameter values. For most practical purposes, 1000 independent samples would be enough, but we drew 50,000 samples to accurately assess the equality to the analytic&amp;nbsp;solution.&lt;/p&gt;
&lt;p&gt;The code for the fixed-effects linear weekday Stan model is as&amp;nbsp;follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;data&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;            &lt;span class="c1"&gt;// Number of days&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;STUDIES&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;         &lt;span class="c1"&gt;// Number of studies&lt;/span&gt;
  &lt;span class="kt"&gt;real&lt;/span&gt; &lt;span class="n"&gt;NORMAL_SIGMA&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;   &lt;span class="c1"&gt;// The standard deviation of the normal component of the prior&lt;/span&gt;
  &lt;span class="kt"&gt;real&lt;/span&gt; &lt;span class="n"&gt;EXPON_BETA&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// The beta parameter of the exponential component of the prior&lt;/span&gt;

  &lt;span class="c1"&gt;// The observed AMI counts and the trend predictions, for each day of each study&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ami_obs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;STUDIES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="kt"&gt;real&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;lower&lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ami_trend&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;STUDIES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kn"&gt;parameters&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// Monday RR - 1.&lt;/span&gt;
  &lt;span class="c1"&gt;// (We cannot model RR_Mon directly because cannot assign a&lt;/span&gt;
  &lt;span class="c1"&gt;//   common distribution for that.)&lt;/span&gt;
  &lt;span class="c1"&gt;// Its probabilistic value is assigned in the model block below.&lt;/span&gt;
  &lt;span class="kt"&gt;real&lt;/span&gt; &lt;span class="n"&gt;rr_Mon_minus_1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kn"&gt;transformed parameters&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// The RR for every day&lt;/span&gt;
  &lt;span class="kt"&gt;real&lt;/span&gt; &lt;span class="n"&gt;rr_day&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="c1"&gt;// The posttransitional AMI counts for every day of every study.&lt;/span&gt;
  &lt;span class="kt"&gt;real&lt;/span&gt; &lt;span class="n"&gt;ami_dst_mean&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;STUDIES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

  &lt;span class="c1"&gt;// Specifying the RR for every day, using the linear weekday model.&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;rr_day&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rr_Mon_minus_1&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DAYS&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;STUDIES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;ami_dst_mean&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ami_trend&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;rr_day&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kn"&gt;model&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// Mixture models are specified using the construct below:&lt;/span&gt;
  &lt;span class="c1"&gt;// target += log_sum_exp(c1 * XXX_lpdf(x | p1), c2 * YYY_lpdf(x | p2));&lt;/span&gt;
  &lt;span class="k"&gt;target +=&lt;/span&gt; &lt;span class="nb"&gt;log_sum_exp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;normal_lpdf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rr_Mon_minus_1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NORMAL_SIGMA&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                        &lt;span class="nb"&gt;exponential_lpdf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rr_Mon_minus_1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="n"&gt;EXPON_BETA&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="c1"&gt;// Finally, the observations are drawn from a Poisson distribution.&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;STUDIES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;DAYS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;ami_obs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;poisson&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ami_dst_mean&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;data&lt;/code&gt; and &lt;code&gt;parameters&lt;/code&gt; blocks declare the observed quantities and the unobserved parameters, without specifying their&amp;nbsp;distribution.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;transformed parameters&lt;/code&gt; block contains all quantities that can be deterministically derived from the&amp;nbsp;parameters.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;model&lt;/code&gt; block describes both the prior distributions for the parameters and the likelihood&amp;nbsp;functions.&lt;/p&gt;
&lt;h4&gt;Sampling using the Python&amp;nbsp;interface&lt;/h4&gt;
&lt;p&gt;We can compile the Stan model and sample from it in Python using &lt;a href="https://pystan.readthedocs.io/"&gt;PyStan&lt;/a&gt;. Once the software and its dependencies are installed, we can use the following code to draw 50,000 samples from the posterior and plot the results. On my computer, the model compilation takes about a minute, the sampling a few&amp;nbsp;seconds.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pystan&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;

&lt;span class="c1"&gt;# 6-long list of 5-long lists integers (weekday observations)&lt;/span&gt;
&lt;span class="n"&gt;all_obs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="mi"&gt;1735&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1644&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1555&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1522&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1467&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;  &lt;span class="c1"&gt;# Janszky and Ljung 2008&lt;/span&gt;
           &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;            &lt;span class="c1"&gt;# Jiddou et al. 2013&lt;/span&gt;
           &lt;span class="o"&gt;...&lt;/span&gt;
          &lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# 6-long list of 5-long lists floats&lt;/span&gt;
&lt;span class="n"&gt;all_trend&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;

&lt;span class="n"&gt;stan_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;STUDIES&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;DAYS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;NORMAL_SIGMA&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;EXPON_BETA&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;ami_obs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;all_obs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;ami_trend&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;all_trend&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pystan&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StanModel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model_file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dst_model.stan&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sampling&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;stan_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;50000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pystan&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stansummary&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rr_day[1]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Sampling using the R&amp;nbsp;interface&lt;/h4&gt;
&lt;p&gt;The R interface of Stan is called &lt;a href="https://github.com/stan-dev/rstan/"&gt;RStan&lt;/a&gt;, and can be used as&amp;nbsp;follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;rstan&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# observe startup messages&lt;/span&gt;

&lt;span class="n"&gt;stan_data&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="nf"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;STUDIES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;DAYS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;NORMAL_SIGMA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;EXPON_BETA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="m"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;ami_obs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;all_obs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;ami_trend&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;all_trend&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;fit&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;-&lt;/span&gt; &lt;span class="nf"&gt;stan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;dst_model.stan&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;stan_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;iter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;50000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nf"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;extract&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;$$&lt;/span&gt;&lt;span class="n"&gt;rr_day&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Effect of study size in a Bayesian&amp;nbsp;framework&lt;/h3&gt;
&lt;p&gt;For a small study, i.e. if the trend and observed &lt;span class="caps"&gt;AMI&lt;/span&gt; counts are low, we want to see a very slight change in the prior; for a large study, we want to see a bigger&amp;nbsp;change.&lt;/p&gt;
&lt;p&gt;Two factors should play into this. First, if the trend predicts low counts, then we are likely to observe relatively big fluctuations: observing 12 heart attacks on a day when the long-term average is 10 represents a +20% increase, yet it occurs once every 3 days on average. Second, if the study was small and the trend is estimated from only a few weeks’ data, our &lt;em&gt;estimate&lt;/em&gt; of the trend itself has greater variance. This second factor is not yet modeled in our work, but in small studies like that of Čulić (2013), this too could play a&amp;nbsp;role.&lt;/p&gt;
&lt;p&gt;To see the difference between a small and a large study, we visualize the prior and the posterior for the following&amp;nbsp;scenarios:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Observation higher than trend, small sample size (top&amp;nbsp;left);&lt;/li&gt;
&lt;li&gt;Observation equals trend, large sample size (top&amp;nbsp;right);&lt;/li&gt;
&lt;li&gt;Observation lower than trend, large sample size (bottom&amp;nbsp;left);&lt;/li&gt;
&lt;li&gt;Observation higher than trend, large sample size (bottom&amp;nbsp;right).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Posteriors of four example sample counts for trend and observation" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/test-posteriors.svg"&gt;&lt;/p&gt;
&lt;p&gt;When the sample size is small, there is only a slight change from prior to posterior. With a large sample size, the prior beliefs barely have an effect on the posterior. (In the lower right plot, the posterior peaks at more than 1.1 because with 1100 &lt;span class="caps"&gt;AMI&lt;/span&gt; every day, the linear weekday model fits better with a larger &lt;span class="caps"&gt;RR&lt;/span&gt;.)&lt;/p&gt;
&lt;h2&gt;Results&lt;/h2&gt;
&lt;h3&gt;Relevant&amp;nbsp;studies&lt;/h3&gt;
&lt;p&gt;The list of studies analyzed are identical to those analyzed in (Manfredini et al.,&amp;nbsp;2019):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Janszky and Ljung&amp;nbsp;(2008)&lt;/li&gt;
&lt;li&gt;Janszky et al.&amp;nbsp;(2012)&lt;/li&gt;
&lt;li&gt;Čulić&amp;nbsp;(2013)&lt;/li&gt;
&lt;li&gt;Jiddou et al.&amp;nbsp;(2013)&lt;/li&gt;
&lt;li&gt;Sandhu et al.&amp;nbsp;(2014)&lt;/li&gt;
&lt;li&gt;Kirchberger et al.&amp;nbsp;(2015)&lt;/li&gt;
&lt;li&gt;Sipilä et al.&amp;nbsp;(2016)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We excluded the study of Janszky et al. (2012), as the population is a strict subset of (Janszky and Ljung, 2008), with no additional information that is relevant for our analysis. The meta-analysis of Manfredini et al. (2019) did not exclude this study, which biased their results significantly, as the population size of this study is the second largest of&amp;nbsp;all.&lt;/p&gt;
&lt;p&gt;Key characteristics of the above studies can be found in the table below, with more details in the&amp;nbsp;appendix.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Paper&lt;/th&gt;
&lt;th&gt;Sun&lt;/th&gt;
&lt;th&gt;Mon&lt;/th&gt;
&lt;th&gt;Tue&lt;/th&gt;
&lt;th&gt;Wed&lt;/th&gt;
&lt;th&gt;Thu&lt;/th&gt;
&lt;th&gt;Fri&lt;/th&gt;
&lt;th&gt;Sat&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;(Janszky and Ljung, 2008)&lt;/td&gt;
&lt;td&gt;(1374)&lt;/td&gt;
&lt;td&gt;(1636)&lt;/td&gt;
&lt;td&gt;(1494)&lt;/td&gt;
&lt;td&gt;(1471)&lt;/td&gt;
&lt;td&gt;(1484)&lt;/td&gt;
&lt;td&gt;(1422)&lt;/td&gt;
&lt;td&gt;(1370)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;1439&lt;/td&gt;
&lt;td&gt;1735&lt;/td&gt;
&lt;td&gt;1644&lt;/td&gt;
&lt;td&gt;1555&lt;/td&gt;
&lt;td&gt;1522&lt;/td&gt;
&lt;td&gt;1467&lt;/td&gt;
&lt;td&gt;1414&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Jiddou et al., 2013)&lt;/td&gt;
&lt;td&gt;(13)&lt;/td&gt;
&lt;td&gt;(29)&lt;/td&gt;
&lt;td&gt;(20)&lt;/td&gt;
&lt;td&gt;(23)&lt;/td&gt;
&lt;td&gt;(17)&lt;/td&gt;
&lt;td&gt;(25)&lt;/td&gt;
&lt;td&gt;(16)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;td&gt;28&lt;/td&gt;
&lt;td&gt;28&lt;/td&gt;
&lt;td&gt;26&lt;/td&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;18&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Čulić, 2013)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(7)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(7)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(5)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Kirchberger et al., 2015)&lt;/td&gt;
&lt;td&gt;(70)&lt;/td&gt;
&lt;td&gt;(70)&lt;/td&gt;
&lt;td&gt;(70)&lt;/td&gt;
&lt;td&gt;(70)&lt;/td&gt;
&lt;td&gt;(70)&lt;/td&gt;
&lt;td&gt;(70)&lt;/td&gt;
&lt;td&gt;(70)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;66&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;td&gt;83&lt;/td&gt;
&lt;td&gt;76&lt;/td&gt;
&lt;td&gt;77&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;td&gt;60&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Sandhu et al., 2014)&lt;/td&gt;
&lt;td&gt;(111)&lt;/td&gt;
&lt;td&gt;(138)&lt;/td&gt;
&lt;td&gt;(127)&lt;/td&gt;
&lt;td&gt;(125)&lt;/td&gt;
&lt;td&gt;(120)&lt;/td&gt;
&lt;td&gt;(120)&lt;/td&gt;
&lt;td&gt;(110)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;108&lt;/td&gt;
&lt;td&gt;170&lt;/td&gt;
&lt;td&gt;125&lt;/td&gt;
&lt;td&gt;122&lt;/td&gt;
&lt;td&gt;117&lt;/td&gt;
&lt;td&gt;117&lt;/td&gt;
&lt;td&gt;114&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Sipilä et al., 2016)&lt;/td&gt;
&lt;td&gt;(208)&lt;/td&gt;
&lt;td&gt;(269)&lt;/td&gt;
&lt;td&gt;(243)&lt;/td&gt;
&lt;td&gt;(259)&lt;/td&gt;
&lt;td&gt;(227)&lt;/td&gt;
&lt;td&gt;(227)&lt;/td&gt;
&lt;td&gt;(198)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;201&lt;/td&gt;
&lt;td&gt;229&lt;/td&gt;
&lt;td&gt;253&lt;/td&gt;
&lt;td&gt;254&lt;/td&gt;
&lt;td&gt;262&lt;/td&gt;
&lt;td&gt;242&lt;/td&gt;
&lt;td&gt;179&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;em&gt;(Spring &lt;span class="caps"&gt;AMI&lt;/span&gt; counts. Trend predictions in parentheses, under them the number of incidences on the posttransitional week. Total count on the posttransitional week:&amp;nbsp;14,024.)&lt;/em&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Paper&lt;/th&gt;
&lt;th&gt;Sun&lt;/th&gt;
&lt;th&gt;Mon&lt;/th&gt;
&lt;th&gt;Tue&lt;/th&gt;
&lt;th&gt;Wed&lt;/th&gt;
&lt;th&gt;Thu&lt;/th&gt;
&lt;th&gt;Fri&lt;/th&gt;
&lt;th&gt;Sat&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;(Janszky and Ljung, 2008)&lt;/td&gt;
&lt;td&gt;(1780)&lt;/td&gt;
&lt;td&gt;(2140)&lt;/td&gt;
&lt;td&gt;(1991)&lt;/td&gt;
&lt;td&gt;(1910)&lt;/td&gt;
&lt;td&gt;(1941)&lt;/td&gt;
&lt;td&gt;(1949)&lt;/td&gt;
&lt;td&gt;(1781)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;1777&lt;/td&gt;
&lt;td&gt;2038&lt;/td&gt;
&lt;td&gt;1958&lt;/td&gt;
&lt;td&gt;1895&lt;/td&gt;
&lt;td&gt;1916&lt;/td&gt;
&lt;td&gt;1977&lt;/td&gt;
&lt;td&gt;1732&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Jiddou et al., 2013)&lt;/td&gt;
&lt;td&gt;(18)&lt;/td&gt;
&lt;td&gt;(24)&lt;/td&gt;
&lt;td&gt;(21)&lt;/td&gt;
&lt;td&gt;(27)&lt;/td&gt;
&lt;td&gt;(22)&lt;/td&gt;
&lt;td&gt;(24)&lt;/td&gt;
&lt;td&gt;(20)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;34&lt;/td&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;19&lt;/td&gt;
&lt;td&gt;20&lt;/td&gt;
&lt;td&gt;18&lt;/td&gt;
&lt;td&gt;30&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Kirchberger et al., 2015)&lt;/td&gt;
&lt;td&gt;(67)&lt;/td&gt;
&lt;td&gt;(67)&lt;/td&gt;
&lt;td&gt;(67)&lt;/td&gt;
&lt;td&gt;(67)&lt;/td&gt;
&lt;td&gt;(67)&lt;/td&gt;
&lt;td&gt;(67)&lt;/td&gt;
&lt;td&gt;(67)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;60&lt;/td&gt;
&lt;td&gt;57&lt;/td&gt;
&lt;td&gt;77&lt;/td&gt;
&lt;td&gt;73&lt;/td&gt;
&lt;td&gt;77&lt;/td&gt;
&lt;td&gt;84&lt;/td&gt;
&lt;td&gt;60&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Sandhu et al., 2014)&lt;/td&gt;
&lt;td&gt;(86)&lt;/td&gt;
&lt;td&gt;(107)&lt;/td&gt;
&lt;td&gt;(99)&lt;/td&gt;
&lt;td&gt;(97)&lt;/td&gt;
&lt;td&gt;(93)&lt;/td&gt;
&lt;td&gt;(93)&lt;/td&gt;
&lt;td&gt;(85)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;89&lt;/td&gt;
&lt;td&gt;102&lt;/td&gt;
&lt;td&gt;79&lt;/td&gt;
&lt;td&gt;93&lt;/td&gt;
&lt;td&gt;104&lt;/td&gt;
&lt;td&gt;86&lt;/td&gt;
&lt;td&gt;99&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Sipilä et al., 2016)&lt;/td&gt;
&lt;td&gt;(159)&lt;/td&gt;
&lt;td&gt;(197)&lt;/td&gt;
&lt;td&gt;(193)&lt;/td&gt;
&lt;td&gt;(170)&lt;/td&gt;
&lt;td&gt;(201)&lt;/td&gt;
&lt;td&gt;(178)&lt;/td&gt;
&lt;td&gt;(157)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;160&lt;/td&gt;
&lt;td&gt;214&lt;/td&gt;
&lt;td&gt;180&lt;/td&gt;
&lt;td&gt;198&lt;/td&gt;
&lt;td&gt;199&lt;/td&gt;
&lt;td&gt;172&lt;/td&gt;
&lt;td&gt;153&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(Čulić, 2013)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(7)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(7)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(6)&lt;/td&gt;
&lt;td&gt;(5)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;em&gt;(Autumn &lt;span class="caps"&gt;AMI&lt;/span&gt; counts. Trend predictions in parentheses, under them the number of incidences on the posttransitional week. Total count on the posttransitional week:&amp;nbsp;15,921.)&lt;/em&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span class="caps"&gt;AMI&lt;/span&gt; risk after spring&amp;nbsp;transition&lt;/h3&gt;
&lt;p&gt;The posteriors after the individual papers are shown below, along with their 95% central credible interval&amp;nbsp;(CCrI).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Forest plot that shows the posterior after the individual papers" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/forest_plot.svg"&gt;&lt;/p&gt;
&lt;p&gt;The width of the 95% CCrI is a measure of the precision of the estimate. The 95% CCrI after (Janszky and Ljung, 2008) and (Sipilä et al. 2016) are comparably narrow, but they are centered around 1.085 and 1.001, respectively. In fact, as we can see from the likelihood functions (not shown here), the study of Sipilä et al. (2016) presents a case for a slight &lt;em&gt;decrease&lt;/em&gt; in &lt;span class="caps"&gt;AMI&lt;/span&gt; risk under this&amp;nbsp;model.&lt;/p&gt;
&lt;p&gt;In the fixed effects model the posterior is weighted heavily towards the study with the largest sample size (Janszky and Ljung 2008), and the other studies barely play a role.
Specifically, the posterior mean of the &lt;span class="caps"&gt;RR&lt;/span&gt; is 107.7% (95% central credible interval: &lt;script type="math/tex"&gt;[104.7\%, 110.7\%]&lt;/script&gt;) – the posterior is shown below. We emphasize again that the relative weights of the studies is not arbitrary, but is fully determined by the model and the data through the rules of probability&amp;nbsp;theory.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Posterior probability after every paper included in this analysis" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/combined_posterior.svg"&gt;&lt;/p&gt;
&lt;p&gt;We arrive at the same posterior when drawing samples from it through a Monte Carlo method with Stan. Furthermore, as the tails of posterior are symmetric, the 95% highest density interval of [104.8%, 110.7%] closely aligns with the 95% central credible interval obtained earlier ([104.7%, 110.7%]). (This fact merely verifies that the two methods compute the model correctly, it does not provide additional evidence about the quality of the&amp;nbsp;data.)&lt;/p&gt;
&lt;p&gt;&lt;img alt="Posterior after spring data – with Stan" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/posterior_mc.svg"&gt;&lt;/p&gt;
&lt;p&gt;The studies together provide so many data points that the choice of prior does not play an important role. Assuming a uniform prior on the risk ratio, i.e. assuming that we have no more &lt;em&gt;prior&lt;/em&gt; evidence for +2% than for +20% or −30% change in risk, we arrive at practically the same posterior, and a 95% &lt;span class="caps"&gt;HDI&lt;/span&gt; of [104.7%,&amp;nbsp;110.7%].&lt;/p&gt;
&lt;p&gt;&lt;img alt="Posterior after spring data, uniform prior" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/posterior_mc_uniform.svg"&gt;&lt;/p&gt;
&lt;h4&gt;Exponential weekday&amp;nbsp;model&lt;/h4&gt;
&lt;p&gt;The exponential weekday model relaxes the assumption of linear decrease in &lt;span class="caps"&gt;RR&lt;/span&gt; throughout the week, and instead models the daily RRs as exponentially decreasing. That is, for a parameter &lt;script type="math/tex"&gt;\alpha \in [0,1]&lt;/script&gt;, the risk ratios are determined&amp;nbsp;as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;script type="math/tex"&gt;r_\text{Mon} = 1 + \theta&lt;/script&gt;,&lt;/li&gt;
&lt;li&gt;
&lt;script type="math/tex"&gt;r_\text{Tue} = 1 + \alpha \cdot \theta&lt;/script&gt;,&lt;/li&gt;
&lt;li&gt;
&lt;script type="math/tex"&gt;r_\text{Wed} = 1 + \alpha^2 \cdot \theta&lt;/script&gt;,&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Assuming a uniform prior on both &lt;script type="math/tex"&gt;\alpha&lt;/script&gt; and &lt;script type="math/tex"&gt;\theta&lt;/script&gt;, the posterior for this model looks as&amp;nbsp;follows:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Posterior of alpha and theta visualized together" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/posterior_mc_exp.svg"&gt;&lt;/p&gt;
&lt;p&gt;I expected the posterior on &lt;script type="math/tex"&gt;\alpha&lt;/script&gt; to be centered much closer to zero (meaning a rapid decrease in risk after Monday), but the posterior shows the opposite: most of the plausible values of &lt;script type="math/tex"&gt;\alpha&lt;/script&gt; correspond to an &lt;script type="math/tex"&gt;r_\text{Fri} / r_\text{Mon}&lt;/script&gt; ratio greater than the 0.2 ratio assumed previously (&lt;script type="math/tex"&gt;0.7^4 \approx 0.24&lt;/script&gt;). The 95% &lt;span class="caps"&gt;HDI&lt;/span&gt; for &lt;script type="math/tex"&gt;\theta&lt;/script&gt; is [104.0%, 110.2%] (mean 107.1%), which is close to the linear weekday model, and the 95% &lt;span class="caps"&gt;HDI&lt;/span&gt; for &lt;script type="math/tex"&gt;\alpha&lt;/script&gt; is [0.66, 1.0] (mean 0.83). The figure below shows the risk ratios over the week for 20 of the sampled combinations of &lt;script type="math/tex"&gt;(\alpha, \theta)&lt;/script&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Risk ratios over the week for 20 sampled combinations of alpha-theta" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/risk_ratios_exp.svg"&gt;&lt;/p&gt;
&lt;p&gt;Over the five weekdays this posterior corresponds to an average risk ratio of 105.0% (95% &lt;span class="caps"&gt;HDI&lt;/span&gt;: [103.1%, 107.0%]). Assuming an affected population of 1.6 billion globally, with &lt;span class="caps"&gt;AMI&lt;/span&gt; rates standard across the &lt;span class="caps"&gt;USA&lt;/span&gt; &lt;a href="https://www.cdc.gov/heartdisease/heart_attack.htm"&gt;&lt;script type="math/tex"&gt;^\textsf{[source]}&lt;/script&gt;&lt;/a&gt;, this means that over the whole posttransitional week the an additional 2700 people experience &lt;span class="caps"&gt;AMI&lt;/span&gt; (95% &lt;span class="caps"&gt;HDI&lt;/span&gt;: [1600, 3700]), on top of the regular 53,000 per&amp;nbsp;week.&lt;/p&gt;
&lt;h3&gt;&lt;span class="caps"&gt;AMI&lt;/span&gt; risk after autumn&amp;nbsp;transition&lt;/h3&gt;
&lt;p&gt;The posterior for the autumn data, using the linear weekday model with uniform prior on &lt;script type="math/tex"&gt;\theta&lt;/script&gt; is shown below. The 95% &lt;span class="caps"&gt;HDI&lt;/span&gt; of [95.1%, 100.3%] suggests a decrease in &lt;span class="caps"&gt;AMI&lt;/span&gt; risk, but the hypothesis of “no change in risk” (&lt;script type="math/tex"&gt;\theta = 100.0\%&lt;/script&gt;) is also compatible with the&amp;nbsp;data.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Posterior after autumn data" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/posterior_mc_autumn.svg"&gt;&lt;/p&gt;
&lt;p&gt;Globally, this translates to a change of &lt;span class="caps"&gt;AMI&lt;/span&gt; counts over the whole week of −700 (95% &lt;span class="caps"&gt;HDI&lt;/span&gt; [−1600, +100]), from the original&amp;nbsp;53,000.&lt;/p&gt;
&lt;h2&gt;Visualizing the observations and the posterior predictive&amp;nbsp;distribution&lt;/h2&gt;
&lt;h3&gt;Posterior predictive&amp;nbsp;distribution&lt;/h3&gt;
&lt;p&gt;In the figure below we visualize the posterior predictive distribution (for each day of each paper) on the spring posttransitional week, together with the actual&amp;nbsp;observations.&lt;/p&gt;
&lt;p&gt;These predictive distributions on &lt;script type="math/tex"&gt;\tilde y&lt;/script&gt; can be calculated by integrating the likelihoods &lt;script type="math/tex"&gt;P(\tilde y \given \theta)&lt;/script&gt; over the parameter space, weighted by the posterior probability of the parameter values &lt;script type="math/tex"&gt;p(\theta \given \mathcal D)&lt;/script&gt;, using the following&amp;nbsp;formula:&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
P(\tilde y \given \mathcal D) =
\int P(\tilde y \given \theta, \mathcal D) \,d\theta =
\int P(\tilde y \given \theta) p(\theta \given \mathcal D) \,d\theta %]]&gt;&lt;/script&gt;
&lt;p&gt;&lt;img alt="Posterior predictive distribution" src="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/posterior_predictive_95.svg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(Posterior predictive distribution for&amp;nbsp;spring.)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Only the Monday observation of (Sipilä et al., 2016) falls out of the 95% central credible interval (CCrI), and in addition the Thursday observation of (Sipilä et al., 2016) and the Monday observation of (Čulić, 2013) falls out of the 90% CCrI (shown &lt;a href="https://www.treszkai.com/2019/11/11/dst-vs-ami/figs/posterior_predictive_90.svg"&gt;here&lt;/a&gt;), indicating a good fit of the&amp;nbsp;model.&lt;/p&gt;
&lt;h2&gt;Further&amp;nbsp;research&lt;/h2&gt;
&lt;p&gt;The importance of this issue depends on whether the increase in AMIs on the posttransitional week is merely a shift from the weeks afterwards. In other words, how many of these additional AMIs would have been asymptomatic, had it not been for the &lt;span class="caps"&gt;DST&lt;/span&gt;? We suspect that this number is quite low, because effectively the transition shifts the sleep schedule by an hour, which happens relatively often (e.g. when traveling), and single-day sleep deprivations are even more common. One way to approach this question is to collect the &lt;span class="caps"&gt;AMI&lt;/span&gt; counts in the few weeks following a &lt;span class="caps"&gt;DST&lt;/span&gt; transition, and compare the results obtained from regions with &lt;span class="caps"&gt;DST&lt;/span&gt; and regions without &lt;span class="caps"&gt;DST&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;The main deficiency of this meta-analysis is the assumption of equal effects regardless of country, while using the fixed effects model. This assumption could be relaxed in a random effects model, although that would introduce a subjective choice of inter-country variance, making the results harder to interpret correctly and simpler to misinterpret.&lt;sup&gt;&lt;a href="#fn-misinterpret"&gt;[fn-1]&lt;/a&gt;&lt;a id="fn-src-misinterpret"&gt;&lt;/a&gt; ↓&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;As the absolute effect of &lt;span class="caps"&gt;DST&lt;/span&gt; transitions on &lt;span class="caps"&gt;AMI&lt;/span&gt; incidences is not substantial (given the low base rate), even on a global scale, I suggest no further research on this specific topic.&lt;sup&gt;&lt;a href="#fn-further"&gt;[fn-2]&lt;/a&gt;&lt;a id="fn-src-further"&gt;&lt;/a&gt; ↓&lt;/sup&gt; There are many research areas around either sleep or cardiovascular health that are more&amp;nbsp;important.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;A standard argument against Bayesian methods is that the subjective choice of prior influences the results arbitrarily. Although this is a philosophical question, we believe meaningful and consistent probabilistic inference cannot be done without describing our initial beliefs and defining how different parameter values would result in different observations. However, in our case the likelihood of the observed data dominated the prior, rendering the choice of prior almost&amp;nbsp;irrelevant.&lt;/p&gt;
&lt;p&gt;Our analysis showed an increase in &lt;span class="caps"&gt;AMI&lt;/span&gt; risk during spring (relative risk increase 5–11% on Monday, less on later days), which translates to an additional 1600–3700 &lt;span class="caps"&gt;AMI&lt;/span&gt; incidences over the whole affected period. The data from the autumn transition showed either no change or a slight decrease in &lt;span class="caps"&gt;AMI&lt;/span&gt; risk (at most 5% relative risk decrease), translating to an estimated change in incidence counts somewhere between −1600 and +100.
These figures alone do not provide an argument against the institution of &lt;span class="caps"&gt;DST&lt;/span&gt;, especially without evidence that these changes are not merely the result of future &lt;span class="caps"&gt;AMI&lt;/span&gt; incidences advanced (in spring) or postponed (in autumn), which is the default position.
However, the analysis provides strong evidence for the hypothesis that our body can react negatively to a single hour shift in our sleep cycles, which should be a crucial factor in the evaluation of &lt;span class="caps"&gt;DST&lt;/span&gt;, and shows the importance of a consistent sleep&amp;nbsp;schedule.&lt;/p&gt;
&lt;h2&gt;License&lt;/h2&gt;
&lt;p&gt;&lt;a rel="license" href="http://creativecommons.org/licenses/by/4.0/"&gt;&lt;img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /&gt;&lt;/a&gt;&lt;br /&gt;&lt;i&gt;&lt;span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"&gt;The effects of daylight savings time adjustment on the incidence rate of acute myocardial infarction: a Bayesian meta-analysis&lt;/span&gt;&lt;/i&gt; by &lt;a xmlns:cc="http://creativecommons.org/ns#" href="https://treszkai.github.io/2019/11/11/dst-vs-ami" property="cc:attributionName" rel="cc:attributionURL"&gt;Laszlo Treszkai&lt;/a&gt; is licensed under a &lt;a rel="license" href="http://creativecommons.org/licenses/by/4.0/"&gt;Creative Commons Attribution 4.0 International License&lt;/a&gt; (&lt;span class="caps"&gt;CC&lt;/span&gt;-&lt;span class="caps"&gt;BY&lt;/span&gt;-4.0).&lt;/p&gt;
&lt;p&gt;The data presented in the &lt;a href="#Relevant-studies"&gt;Relevant studies&lt;/a&gt; section belong to the original authors and they do not fall under the above &lt;span class="caps"&gt;CC&lt;/span&gt;-&lt;span class="caps"&gt;BY&lt;/span&gt;-4.0&amp;nbsp;license.&lt;/p&gt;
&lt;p&gt;The software used for this analysis is distributed under the &lt;span class="caps"&gt;MIT&lt;/span&gt;&amp;nbsp;license.&lt;/p&gt;
&lt;p&gt;Please cite this work as&amp;nbsp;follows:&lt;/p&gt;
&lt;p&gt;Laszlo Treszkai. 2019. &lt;em&gt;The effects of daylight savings time adjustment on the incidence rate of acute myocardial infarction: a Bayesian meta-analysis&lt;/em&gt;. &lt;a href="http://treszkai.github.io/2019/11/11/dst-vs-ami"&gt;http://treszkai.github.io/2019/11/11/dst-vs-ami&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;BibTeX:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nc"&gt;@misc&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
  &lt;span class="nl"&gt;title&lt;/span&gt; &lt;span class="err"&gt;=&lt;/span&gt; &lt;span class="err"&gt;{The&lt;/span&gt; &lt;span class="err"&gt;effects&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;daylight&lt;/span&gt; &lt;span class="err"&gt;savings&lt;/span&gt; &lt;span class="err"&gt;time&lt;/span&gt; &lt;span class="err"&gt;adjustment&lt;/span&gt; &lt;span class="err"&gt;on&lt;/span&gt; &lt;span class="err"&gt;the&lt;/span&gt; &lt;span class="err"&gt;incidence&lt;/span&gt; &lt;span class="err"&gt;rate&lt;/span&gt; &lt;span class="err"&gt;of&lt;/span&gt; &lt;span class="err"&gt;acute&lt;/span&gt; &lt;span class="err"&gt;myocardial&lt;/span&gt; &lt;span class="err"&gt;infarction:&lt;/span&gt; &lt;span class="err"&gt;a&lt;/span&gt; &lt;span class="err"&gt;{B&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="c"&gt;ayesian meta-analysis},&lt;/span&gt;
  &lt;span class="c"&gt;author = {Laszlo Treszkai},&lt;/span&gt;
  &lt;span class="c"&gt;howpublished = {\url{http://treszkai.github.io/2019/11/11/dst-vs-ami}},&lt;/span&gt;
&lt;span class="c"&gt;%  note = {Accessed: yyyy-mm-dd}  % Optional. The document at this URL is not going to change.&lt;/span&gt;
  &lt;span class="c"&gt;year = {2019}&lt;/span&gt;
  &lt;span class="c"&gt;month = {oct}&lt;/span&gt;
&lt;span class="c"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;References&lt;/h1&gt;
&lt;p&gt;Cumming, G. (2014). &lt;em&gt;The new statistics why and how.&lt;/em&gt; Psychological Science, 25(1),&amp;nbsp;7–29.&lt;/p&gt;
&lt;p&gt;Andrew Gelman, John B. Carlin, Hal S. Stern, David B. Dunson, Aki Vehtari, and Donald B. Rubin. 2013. &lt;em&gt;Bayesian Data Analysis.&lt;/em&gt; &lt;a href="http://www.stat.columbia.edu/~gelman/book/"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ronald L. Wasserstein, Nicole A. Lazar. 2016. &lt;em&gt;The &lt;span class="caps"&gt;ASA&lt;/span&gt; Statement on p-Values: Context, Process, and Purpose.&lt;/em&gt; The American Statistician. Volume 70, Issue 2, pp. 129-133. &lt;a href="https://doi.org/10.1080/00031305.2016.1154108"&gt;link (&lt;span class="caps"&gt;OA&lt;/span&gt;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ronald L. Wasserstein, Allen L. Schirm &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Nicole A. Lazar. 2019. &lt;em&gt;Moving to a World Beyond “p &amp;lt; 0.05”.&lt;/em&gt; Volume 73, pp. 1–19. &lt;a href="https://doi.org/10.1080/00031305.2019.1583913"&gt;link (&lt;span class="caps"&gt;OA&lt;/span&gt;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;John K. Kruschke, Torrin M. Liddell, 2018. &lt;em&gt;The Bayesian New Statistics.&lt;/em&gt;  Psychonomic Bulletin &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Review. Volume 25, Issue 1, pp 178–206. &lt;a href="https://link.springer.com/article/10.3758/s13423-016-1221-4"&gt;link (&lt;span class="caps"&gt;OA&lt;/span&gt;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Amneet Sandhu, Milan Seth, Hitinder S. Gurm. 2014. &lt;em&gt;Daylight savings time and myocardial infarction.&lt;/em&gt; Open Heart. &lt;a href="http://dx.doi.org/10.1136/openhrt-2013-000019"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Roberto Manfredini, Fabio Fabbian, Rosaria Cappadona, Alfredo De Giorgi, Francesca Bravi, Tiziano Carradori, Maria Elena Flacco, Lamberto Manzoli. 2019.
&lt;em&gt;Daylight Saving Time and Acute Myocardial Infarction: A Meta-Analysis&lt;/em&gt;. Journal of Clinical Medicine. 2019, &lt;em&gt;8&lt;/em&gt;, 404; &lt;a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6463000/"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kirchberger et al. 2015. &lt;em&gt;Are daylight saving time transitions associated with changes in myocardial infarction incidence? Results from the German &lt;span class="caps"&gt;MONICA&lt;/span&gt;/&lt;span class="caps"&gt;KORA&lt;/span&gt; Myocardial Infarction Registry&lt;/em&gt;. &lt;span class="caps"&gt;BMC&lt;/span&gt; Public Health. 2015; 15: 778. &lt;a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4535383/"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Janszky and Ljung. 2008. &lt;em&gt;Shifts to and from Daylight Saving Time and Incidence of Myocardial Infarction&lt;/em&gt;. The New England Journal of Medicine.  &lt;span class="caps"&gt;BMC&lt;/span&gt; Public Health. 359; 18. &lt;a href="https://www.nejm.org/doi/full/10.1056/NEJMc0807104"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viktor Čulić. 2013. &lt;em&gt;Daylight saving time transitions and acute myocardial infarction&lt;/em&gt;. Chronobiology International. 2013; 30(5): 662–668. &lt;a href="https://www.tandfonline.com/doi/abs/10.3109/07420528.2013.775144"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Janszky, Ahnve, Ljung, Mukamal, Gautam, Wallentin, Stenestrand. 2012. &lt;em&gt;Daylight saving time shifts and incidence of acute myocardial infarction – Swedish Register of Information and Knowledge About Swedish Heart Intensive Care Admissions (&lt;span class="caps"&gt;RIKS&lt;/span&gt;-&lt;span class="caps"&gt;HIA&lt;/span&gt;)&lt;/em&gt;. Sleep Medicine 13 (2012) 237–242. &lt;a href="https://www.sciencedirect.com/science/article/abs/pii/S1389945711003832"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Monica R. Jiddou, &lt;span class="caps"&gt;MD&lt;/span&gt;, Mark Pica, &lt;span class="caps"&gt;BS&lt;/span&gt;, Judy Boura, &lt;span class="caps"&gt;MS&lt;/span&gt;, Lihua Qu, &lt;span class="caps"&gt;MS&lt;/span&gt;, and Barry A. Franklin, PhD. 2013. &lt;em&gt;Incidence of Myocardial Infarction With Shifts to and From Daylight Savings Time&lt;/em&gt;. The American Journal of Cardiology. Volume 111, Issue 5, Pages 631–635. &lt;a href="http://dx.doi.org/10.1016/j.amjcard.2012.11.010"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jussi &lt;span class="caps"&gt;O.T.&lt;/span&gt; Sipilä, Päivi Rautava &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Ville Kytö. 2016. &lt;em&gt;Association of daylight saving time transitions with incidence and in-hospital mortality of myocardial infarction in Finland&lt;/em&gt;. Annals of Medicine, 48:1-2, 10-16. &lt;a href="http://dx.doi.org/10.3109/07853890.2015.1119302"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Young Joo Yang, Chang Seok Bang, Gwang Ho Baik, Tae Young Park, Suk Pyo Shin, Ki Tae Suk, Dong Joon Kim. 2017.
&lt;em&gt;Prokinetics for the treatment of functional dyspepsia: Bayesian network meta-analysis&lt;/em&gt;.
&lt;span class="caps"&gt;BMC&lt;/span&gt; Gastroenterology 17:83 &lt;span class="caps"&gt;DOI&lt;/span&gt; 10.1186/s12876-017-0639-0. &lt;a href="https://bmcgastroenterol.biomedcentral.com/track/pdf/10.1186/s12876-017-0639-0"&gt;link (&lt;span class="caps"&gt;OA&lt;/span&gt;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Xiaole Su, Xinfang Xie, Lijun Liu, Jicheng Lv, Fujian Song, Vlado Perkovic, Hong Zhang. 2017.
&lt;em&gt;Comparative Effectiveness of 12 Treatment Strategies for Preventing Contrast-Induced Acute Kidney Injury: A Systematic Review and Bayesian Network Meta-analysis&lt;/em&gt;
Volume 69, Issue 1, pp. 69–77.
&lt;span class="caps"&gt;DOI&lt;/span&gt;: 10.1053/j.ajkd.2016.07.033, &lt;a href="https://www.ajkd.org/article/S0272-6386(16)30421-8/fulltext"&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Devin Incerti. 2015. &lt;em&gt;Bayesian Meta-Analysis with R and Stan&lt;/em&gt;. Self-published, online. https://devinincerti.com/2015/10/31/bayesian-meta-analysis.html. Retrieved 4 Oct&amp;nbsp;2019.&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Appendix&lt;/h1&gt;
&lt;h2&gt;Characteristics of&amp;nbsp;studies&lt;/h2&gt;
&lt;h3&gt;Janszky and Ljung&amp;nbsp;(2008)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Data&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;source: the Swedish registry of acute myocardial infarction (“which provides high-quality information on all acute myocardial infarctions in the country since&amp;nbsp;1987”)&lt;/li&gt;
&lt;li&gt;years:&amp;nbsp;1987–2006&lt;/li&gt;
&lt;li&gt;observations: the incidence of &lt;span class="caps"&gt;AMI&lt;/span&gt; during each of the first 7 days after the spring or autumn&amp;nbsp;transition&lt;/li&gt;
&lt;li&gt;trend: the mean of the incidences on the corresponding weekdays 2 weeks before and 2 weeks after the day of&amp;nbsp;interest&lt;/li&gt;
&lt;li&gt;total &lt;span class="caps"&gt;AMI&lt;/span&gt; cases on spring posttransitional week:&amp;nbsp;10,776&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Quotes&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The effects of transitions were consistently more pronounced for people under 65 years of age than for those 65 years of age or&amp;nbsp;older.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The authors properly controlled for the Easter&amp;nbsp;holiday.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Analyses of the data for the spring shift are based on the 15 years between 1987 and
2006 in which Easter Sunday was not the transition day.
[&amp;#8230;]
For years in which Easter
Sunday was celebrated 2 weeks after the Sunday of the spring shift, we defined the control period for the Sunday of
the shift as the Sunday 3 weeks before and the Sunday 3 weeks after (thus skipping Easter&amp;nbsp;Sunday).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Overanalysis&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;The following observations do not have any plausible explanation, and are probably just noise. Question: did later studies confirm these&amp;nbsp;findings?&lt;/p&gt;
&lt;p&gt;1.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When we did not exclude Easter if it coincided with the exposure or control days, we observed an even higher effect size associated with the spring&amp;nbsp;transition.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For the autumn shift, in contrast to the analyses of all acute myocardial infarctions, analyses restricted to fatal cases showed a smaller decrease in the incidence of acute myocardial infarction on Monday, and the risk of fatal acute myocardial infarction increased during the first week after the&amp;nbsp;shift.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;3.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The effect of the spring transition to daylight saving time on the incidence of acute myocardial infarction was somewhat more pronounced in women than in men, and the autumn effect was more pronounced in men than in&amp;nbsp;women.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Additional information&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;The authors were employed by institutions in Stockholm, Sweden, meaning the use of the Swedish registry is &lt;em&gt;no evidence for selection bias&lt;/em&gt;. Furthermore, the end of the 30-year period of their study is only a year away from the date of the&amp;nbsp;publication.&lt;/p&gt;
&lt;h3&gt;Janszky et al.&amp;nbsp;(2012)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Data&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;those &lt;span class="caps"&gt;AMI&lt;/span&gt; patients who were admitted to CCUs at participating&amp;nbsp;hospitals&lt;/li&gt;
&lt;li&gt;from 1995 to&amp;nbsp;2007&lt;/li&gt;
&lt;li&gt;dataset: Register of Information and Knowledge about Swedish Heart Intensive Care Admissions (&lt;span class="caps"&gt;RIKS&lt;/span&gt;-&lt;span class="caps"&gt;HIA&lt;/span&gt;)&lt;/li&gt;
&lt;li&gt;total &lt;span class="caps"&gt;AMI&lt;/span&gt; cases during spring posttransitional week:&amp;nbsp;3235.9&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This study didn&amp;#8217;t publish per-day &lt;span class="caps"&gt;AMI&lt;/span&gt; counts, only the total during the whole posttransitional&amp;nbsp;week.&lt;/p&gt;
&lt;p&gt;The time period matches exactly that of Janszky and Ljung (2008), and every case included in this study was also included in Janszky and Ljung (2008). As such, this study doesn&amp;#8217;t add new information to the previous work with regards to the variables we consider, and it is &lt;strong&gt;excluded from our meta-analysis&lt;/strong&gt; in order to avoid&amp;nbsp;double-counting.&lt;/p&gt;
&lt;p&gt;As the authors put&amp;nbsp;it:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The study populations of the present and our previous study
overlapped substantially. Our previous analyses included all AMIs
detected either at a hospital or at an autopsy in Sweden from
1987 to 2006, a clear strength. In the present work, we investigated
only those &lt;span class="caps"&gt;AMI&lt;/span&gt; patients who were admitted to CCUs at participating
hospitals from 1995 to 2007. Although this limited our power
substantially, it allowed us to examine clinical factors that might
modify the risks related to &lt;span class="caps"&gt;DST&lt;/span&gt;&amp;nbsp;transitions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Čulić&amp;nbsp;(2013)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Data&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;patients hospitalized because of &lt;span class="caps"&gt;AMI&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;from 1990 to&amp;nbsp;1996&lt;/li&gt;
&lt;li&gt;40 patients on workdays following &lt;span class="caps"&gt;DST&lt;/span&gt;&amp;nbsp;change&lt;/li&gt;
&lt;li&gt;at University Hospital Centre Split in Split,&amp;nbsp;Croatia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It is unclear whether the trend prediction is made from the 2 weeks before and after the posttransitional week, or from all 50 nontransitional&amp;nbsp;weeks:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The incidence ratios of &lt;span class="caps"&gt;AMI&lt;/span&gt; for the first week after the
two &lt;span class="caps"&gt;DST&lt;/span&gt; shifts (posttransitional weeks) and each day of
that week were estimated by dividing the incidence
during those periods with the average incidences during
corresponding days and weeks throughout the year: 2
wks before and 2 wks after the posttransitional week,
and the 50 nontransitional weeks of the year&amp;nbsp;altogether.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It is unclear why exactly the data from 1990 to 1996 was analyzed, if the study was conducted in 2013. This is &lt;em&gt;suggestive of selection bias&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Overanalysis&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;23 additional variables were analyzed (sex, employment status, use of β-blocker, etc.); some were bound to have low&amp;nbsp;p-values:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The independent predictors for &lt;span class="caps"&gt;AMI&lt;/span&gt; during
this period in spring were male sex (p = 0.03) and nonengagement in physical activity (p = 0.02) and there was a trend
for the lower risk of incident among those taking calcium antagonists (p = 0.07). In autumn, the predictors were
female sex (p = 0.04), current employment (p = 0.006), not taking b-blocker (p = 0.03), and nonengagement in
physical activity (p =&amp;nbsp;0.02).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Jiddou et al.&amp;nbsp;(2013)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Data&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a retrospective electronic chart&amp;nbsp;review&lt;/li&gt;
&lt;li&gt;all patients presenting to the emergency centers at Beaumont Hospitals in Royal Oak and Troy, Michigan, with the primary diagnosis of &lt;span class="caps"&gt;AMI&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;age: patients who were aged &amp;gt;18 years, resulting in 70±15&amp;nbsp;years&lt;/li&gt;
&lt;li&gt;exclusion conditions: minor,&amp;nbsp;pregnant&lt;/li&gt;
&lt;li&gt;from October 2006 to April 2012 (7&amp;nbsp;years)&lt;/li&gt;
&lt;li&gt;trend: patients admitted with comparable diagnoses on the corresponding weekdays 2 weeks before and 2 weeks after the shifts to and from &lt;span class="caps"&gt;DST&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;additional variables: demographic data, medical history, tobacco use, prescribed medications, whether the patient underwent cardiac catheterization; diagnosis of hypertension, hyperlipidemia, and coronary artery&amp;nbsp;disease.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Quotes&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2 AMIs occurred on Easter Sunday and were considered potential confounders and&amp;nbsp;excluded.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It is correct to note the incidences on Easter Sunday, but even more important would be the incidences on Easter &lt;em&gt;Monday&lt;/em&gt;. But even then, is only correct to exclude the patients entirely if the relevant control incidences are also reduced – it is unclear whether this trend correction&amp;nbsp;happened.&lt;/p&gt;
&lt;h3&gt;Sandhu et al.&amp;nbsp;(2014)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Data&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Time: 1 January 2010 – 15 September 2013 (3 fall and 4 spring &lt;span class="caps"&gt;DST&lt;/span&gt; changes; 1354&amp;nbsp;days)&lt;/li&gt;
&lt;li&gt;Procedural data for hospital admissions where &lt;span class="caps"&gt;PCI&lt;/span&gt; was performed in the setting of &lt;span class="caps"&gt;AMI&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Number of cases: 42,060 hospital admissions for &lt;span class="caps"&gt;AMI&lt;/span&gt; requiring &lt;span class="caps"&gt;PCI&lt;/span&gt; occurred during the study&amp;nbsp;period.&lt;/li&gt;
&lt;li&gt;The median daily &lt;span class="caps"&gt;AMI&lt;/span&gt; total was 31, ranging from a minimum of 14 to a maximum of 53&amp;nbsp;admissions.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Results&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There was no difference in the total weekly number of PCIs performed for &lt;span class="caps"&gt;AMI&lt;/span&gt; for either the fall or spring time changes in the time period analysed. After adjustment for trend and seasonal effects, the Monday following spring time changes was associated with a 24% increase in daily &lt;span class="caps"&gt;AMI&lt;/span&gt; counts (p=0.011), and the Tuesday following fall changes was conversely associated with a 21% reduction (p=0.044). No other weekdays in the weeks following &lt;span class="caps"&gt;DST&lt;/span&gt; changes demonstrated significant&amp;nbsp;associations.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Analysis&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;I was unable to obtain the data at &lt;a href="https://bmc2.org"&gt;Blue Cross Blue Shield of Michigan&lt;/a&gt; and the study did not include the number of &lt;span class="caps"&gt;AMI&lt;/span&gt; cases numerically, therefore I estimated it from the chart in Figure 3 (which was accurate to 0.4 &lt;span class="caps"&gt;AMI&lt;/span&gt;).&lt;/p&gt;
&lt;h3&gt;Kirchberger et al.&amp;nbsp;(2015)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Data&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;AMI&lt;/span&gt; count: 25,499 cases of &lt;span class="caps"&gt;AMI&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;data source: &lt;span class="caps"&gt;MONICA&lt;/span&gt;/&lt;span class="caps"&gt;KORA&lt;/span&gt; Myocardial Infarction Registry (&lt;a href="https://www.helmholtz-muenchen.de/herzschlag-info/"&gt;link&lt;/a&gt;; public data should be published yearly according to &lt;a href="http://www.gbe-bund.de/gbe10/abrechnung.prc_abr_test_logon?p_uid=gast&amp;amp;p_aid=0&amp;amp;p_knoten=FID&amp;amp;p_sprache=E&amp;amp;p_suchstring=7014"&gt;this website&lt;/a&gt;, but I did not find a link to download the&amp;nbsp;dataset)&lt;/li&gt;
&lt;li&gt;time period: 1 January 1985 and 31 October 2010 (26 spring and 25 fall &lt;span class="caps"&gt;DST&lt;/span&gt; changes – 2010 fall adjustment was on 31&amp;nbsp;October)&lt;/li&gt;
&lt;li&gt;ages:&amp;nbsp;25–74&lt;/li&gt;
&lt;li&gt;includes: coronary death and &lt;span class="caps"&gt;AMI&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;location: city of Augsburg (Germany) and the two adjacent counties (about 600,000&amp;nbsp;inhabitants)&lt;/li&gt;
&lt;li&gt;additional variables: information on re-infarction, various medication prior to &lt;span class="caps"&gt;AMI&lt;/span&gt;, current occupation, history of hypertension, hyperlipidemia, diabetes, smoking, and&amp;nbsp;obesity.&lt;/li&gt;
&lt;li&gt;confounders accounted for: global time trend, temperature, relative humidity, barometric pressure, and indicators for month of the year, weekday and&amp;nbsp;holiday&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Quotes&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The final model included the following covariates: time trend and previous two day mean relative humidity as regression splines with four and two degrees of freedom, respectively, previous two day mean temperature as a linear term and day of the week as categorical&amp;nbsp;variable.&lt;/p&gt;
&lt;p&gt;The optimized spring model [of the data from March and April, excluding the week in question] included time trend and same day mean relative humidity as regression splines with six and three degrees of&amp;nbsp;freedom.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Six d.o.f. for 2 months is probably overfitting the data, even though it was the sum of 26 years. However, it shouldn’t make a predictible effect, and its overall effect is probably&amp;nbsp;negligible.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The incidence rate ratio was assessed as observed over expected events per day and the mean per weekday and corresponding 95% confidence intervals were&amp;nbsp;calculated.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;However, it is not stated how the confidence intervals were calculated: most importantly, which statistical test was&amp;nbsp;used?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Analysis&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;The paper stated only the calculated RRs for the spring and autumn prediction models (for all seven days), not the actual &lt;span class="caps"&gt;AMI&lt;/span&gt; counts.
Assuming the researchers analyzed the data in an honest manner (i.e. not picking model parameters for lower trend prediction and thus more significant observed increase), and that the model didn&amp;#8217;t predict large deviations from the 2.7 &lt;span class="caps"&gt;AMI&lt;/span&gt;/day average, we can calculate a close approximation of the observations as &lt;script type="math/tex"&gt;\mathrm{RR}_d \cdot \mathrm{trend}&lt;/script&gt;.&lt;/p&gt;
&lt;h3&gt;Sipilä et al.&amp;nbsp;(2016)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Data&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;years: 2001–2009, except 2002 and 2005 (due to Easter). 7&amp;nbsp;years.&lt;/li&gt;
&lt;li&gt;Exclusion criterion: age &amp;lt;&amp;nbsp;18.&lt;/li&gt;
&lt;li&gt;Age: mean age 71.2, &lt;span class="caps"&gt;SD&lt;/span&gt; 12.6&amp;nbsp;years&lt;/li&gt;
&lt;li&gt;2 weeks prior and 3 weeks after &lt;span class="caps"&gt;DST&lt;/span&gt;&amp;nbsp;transition&lt;/li&gt;
&lt;li&gt;all 22 Finnish hospitals with coronary catheterization laboratory that treat emergency cardiac&amp;nbsp;patients&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;database: Finnish Care Register for Health Care (&lt;span class="caps"&gt;CRHC&lt;/span&gt;), a nationwide, obligatory and automatically collected hospital discharge&amp;nbsp;database.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Study group: posttransitional&amp;nbsp;week&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;Control group: 2 weeks before/after posttransitional&amp;nbsp;week&lt;/li&gt;
&lt;li&gt;Easter in study group: 2002, 2005. “Years with &lt;span class="caps"&gt;DST&lt;/span&gt; spring transition on Easter Sunday were excluded from the analysis (2002 and 2005) to increase international comparability and avoid&amp;nbsp;confounding”&lt;/li&gt;
&lt;li&gt;Easter in control group: “When Easter Sunday was celebrated within 2 weeks after &lt;span class="caps"&gt;DST&lt;/span&gt; transition, post-&lt;span class="caps"&gt;DST&lt;/span&gt; control weeks after Easter were&amp;nbsp;selected.”&lt;/li&gt;
&lt;li&gt;Spring study+control group size: 1269+5029 =&amp;nbsp;6298&lt;/li&gt;
&lt;li&gt;Standardized incidence of &lt;span class="caps"&gt;MI&lt;/span&gt; admissions in participating hospitals during spring study period was 259/100,000&amp;nbsp;person-years.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Quotes&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Incidence of &lt;span class="caps"&gt;MI&lt;/span&gt; admissions was similar to control
weeks for Sunday–Tuesday after &lt;span class="caps"&gt;DST&lt;/span&gt; transition
(Figure 1). However, on fourth day after transition
(Wednesday), there was a significant increase in &lt;span class="caps"&gt;MI&lt;/span&gt;
incidence compared to control weeks (&lt;span class="caps"&gt;IR&lt;/span&gt; 1.16; &lt;span class="caps"&gt;CI&lt;/span&gt; 1.01–&amp;nbsp;1.34).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Is there anything special about the &lt;em&gt;Wednesday&lt;/em&gt; that follows a &lt;span class="caps"&gt;DST&lt;/span&gt; transition? One should not be surprised if a value falls outside of a 95% confidence/credible interval – after all, it happens &lt;em&gt;at least&lt;/em&gt; 5% of the time even in the absence of any &amp;#8220;interesting&amp;#8221;&amp;nbsp;effect.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Patients admitted
during the week after &lt;span class="caps"&gt;DST&lt;/span&gt; transition were less likely to
have diagnosed diabetes or ventricular arrhythmias
compared to patients admitted during control weeks,
but had diagnosed renal failure more&amp;nbsp;often.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There is no simple and plausible explanation for this, therefore it is more probable that this is a result of finding patterns in&amp;nbsp;noise.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Population-based incidence
of &lt;span class="caps"&gt;MI&lt;/span&gt; admissions to participating hospitals during
spring and autumn periods were calculated using
corresponding population data of mainland Finland
obtained from Statistics Finland and standardized to
European standard population 2013 by using the direct&amp;nbsp;method.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The meaning of the above statement is&amp;nbsp;unclear.&lt;/p&gt;
&lt;h2&gt;Footnotes&lt;/h2&gt;
&lt;h4&gt;Footnote&amp;nbsp;1&lt;/h4&gt;
&lt;p&gt;“Sleep researchers show a 20% increase in risk of heart attacks in Michigan but a 10% decrease in Finland, so it is advised to travel to Europe for this&amp;nbsp;week.”&lt;/p&gt;
&lt;p&gt;&lt;a href="#fn-src-misinterpret"&gt;[back to source]&lt;/a&gt;&amp;nbsp;↑&lt;/p&gt;
&lt;h4&gt;Footnote&amp;nbsp;2&lt;/h4&gt;
&lt;p&gt;Originally, I wrote the&amp;nbsp;following:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Further research could analyze the publication bias (if you know how to do that in a Bayesian framework, please mention it in the comments below), or analyze more data, preferably from multiple countries. Maybe the &lt;span class="caps"&gt;DST&lt;/span&gt; transition has a smaller effect on the Finnish population than on the Swedish population, which could easily be analyzed using Bayesian&amp;nbsp;statistics.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But then I calculated the absolute global effect, which is quite small, therefore the updated&amp;nbsp;recommendation.&lt;/p&gt;
&lt;p&gt;&lt;a href="#fn-src-further"&gt;[back to source]&lt;/a&gt;&amp;nbsp;↑&lt;/p&gt;</content><category term="statistics"></category></entry><entry><title>Trust in numbers — notes of a talk given by Sir David Spiegelhalter</title><link href="https://www.treszkai.com/2019/10/08/trust-in-numbers/" rel="alternate"></link><published>2019-10-08T00:00:00+02:00</published><updated>2019-10-08T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2019-10-08:/2019/10/08/trust-in-numbers/</id><summary type="html">&lt;p&gt;Summary of a keynote talk given by Sir David Spiegelhalter about the reporting of medical&amp;nbsp;results.&lt;/p&gt;</summary><content type="html">&lt;p&gt;The Institute of Medical Statistics of the Center for Medical Statistics, Informatics and Intelligent Systems at the Medical University of Vienna &lt;a href="https://cemsiis.meduniwien.ac.at/50years-of-ms/"&gt;just turned 50 years old&lt;/a&gt;, and they organized a two-day event around it. I was fortunate to have attended the keynote talk of Sir David Spiegelhalter (&lt;a href="https://en.wikipedia.org/wiki/David_Spiegelhalter"&gt;wiki&lt;/a&gt;), who is a British statistician and &lt;a href="https://en.wikipedia.org/wiki/Winton_Professorship_of_the_Public_Understanding_of_Risk"&gt;Winton Professor of the Public Understanding of Risk&lt;/a&gt; at the Faculty of Mathematics, University of Cambridge, which was one of the most entertaining &lt;em&gt;and&lt;/em&gt; informative talk I have heard. There is no way I can do justice to the talk, and I wouldn’t even attempt to bring through the humor (his &lt;em&gt;humour&lt;/em&gt;) – the goal of this post is to increase your vigilance a little bit when it comes to any reports about science, and to shed light on the work of&amp;nbsp;Spiegelhalter.&lt;/p&gt;
&lt;p&gt;The professor has authored several academic books on statistics, and was interviewed by the &lt;span class="caps"&gt;CNN&lt;/span&gt; with the title, &lt;a href="https://edition.cnn.com/videos/tv/2019/04/01/amanpour-david-spiegelhalter-statistics.cnn"&gt;&lt;em&gt;Why statistics should make you suspicious&lt;/em&gt;&lt;/a&gt;. And keeps doing a huge service to science in a number of other&amp;nbsp;ways.&lt;/p&gt;
&lt;p&gt;The problem explained in the talk was that &lt;strong&gt;numbers are used to persuade people, not to inform them&lt;/strong&gt;. (Actually, that was only the first half – the second half offered a handful of steps we could take when presenting our data.) Take for example politics, and the campaign around Brexit. Even if it were true that it costs £350 million a week for the &lt;span class="caps"&gt;UK&lt;/span&gt; to be a member of the &lt;span class="caps"&gt;EU&lt;/span&gt;, it would be much less misleading if it said that it costs 80 pence &lt;em&gt;per person per day&lt;/em&gt; to be a member of the &lt;span class="caps"&gt;EU&lt;/span&gt;. The cost of a bag of potato chips. (The other side committed similar errors too – I’m not trying to win a battle&amp;nbsp;here.)&lt;/p&gt;
&lt;p&gt;&lt;img alt="We send the EU £350 million a week; let’s fund our NHS instead. Vote Leave." src="https://www.treszkai.com/2019/10/08/trust-in-numbers/nhs.png"&gt;&lt;/p&gt;
&lt;p&gt;As Eliezer Yudkowsky says, &lt;a href="https://www.lesswrong.com/posts/9weLK2AJ9JEt2Tt8f/politics-is-the-mind-killer"&gt;politics is the mind-killer&lt;/a&gt;, but of course, using numbers to mislead instead of to show an honest representation of reality is done everywhere where there are numbers. My favorite topic these days: &lt;strong&gt;medical statistics&lt;/strong&gt;. I’m picking a topic from the talk as an example (which Spiegelhalter analyzed in more detail in a &lt;a href="https://medium.com/wintoncentre/are-we-individuals-or-members-of-populations-the-deeper-issues-behind-the-sausage-wars-a067aebf2063"&gt;Medium post&lt;/a&gt;): dietary advice about processed meat consumption. &lt;span class="caps"&gt;CNN&lt;/span&gt; did a &lt;a href="https://edition.cnn.com/2019/04/17/health/colorectal-cancer-risk-red-processed-meat-study-intl/index.html"&gt;great job&lt;/a&gt; with picking the title of their article to be as close to the original conclusions as possible: &lt;em&gt;Eating just one slice of bacon a day linked to higher risk of colorectal cancer, says study&lt;/em&gt;. But by the time this study reaches The Sun, it gets reported as the&amp;nbsp;following:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Rasher of bacon a day is deadly" src="https://www.treszkai.com/2019/10/08/trust-in-numbers/bacon.jpg"&gt;.&lt;/p&gt;
&lt;p&gt;Boy, that escalated quickly. And what does “higher risk of colorectal cancer” mean anyhow? In this case, the study showed a 19% increase. As Peter Attia explains in his detailed post series on science, &lt;a href="https://peterattiamd.com/ns001/"&gt;Studying Studies&lt;/a&gt;, such big numbers generally mean an increase in &lt;em&gt;relative risk&lt;/em&gt;, not in &lt;em&gt;absolute risk&lt;/em&gt;. Relative risk is meaningless without knowing the base rate of the disease. In this case, 5% of &lt;span class="caps"&gt;US&lt;/span&gt; men and women born today are expected to be diagnosed with colorectal cancer sometime during their lives. Add 19% to that 5% figure (i.e., multiply it by 1.19), and you get 6%, for the people who eat 1 slice of bacon a day. (The 5% figure is surprisingly high, by the way! Fortunately, it has a five-year survival rate of 65%. I don’t know how much of the 5% is a false positive; I guess it doesn’t include the disconfirmed cases. These figures I just gathered from &lt;a href="https://en.wikipedia.org/wiki/Colorectal_cancer#Epidemiology"&gt;Wikipedia&lt;/a&gt;, &lt;span class="caps"&gt;FWIW&lt;/span&gt;.)&lt;/p&gt;
&lt;p&gt;You can take the extra step and visualize these numbers using what &lt;a href="https://en.wikipedia.org/wiki/Gerd_Gigerenzer"&gt;Gigerenzer&lt;/a&gt; calls natural frequencies. As one Wikipedia author puts it, “the problem is not simply in the human mind, but in the representation of the information”, so let’s deliver using things we evolved to understand: a small tribe of human-like&amp;nbsp;icons.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;All&lt;/em&gt; of these people below eat a clean diet without processed meat, and those with a distraught face will get colorectal&amp;nbsp;cancer:&lt;/p&gt;
&lt;p&gt;😎😎😎😎😎😎😫😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😫😎😎😎😎😎😎&lt;br /&gt;
😎😎😫😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😫&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;😎😎😎😎😎😎😎😫😎😎&lt;/p&gt;
&lt;p&gt;And &lt;em&gt;all&lt;/em&gt; of these people eat a slice of &lt;a href="https://en.wikipedia.org/wiki/Extrawurst"&gt;Extrawurst&lt;/a&gt;&amp;nbsp;daily:&lt;/p&gt;
&lt;p&gt;😎😎😎😎😎😎😫😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😫😎😎😎😎😎😎&lt;br /&gt;
😎😎😫😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😫&lt;br /&gt;
😎😎😎😎😎😎😎😎😎😎&lt;br /&gt;
😫😎😎😎😎😎😎😎😎😎&lt;br /&gt;😎😎😎😎😎😎😎😫😎😎&lt;/p&gt;
&lt;p&gt;See the difference? It’s that one troubled guy in row&amp;nbsp;9.&lt;/p&gt;
&lt;p&gt;Now, I’m not saying bacon is good for health, or that that additional risk factor would be negligible (admittedly, my mocking tone above suggests otherwise). But if the scientists, journalists, and clinicians report the risk honestly, &lt;em&gt;and&lt;/em&gt; no-one is trying to influence you into eating more burgers by playing at our primal instincts (including the marketing division of McDonald’s and our social group who calls you chicken if you don’t eat your &lt;a href="https://en.wikipedia.org/wiki/Black_pudding"&gt;black pudding&lt;/a&gt;), then us puny humans could make more educated decisions about which sacrifices we are willing to&amp;nbsp;make.&lt;/p&gt;
&lt;p&gt;This post was just a tiny part of what was said at the talk. In parting, I have two takeaway quotes.&amp;nbsp;First,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;80% of statistics are&amp;nbsp;false.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;(From anonymous statistician, a comedian, and also &lt;a href="https://www.youtube.com/embed/aHGd6LqAVzw?start=43"&gt;Elon Musk&lt;/a&gt;.) Unfortunately, this factoid alone doesn’t enable one to navigate&amp;nbsp;reality.&lt;/p&gt;
&lt;p&gt;The second quote is of a little more value, but still doesn’t help one to sieve through&amp;nbsp;statistics:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There’s no point in being trustworthy if you’re&amp;nbsp;boring.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;(From Spiegelhalter in today’s&amp;nbsp;talk.)&lt;/p&gt;
&lt;p&gt;This talk was anything but boring. If you have a chance to see Spiegelhalter in person, do so: he gets my highest grade recommendation. (He also has a book, titled &lt;a href="https://smile.amazon.com/Art-Statistics-How-Learn-Data/dp/1541618513"&gt;&lt;em&gt;The Art of Statistics&lt;/em&gt;&lt;/a&gt;, which I haven’t&amp;nbsp;read.)&lt;/p&gt;
&lt;p&gt;(Somewhat related: just today on my way home I learned of Edward Tufte’s book, &lt;em&gt;The Visual Display of Quantitative Information,&lt;/em&gt; which also &lt;a href="https://www.edwardtufte.com/tufte/books_vdqi"&gt;looks amazing&lt;/a&gt;.)&lt;/p&gt;</content><category term="AI"></category></entry><entry><title>On the overconfidence of modern neural networks</title><link href="https://www.treszkai.com/2019/09/26/overconfidence/" rel="alternate"></link><published>2019-09-26T00:00:00+02:00</published><updated>2019-09-26T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2019-09-26:/2019/09/26/overconfidence/</id><summary type="html">&lt;p&gt;Evaluating various methods to improve the calibration of deep neural&amp;nbsp;networks.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;On the overconfidence of modern neural networks&lt;/em&gt;. This is the title of the coursework I did with a fellow student at the University of Edinburgh. (&lt;span class="caps"&gt;PDF&lt;/span&gt;: &lt;a href="https://www.treszkai.com/2019/09/26/overconfidence/mlp-cw3.pdf"&gt;Part 1&lt;/a&gt;, &lt;a href="https://www.treszkai.com/2019/09/26/overconfidence/mlp-cw4.pdf"&gt;Part 2&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;Our topic was influenced by a previous study, titled &lt;em&gt;On Calibration of Modern Neural Networks&lt;/em&gt; &lt;!-- {% cite Guo2017-calibration %} --&gt; &lt;a class="citation" href="#Guo2017-calibration"&gt;(Guo, Pleiss, Sun, &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Weinberger, 2017)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Applications of uncertainty estimation include threshold-based outlier detection, active learning, uncertainty-driven exploration of reinforcement learning, or certain safety-critical&amp;nbsp;applications.&lt;/p&gt;
&lt;h2&gt;What is&amp;nbsp;uncertainty?&lt;/h2&gt;
&lt;p&gt;No computer vision system is perfect, so an image classification algorithm sometimes identifies people as not-people, or not-people as people.
While we usually care about the class with the highest output (the “most likely” class), we can treat the softmax outputs of a classifier as uncertainty estimates.
(After all, that is how we trained a model when treating the softmax outputs of a classifier as a probability distribution, and minimizing the negative log likelihood of the model given the data.)
For example, out of 1000 classifications made with an output of 0.8, approximately 800 should be correct &lt;em&gt;if the system is well-calibrated&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Example output of a YOLO object detection network" src="https://www.treszkai.com/2019/09/26/overconfidence/yolo.png"&gt;&lt;/p&gt;
&lt;p&gt;(Example output of a &lt;span class="caps"&gt;YOLO&lt;/span&gt; object detection network, with the probability estimates. Image source: &lt;a href="https://www.analyticsvidhya.com/blog/2018/12/practical-guide-object-detection-yolo-framewor-python/"&gt;Analytics Vidhya&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;Ideally, we want our system to be 100% correct, but we rarely have access to an all-knowing Oracle. In cases where it is hard to distinguish between two categories (like on the cat-dog below) we want the uncertainties to be well-calibrated, so that predictions are neither overly confident nor insufficiently&amp;nbsp;confident.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Image of a cat that could be mistaken for a dog" src="https://www.treszkai.com/2019/09/26/overconfidence/catdog.jpeg"&gt;&lt;/p&gt;
&lt;p&gt;(Image source: Google&amp;nbsp;Brain)&lt;/p&gt;
&lt;h2&gt;Our&amp;nbsp;results&lt;/h2&gt;
&lt;h3&gt;Interim&amp;nbsp;report&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://www.treszkai.com/2019/09/26/overconfidence/mlp-cw3.pdf"&gt;Link to report (&lt;span class="caps"&gt;PDF&lt;/span&gt;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Our initial experiments showed that our baseline model is already well-calibrated when trained on the &lt;span class="caps"&gt;EMNIST&lt;/span&gt; By-Class dataset.
Calibration worsened when we used only a subset of the training set.
We found that increasing regularization increases calibration, but too much regularization leads to a decrease in both accuracy and calibration. (See figure below.)
This contradicts the findings of &lt;!-- {% cite Guo2017-calibration -L section -l 3 %} --&gt; &lt;a class="citation" href="#Guo2017-calibration"&gt;(Guo, Pleiss, Sun, &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Weinberger, 2017, sec. 3)&lt;/a&gt;, who found that model calibration can improve by increasing the weight decay constant, well after the model achieves minimum classification accuracy.
One of our main findings is that cross-entropy error is not a good indicator of model&amp;nbsp;calibration.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Figure 5 of our interim report." src="https://www.treszkai.com/2019/09/26/overconfidence/mlp-cw3-fig5.png"&gt;&lt;/p&gt;
&lt;p&gt;(&lt;span class="caps"&gt;ECE&lt;/span&gt;: expected calibration error. The lower the&amp;nbsp;better.)&lt;/p&gt;
&lt;h3&gt;Final&amp;nbsp;report&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://www.treszkai.com/2019/09/26/overconfidence/mlp-cw4.pdf"&gt;Link to report (&lt;span class="caps"&gt;PDF&lt;/span&gt;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We replicate the findings of &lt;!-- {% cite Guo2017-calibration %} --&gt; &lt;a class="citation" href="#Guo2017-calibration"&gt;(Guo, Pleiss, Sun, &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Weinberger, 2017)&lt;/a&gt;£ that deep neural networks achieve higher accuracy but worse calibration than shallow nets, and compare different approaches for improving the calibration of neural networks (see figure below). As the baseline approach, we consider the calibration of the softmax outputs from a single network; this is compared to &lt;em&gt;deep ensembles&lt;/em&gt;, &lt;em&gt;&lt;span class="caps"&gt;MC&lt;/span&gt; dropout&lt;/em&gt;, and &lt;em&gt;concrete dropout&lt;/em&gt;. Through experiments on the &lt;span class="caps"&gt;CIFAR&lt;/span&gt;-100 data set, we find that a large neural network can be significantly over-confident about its predictions. We show on a classification problem that an ensemble of deep networks has better classification accuracy and calibration compared to a single network, and that &lt;span class="caps"&gt;MC&lt;/span&gt; dropout and concrete dropout significantly improve the calibration of a large&amp;nbsp;network.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Confidence and calibration plots for BigNet. (Figure 2 of our report)" src="https://www.treszkai.com/2019/09/26/overconfidence/mlp-cw4-fig2.png"&gt;&lt;/p&gt;
&lt;p&gt;(&lt;em&gt;Top row:&lt;/em&gt; confidence plots for a deep neural net. The more skewed to the right, the better. &lt;em&gt;Bottom row:&lt;/em&gt; corresponding calibration plots. The more close to the diagonal, the&amp;nbsp;better.)&lt;/p&gt;
&lt;h2&gt;Things I would do&amp;nbsp;differently&lt;/h2&gt;
&lt;p&gt;With a little more experience behind my back now, I would make the following changes in experiment design and writing the&amp;nbsp;report:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Use a validation set.&lt;/em&gt; We only used a training set because we trained for minimum error, and we expected &lt;em&gt;calibration&lt;/em&gt; to be independent from &lt;em&gt;accuracy&lt;/em&gt;, but that is a strong assumption (and likely incorrect, seeing our results in the interim&amp;nbsp;report).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Use better biblography sources.&lt;/em&gt; Instead of Google Scholar, I would search &lt;a href="https://dblp.uni-trier.de/"&gt;&lt;span class="caps"&gt;DBLP&lt;/span&gt;&lt;/a&gt;, where the information is more correct and&amp;nbsp;consistent.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Use pastel colors.&lt;/em&gt; I let my collaborator have it his way, but ever since this submission I’m having nightmares in purple and glowing green&amp;nbsp;:D&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In future work, I would like to test the calibration of a Bayesian neural network, where the weights of the network have a probability distribution instead of a point&amp;nbsp;estimate.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;!&amp;#8212; {% bibliography &amp;#8212;cited %} &amp;#8212;&gt;

&lt;ol class="bibliography"&gt;&lt;li&gt;&lt;span id="Guo2017-calibration"&gt;Guo, C., Pleiss, G., Sun, Y., &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Weinberger, &lt;span class="caps"&gt;K. Q.&lt;/span&gt;(2017). On Calibration of Modern Neural Networks. In D. Precup &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; &lt;span class="caps"&gt;Y. W.&lt;/span&gt; Teh (Eds.), &lt;i&gt;Proceedings of the 34th International Conference on Machine Learning&lt;/i&gt; (Vol. 70, pp. 1321–1330). International Convention Centre, Sydney, Australia: &lt;span class="caps"&gt;PMLR&lt;/span&gt;. Retrieved from&amp;nbsp;http://proceedings.mlr.press/v70/guo17a.html&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="AI"></category></entry><entry><title>Paper summary: Abbeel, Ng: Inverse Reinforcement Learning (2004)</title><link href="https://www.treszkai.com/2019/08/19/irl-summary/" rel="alternate"></link><published>2019-08-19T00:00:00+02:00</published><updated>2019-08-19T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2019-08-19:/2019/08/19/irl-summary/</id><summary type="html">&lt;p&gt;Summary of the seminal paper on inverse reinforcement&amp;nbsp;learning.&lt;/p&gt;</summary><content type="html">&lt;p&gt;This post is a summary of the seminal paper on inverse reinforcement learning: Pieter Abbeel, Andrew Y. Ng: &lt;em&gt;Apprenticeship Learning via Inverse Reinforcement Learning&lt;/em&gt; (2004) [&lt;a href="http://ai.stanford.edu/~pabbeel/irl/"&gt;link&lt;/a&gt;].&lt;/p&gt;
&lt;p&gt;Traditional &lt;a href="http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html"&gt;reinforcement learning&lt;/a&gt; (&lt;span class="caps"&gt;RL&lt;/span&gt;) starts with specifying a reward function, and during training we search for policies that maximize this reward function&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;. In contrast, inverse reinforcement learning (&lt;span class="caps"&gt;IRL&lt;/span&gt;) starts with expert demonstrations of the desired behavior, infers a reward function that the expert likely followed, and trains a policy to maximize&amp;nbsp;that.&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;&lt;span class="caps"&gt;IRL&lt;/span&gt; is useful for learning complex tasks where it is hard to manually specify a reward function that makes desirable trade-offs between desiderata; such tasks include driving a car or teaching a robot to do a backflip, where we want the car to reach to the destination promptly but also safely, or the robot to flip with its arms straight and &lt;a href="https://youtu.be/xet3KDUfS_U?t=50"&gt;sticking the landing&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In contrast with previous attempts at apprenticeship learning (i.e. learning from an expert), which tried to mimic the expert demonstrations directly, &lt;span class="caps"&gt;IRL&lt;/span&gt; assumes that the expert follows a reward function that is a linear combination of the feature vectors (&lt;script type="math/tex"&gt;R = w^T φ(s)&lt;/script&gt;), and finds a reward function that maximizes the received reward under the set of demonstrations. The hand-specified function &lt;script type="math/tex"&gt;φ: S→ℝ^k&lt;/script&gt; maps a state of the Markov decision process (&lt;span class="caps"&gt;MDP&lt;/span&gt;) to a feature vector, which vector includes parameters for the different desiderata of the task, such as the distances to objects surrounding the car, the speed of the car, or the current&amp;nbsp;lane.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;IRL&lt;/span&gt; assumes knowledge of an expert policy &lt;script type="math/tex"&gt;π_E&lt;/script&gt;, or at least samples from it. Using these, we only care about the estimated &amp;#8220;accumulated feature values&amp;#8221;, &lt;script type="math/tex"&gt;μ(π_E) ∈ ℝ^k&lt;/script&gt;, which is the expected discounted sum of the feature vectors if sampled from the policy, because then the value of a policy (parametrised by &lt;script type="math/tex"&gt;w&lt;/script&gt;) can be calculated from it directly: &lt;script type="math/tex"&gt;R = w^T μ(π_E)&lt;/script&gt;.&lt;/p&gt;
&lt;p&gt;The goal is then to find a policy whose performance is close to that of the expert&amp;#8217;s on the unknown reward function &lt;script type="math/tex"&gt;R_{\star} = w^T_{\star} φ&lt;/script&gt;. This is done by finding a policy whose feature vector is close to the expert&amp;#8217;s feature vector, which assures that the value of these policies is close&amp;nbsp;too.&lt;/p&gt;
&lt;p&gt;The algorithm for &lt;span class="caps"&gt;IRL&lt;/span&gt; is the&amp;nbsp;following:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Pick a random initial policy, and calculate its &lt;script type="math/tex"&gt;μ&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;Find the vector of weights w that lies within the unit ball and &lt;em&gt;maximizes&lt;/em&gt; the difference between the expert feature expectations and the feature expectations of our best policy thus&amp;nbsp;far.&lt;/li&gt;
&lt;li&gt;If this maximum is small, then go to step&amp;nbsp;7.&lt;/li&gt;
&lt;li&gt;Otherwise &lt;script type="math/tex"&gt;w&lt;/script&gt; is our new weights for &lt;script type="math/tex"&gt;R&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;Calculate optimal policy for this &lt;script type="math/tex"&gt;R&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;Repeat from step&amp;nbsp;2.&lt;/li&gt;
&lt;li&gt;Let the agent designer pick a policy from any of those found in step 5 in the different iterations; or find the policy in the convex closure of these policies that is closest to the expert&amp;nbsp;policy.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The maximization in step 2 allows us to find a policy that is close to the expert&amp;#8217;s, regardless of the choice of a reward function. After all, we are interested in the policy, not the reward function, and so the estimated &lt;script type="math/tex"&gt;R&lt;/script&gt; is not necessarily&amp;nbsp;correct.&lt;/p&gt;
&lt;p&gt;This algorithm is proved to terminate within &lt;script type="math/tex"&gt;O(k \log(k))&lt;/script&gt; steps, using at least &lt;script type="math/tex"&gt;O(k \log(k))&lt;/script&gt; number of samples from the expert&amp;nbsp;policy.&lt;/p&gt;
&lt;p&gt;Experiments are done in a gridworld environment, where &lt;span class="caps"&gt;IRL&lt;/span&gt; learns the expert policy in approximately 100 times less sample trajectories than simply mimicking the expert. Another experiment is a car driving simulator with 3 lanes viewed from the top, where &lt;span class="caps"&gt;IRL&lt;/span&gt; is capable of learning multiple driving styles, such as &amp;#8220;prefer the right lane but avoid collisions&amp;#8221;. Video demonstrations of the latter show that the sentiment of the expert policy is indeed followed, although sometimes with unnecessary lane switches (most modern &lt;span class="caps"&gt;RL&lt;/span&gt; algorithms also exhibit this undesired&amp;nbsp;property).&lt;/p&gt;
&lt;h4&gt;Footnotes&lt;/h4&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Or, more accurately, a policy that maximizes the expected utility derived from this reward function and some method of temporal discounting.&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="AI"></category></entry><entry><title>Sampling from the posterior with Markov-chain Monte Carlo</title><link href="https://www.treszkai.com/2019/08/06/mcmc/" rel="alternate"></link><published>2019-08-06T00:00:00+02:00</published><updated>2019-08-06T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2019-08-06:/2019/08/06/mcmc/</id><summary type="html">&lt;p&gt;Description of the sampling algorithm of Metropolis et al. in 500&amp;nbsp;words.&lt;/p&gt;</summary><content type="html">&lt;p&gt;John K. Kruschke&amp;#8217;s book, titled &lt;em&gt;Doing Bayesian Data Analysis: A Tutorial with R, &lt;span class="caps"&gt;JAGS&lt;/span&gt;, and Stan (2nd ed.)&lt;/em&gt; (&lt;a href="https://www.amazon.com/Doing-Bayesian-Data-Analysis-Tutorial/dp/0124058884"&gt;Amazon&lt;/a&gt;, &lt;a href="https://www.indiana.edu/~kruschke/DoingBayesianDataAnalysis/"&gt;official site&lt;/a&gt;), gives a very quick and practical introduction to Bayesian analysis. Compared to &lt;span class="caps"&gt;BDA3&lt;/span&gt;, it contains less proofs, but also less jargon; more explanations that are informal, and more introductions to the basics. As such, I would recommend it to someone who hasn&amp;#8217;t had much of an exposure to statistics yet, or is not a mathematician nor a&amp;nbsp;programmer.&lt;/p&gt;
&lt;p&gt;The book includes thorough and nicely visualized descriptions of multiple Markov-chain Monte Carlo methods for sampling from a posterior distribution, of which I&amp;#8217;ll try to summarize the most basic one in this&amp;nbsp;post.&lt;/p&gt;
&lt;h2&gt;Goal of&amp;nbsp;sampling&lt;/h2&gt;
&lt;p&gt;Given the prior &lt;script type="math/tex"&gt;p(θ)&lt;/script&gt; and the likelihood &lt;script type="math/tex"&gt;p(\D\given θ)&lt;/script&gt;, we want samples from the posterior &lt;script type="math/tex"&gt;p(θ\given \D)&lt;/script&gt;. In the following sections I&amp;#8217;ll use the fact that the unnormalized posterior is equal to the prior multiplied with the likelihood: &lt;script type="math/tex"&gt;p(θ, \D) = p(θ)\,p(\D \given θ)&lt;/script&gt;. Here, I&amp;#8217;ll talk only about continuous probability spaces; discrete spaces can be sampled&amp;nbsp;similarly.&lt;/p&gt;
&lt;h2&gt;Metropolis&amp;nbsp;algorithm&lt;/h2&gt;
&lt;p&gt;Just like the other &lt;span class="caps"&gt;MC&lt;/span&gt; methods, the Metropolis algorithm starts with a seed value for &lt;script type="math/tex"&gt;θ&lt;/script&gt; – let&amp;#8217;s call it &lt;script type="math/tex"&gt;θ_0&lt;/script&gt;. (I assume in practice &lt;script type="math/tex"&gt;θ_0&lt;/script&gt; is sampled from the prior.) Then, once you have a seed value &lt;script type="math/tex"&gt;θ_i&lt;/script&gt;, repeat the following two steps for a prespecified number of iterations, or until an effective sample size is&amp;nbsp;achieved.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Sample &lt;script type="math/tex"&gt;θ'_{i+1}&lt;/script&gt; from a proposal distribution around &lt;script type="math/tex"&gt;\theta_i&lt;/script&gt;, which could be a Gaussian: &lt;script type="math/tex"&gt;\theta'_{i+1} \sim \N (θ_i, Σ)&lt;/script&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If &lt;script type="math/tex"&gt;p(θ_{i},\D) \le p(θ'_{i+1},\D)&lt;/script&gt; – i.e. if &lt;script type="math/tex"&gt;p(θ_{i} \given \D) \le p(θ'_{i+1} \given \D)&lt;/script&gt; – then &lt;em&gt;accept&lt;/em&gt; the proposed parameter value: &lt;script type="math/tex"&gt;θ_{i+1} := θ'_{i+1}&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;Otherwise, the probability of accepting the proposed parameter is the ratio of the posterior at the proposed value and at the current value; otherwise, reject&amp;nbsp;it:&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\begin{gathered}
p = \frac{p(θ'_{i+1}, \D)}{p(θ_{i}, \D)} = \frac{p(θ'_{i+1} \given \D)}{p(θ_{i} \given \D)}, \\
b \sim Bernoulli(p), \\
θ_{i+1} =
\begin{cases}
    θ_{i+1}' &amp; \text{if } b=1,\\
    θ_i &amp; \text{if } b=0.
\end{cases}
\end{gathered} %]]&gt;&lt;/script&gt;
&lt;p&gt;It can be proven that after a so-called “burn-in” period, the probability of any &lt;script type="math/tex"&gt;θ_{n}&lt;/script&gt; value will be the posterior probability: &lt;script type="math/tex"&gt;θ_n \sim p(\theta_n\given \D)&lt;/script&gt; if &lt;script type="math/tex"&gt;n \gg 1&lt;/script&gt;, therefore if you do the procedure long enough, you&amp;#8217;ll end up with many samples from the posterior. Note that the &lt;em&gt;effective sample size&lt;/em&gt; will be much lower than &lt;script type="math/tex"&gt;N&lt;/script&gt;, because neighboring samples are strongly correlated, so we have to drop most of the &lt;script type="math/tex"&gt;θ_i&lt;/script&gt; values so&amp;nbsp;obtained.&lt;/p&gt;
&lt;p&gt;The beauty of this algorithm is that during this whole procedure, we only need to be able to compute the &lt;em&gt;unnormalized posterior&lt;/em&gt; – so the algorithm can be easily used for sampling using the prior and the likelihood, even when the model is specified up to a multiplicative constant (as in an undirected graphical&amp;nbsp;model).&lt;/p&gt;
&lt;p&gt;This algorithm doesn&amp;#8217;t easily escape a “probability island” – i.e. a region that is surrounded with a wide region of probability 0. (Although if the proposal distribution is wide enough, then the algorithm is theoretically able to make that jump &lt;em&gt;eventually&lt;/em&gt;, which maybe in practice “approximately&amp;nbsp;never”.)&lt;/p&gt;
&lt;p&gt;One downside of this basic algorithm is that the proposal distribution needs to be fine-tuned for the individual application: differences in effective sample size can be orders of magnitudes, even for a simple &lt;script type="math/tex"&gt;\text{Beta}(14,20)&lt;/script&gt; distribution (i.e. a 1-dimensional unimodal distribution with finite&amp;nbsp;support).&lt;/p&gt;
&lt;p&gt;Another downside is that in multiple dimensions this random walk is quite inefficient, and &lt;em&gt;even more&lt;/em&gt; dependent on a correct choice of the covariance matrix &lt;script type="math/tex"&gt;Σ&lt;/script&gt; – but apart from the obvious reason that “high-dimensional spaces are big”, I couldn&amp;#8217;t tell&amp;nbsp;why.&lt;/p&gt;
&lt;p&gt;The well-known Metropolis–Hastings algorithm, Gibbs sampling and Hamiltonian Monte Carlo are different twists on this core idea, and they are also described in the&amp;nbsp;book.&lt;/p&gt;
&lt;p&gt;Allegedly, credit for this method is due more to Marshall and Arianna Rosenbluth – if there is agreement on that, we could rename it to Rosenbluthsian Monte&amp;nbsp;Carlo.&lt;/p&gt;
&lt;h2&gt;For more&amp;nbsp;information&amp;#8230;&lt;/h2&gt;
&lt;p&gt;If you want to learn about sampling, or Bayesian data analysis, consider reading &lt;a href="https://www.amazon.com/Doing-Bayesian-Data-Analysis-Tutorial/dp/0124058884"&gt;the book&lt;/a&gt;, it’s a great read from what I&amp;#8217;ve read so&amp;nbsp;far.&lt;/p&gt;
&lt;p&gt;Stay tuned for more of Bayes, or Curry, or Euler, or&amp;nbsp;McCarthy.&lt;/p&gt;</content><category term="statistics"></category><category term="statistics"></category><category term="Bayes"></category><category term="sampling"></category></entry><entry><title>Bayesian inference: Approaching certainty through sampling</title><link href="https://www.treszkai.com/2019/07/24/approaching-certainty/" rel="alternate"></link><published>2019-07-24T00:00:00+02:00</published><updated>2019-07-24T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2019-07-24:/2019/07/24/approaching-certainty/</id><summary type="html">&lt;p&gt;Analysis of a slightly incorrect statement from &lt;span class="caps"&gt;BDA3&lt;/span&gt;: if all of the 1000 draws from Bernoulli(p) are 1, what are likely values of&amp;nbsp;p?&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;Bayesian Data Analysis&lt;/em&gt; from Gelman et al. (2013), in section 3.7, presents the statistical analysis of a bioassay experiment. The parameters of the model are &lt;script type="math/tex"&gt;(\alpha, \beta)&lt;/script&gt;, and we draw samples from the numerically calculated posterior. Then the authors&amp;nbsp;write:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;All of the 1000 simulation draws had positive values of &lt;script type="math/tex"&gt;\beta&lt;/script&gt;, so the posterior probability that &lt;script type="math/tex"&gt;\beta &gt; 0&lt;/script&gt; is roughly estimated to exceed&amp;nbsp;0.999.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I thought this 0.999 figure is an overestimate; I analyze this question in this&amp;nbsp;post.&lt;/p&gt;
&lt;!--more--&gt;

&lt;h2&gt;Analysis&lt;/h2&gt;
&lt;p&gt;The event “&lt;script type="math/tex"&gt;\beta &gt; 0&lt;/script&gt;” is a Bernoulli-distributed random variable; let&amp;#8217;s denote it with &lt;script type="math/tex"&gt;x \sim \text{Bernoulli}(\theta)&lt;/script&gt;. If we draw &lt;script type="math/tex"&gt;S&lt;/script&gt; samples from &lt;script type="math/tex"&gt;x&lt;/script&gt; (and denote the results with &lt;script type="math/tex"&gt;x_i&lt;/script&gt;), the conditional probability distribution of &lt;script type="math/tex"&gt;p(\theta \given \{x_i\})&lt;/script&gt; is described by the following directed graphical&amp;nbsp;model:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Bayes net for x_i and theta" src="https://www.treszkai.com/2019/07/24/approaching-certainty/dgm-theta.svg"&gt;&lt;/p&gt;
&lt;p&gt;The node for &lt;script type="math/tex"&gt;x_i&lt;/script&gt; is filled because it&amp;#8217;s observed, and the plate represents &lt;script type="math/tex"&gt;S&lt;/script&gt; copies of this node (with &lt;script type="math/tex"&gt;i&lt;/script&gt; ranging from &lt;script type="math/tex"&gt;1&lt;/script&gt; to &lt;script type="math/tex"&gt;S&lt;/script&gt;).&lt;/p&gt;
&lt;p&gt;If &lt;script type="math/tex"&gt;n_1&lt;/script&gt; (resp. &lt;script type="math/tex"&gt;n_0&lt;/script&gt;) denote the number of samples where &lt;script type="math/tex"&gt;x_i&lt;/script&gt; is true (resp. false), the likelihood is described&amp;nbsp;by:&lt;/p&gt;
&lt;p&gt;[p({x_i} \given \theta) = \text{Binomial}(n_1 \given n = S, p =&amp;nbsp;\theta).]&lt;/p&gt;
&lt;p&gt;We can assume a noninformative uniform prior on the probability &lt;script type="math/tex"&gt;\theta&lt;/script&gt; on the unit interval. A Beta prior is conjugate to the Bernoulli likelihood, and &lt;script type="math/tex"&gt;p(\theta) = \text{Beta}(\theta \given \alpha_0 = 1, \beta_0 = 1) = \text{Uniform}(\theta \given a = 0, b = 1)&lt;/script&gt;, and this results in the following&amp;nbsp;posterior:&lt;/p&gt;
&lt;p&gt;[p(\theta \given {x_i}) = \text{Beta}(\theta \given \alpha_0 + n_0, \beta_0 +&amp;nbsp;n_1).]&lt;/p&gt;
&lt;p&gt;With &lt;script type="math/tex"&gt;n_1 = 1000&lt;/script&gt; and &lt;script type="math/tex"&gt;n_0 = 0&lt;/script&gt;, this amounts to a &lt;script type="math/tex"&gt;\text{Beta}(1001, 1)&lt;/script&gt; distribution, whose &lt;a href="https://en.wikipedia.org/wiki/Beta_distribution#Probability_density_function"&gt;pdf&lt;/a&gt; is as&amp;nbsp;such:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Pdf of Beta(1001,1)" src="https://www.treszkai.com/2019/07/24/approaching-certainty/beta-1000-pdf-big.svg"&gt;&lt;/p&gt;
&lt;p&gt;As expected, most of the probability mass is close to 1.0. But that graph is not very legible, so let&amp;#8217;s zoom in on the right end of the &lt;em&gt;x&lt;/em&gt;&amp;nbsp;axis:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Pdf of Beta(1001,1) in [.99,1.0] interval" src="https://www.treszkai.com/2019/07/24/approaching-certainty/beta-1000-pdf-zoomed.svg"&gt;&lt;/p&gt;
&lt;p&gt;The red line marks the mean of the distribution, which is approximately &lt;script type="math/tex"&gt;0.999&lt;/script&gt;, but not nearly all of the probability mass is on the right side of &lt;script type="math/tex"&gt;0.999&lt;/script&gt;. Using the &lt;a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function"&gt;cdf&lt;/a&gt; of the posterior, we have&amp;nbsp;that&lt;/p&gt;
&lt;p&gt;[P(\theta &amp;gt; 0.999) =&amp;nbsp;0.63,]&lt;/p&gt;
&lt;p&gt;meaning there&amp;#8217;s still a 1 in 3 chance that the posterior probability that &lt;script type="math/tex"&gt;\beta &gt; 0&lt;/script&gt; does &lt;em&gt;not&lt;/em&gt; exceed &lt;script type="math/tex"&gt;0.999&lt;/script&gt;. To be fair, &lt;strong&gt;&lt;script type="math/tex"&gt;0.999&lt;/script&gt; is still good for a “rough estimate”&lt;/strong&gt;, unless one has a strong prior for &lt;script type="math/tex"&gt;\beta &lt; 0&lt;/script&gt;. (Given the nature of the experiment and the meaning of the parameter &lt;script type="math/tex"&gt;\beta&lt;/script&gt; &amp;#8212; the toxicity of a compound &amp;#8212;, a flat prior on “&lt;script type="math/tex"&gt;\beta &gt; 0&lt;/script&gt;” is&amp;nbsp;reasonable.)&lt;/p&gt;
&lt;h3&gt;Presidential&amp;nbsp;elections&lt;/h3&gt;
&lt;p&gt;A similar statement was made for 1988 pre-election polls, on page&amp;nbsp;70:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;All of the 1000 simulations &lt;script type="math/tex"&gt;\theta_1 &gt; \theta_2&lt;/script&gt;; thus, the estimated posterior probability that Bush had more support than Dukakis in the survey population is over&amp;nbsp;99.9%.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When a presidential election is won “by a landslide”, that rarely means more than a 60-40% results; so in this case, I would rather use a prior that puts more mass on results close to 50-50%, for example &lt;script type="math/tex"&gt;\text{Beta}(10,10)&lt;/script&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Pdf of Beta(10,10)" src="https://www.treszkai.com/2019/07/24/approaching-certainty/beta-10-pdf.svg"&gt;&lt;/p&gt;
&lt;p&gt;This results in the following&amp;nbsp;posterior:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Pdf of Beta(1010,10)" src="https://www.treszkai.com/2019/07/24/approaching-certainty/beta-1010-pdf.svg"&gt;&lt;/p&gt;
&lt;p&gt;So in this case, the crude estimate does does not suffice, and we should rather be only 98% certain. (This is a 20-fold difference, &lt;script type="math/tex"&gt;(1-.98)/(1-0.999)&lt;/script&gt;, and a well-calibrated &lt;a href="https://goodjudgment.com/philip-tetlocks-10-commandments-of-superforecasting/"&gt;superforecaster&lt;/a&gt; could tell them apart.) If the stakes are high, then refine your model, and draw more&amp;nbsp;samples.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The meaning of 1000 true + 0 false simulations depends on your prior beliefs: the posterior mean could be 0.999 (with a uniform prior), or anything less than 0.99 (with a prior weighted more towards the center or&amp;nbsp;zero).&lt;/p&gt;
&lt;p&gt;I love &lt;span class="caps"&gt;BDA3&lt;/span&gt;; I&amp;#8217;m nowhere near finished, but even the first chapters have taught me new ideas and proofs (e.g. the Bayesian cookbook in section 3.8, or modeling normal data with unknown mean &lt;em&gt;and&lt;/em&gt; variance). The examples and exercises are a great combination of applications and theory. As you can see from this post, all I can do is nitpick some tiny details. A quick intro to practical Bayesian modeling is a &lt;a href="https://www.youtube.com/watch?v=T1gYvX5c2sM"&gt;presentation from Andrew Gelman&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Did you like this post, did I make a mistake, or do you know a &lt;span class="caps"&gt;BDA3&lt;/span&gt; discussion group? Let me know in the comments&amp;nbsp;below!&lt;/p&gt;
&lt;h2&gt;Code&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;scipy.stats&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;st&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;IPython.display&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;set_matplotlib_formats&lt;/span&gt;

&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt; &lt;span class="n"&gt;inline&lt;/span&gt;
&lt;span class="n"&gt;set_matplotlib_formats&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;svg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;posterior&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;beta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;plot_beta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1001&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;beta&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;plot_kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;pdf&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;plot_kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;θ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Probability density function&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Pdf of Beta(θ | α = &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;, β = &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;beta&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;grid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;plot_beta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linspace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;posterior&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.01&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;savefig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;beta-1000-pdf-big.svg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="svg" src="https://www.treszkai.com/2019/07/24/approaching-certainty/beta-1000-pdf-big.svg"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;ramanujan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Series that converges to 1/π at an exponential rate,&lt;/span&gt;
&lt;span class="sd"&gt;    by Srinivasa Ramanujan&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;**.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;9801&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                               &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;
                               &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;396&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                               &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1103&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;26390&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                              &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;1/ramanujan(&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;) - π ≈ &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ramanujan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pi&lt;/span&gt;&lt;span class="si"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;.2e&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Easter egg. Thanks for reading!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;1/ramanujan(1) - π ≈&amp;nbsp;7.64e-08&lt;/p&gt;
&lt;p&gt;1/ramanujan(2) - π ≈&amp;nbsp;4.44e-16&lt;/p&gt;
&lt;p&gt;1/ramanujan(3) - π ≈&amp;nbsp;0.00e+00&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;plot_beta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linspace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.990&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;posterior&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vlines&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;posterior&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_ylim&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lw&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mean&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;upper left&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;savefig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;beta-1000-pdf-zoomed.svg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="svg" src="https://www.treszkai.com/2019/07/24/approaching-certainty/beta-1000-pdf-zoomed.svg"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;posterior&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;0.999001996007984&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;P(θ &amp;gt; 0.999) = &lt;/span&gt;&lt;span class="si"&gt;{:d}&lt;/span&gt;&lt;span class="s1"&gt;%&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;posterior&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cdf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.999&lt;/span&gt;&lt;span class="p"&gt;)))))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;P(θ &amp;gt; 0.999) =&amp;nbsp;63%&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;P(θ &amp;gt; 0.998) = &lt;/span&gt;&lt;span class="si"&gt;{:d}&lt;/span&gt;&lt;span class="s1"&gt;%&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;posterior&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cdf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.998&lt;/span&gt;&lt;span class="p"&gt;)))))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;P(θ &amp;gt; 0.998) =&amp;nbsp;86%&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;Andrew Gelman, John Carlin, Hal Stern, David Dunson, Aki Vehtari, and Donald Rubin. 2013. &lt;em&gt;Bayesian Data Analysis: Third Edition&lt;/em&gt;. &lt;a href="http://www.stat.columbia.edu/~gelman/book/"&gt;Official&amp;nbsp;webpage&lt;/a&gt;&lt;/p&gt;</content><category term="math"></category><category term="statistics"></category><category term="Bayes"></category><category term="sampling"></category></entry><entry><title>Evaluation of function calls in Haskell</title><link href="https://www.treszkai.com/2019/07/13/haskell-eval/" rel="alternate"></link><published>2019-07-13T00:00:00+02:00</published><updated>2019-07-13T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2019-07-13:/2019/07/13/haskell-eval/</id><summary type="html">&lt;p&gt;Analyzing why point-free definitions in Haskell allow sharing the result of an inner function application, whereas pointful definitions do&amp;nbsp;not.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;(This post is discussed in &lt;a href="https://haskellweekly.news/episode/15.html"&gt;episode 15&lt;/a&gt; of the&lt;/em&gt; Haskell Weekly Podcast.&lt;em&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Chapter 27 of &lt;a href="http://haskellbook.com/"&gt;&lt;em&gt;Haskell Programming from first principles&lt;/em&gt;&lt;/a&gt; (by Christopher Allen and Julie Moronuki) is about the evaluation system of Haskell, with a focus on non-strictness. In the section &lt;em&gt;Preventing sharing on purpose&lt;/em&gt;, they write you want to prevent sharing the result of a function call when it would mean storing some big data just to calculate a small result. Two examples are provided to demonstrate the alternatives. In the first, the result of &lt;code&gt;g _&lt;/code&gt; is not shared but calculated&amp;nbsp;twice:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;\&lt;/span&gt;&lt;span class="kr"&gt;_&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt;
&lt;span class="nf"&gt;hi&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt;
&lt;span class="nf"&gt;hi&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the second, the result of &lt;code&gt;g _&lt;/code&gt; &lt;em&gt;is&lt;/em&gt; shared, i.e. calculated only once and the result is&amp;nbsp;stored:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;quot;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kt"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;
&lt;span class="nf"&gt;hi&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(Edited to add:) In practice, sharing is usually achieved with a &lt;code&gt;let&lt;/code&gt; expression or a &lt;code&gt;where&lt;/code&gt; construct.&lt;/p&gt;
&lt;p&gt;(Note that this latter is called a &lt;a href="https://wiki.haskell.org/Pointfree"&gt;“point-free” definition&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;The authors conclude&amp;nbsp;that&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;functions aren’t shared when there are named arguments but are when the arguments are elided, as in pointfree. So, one way to prevent sharing is adding named&amp;nbsp;arguments.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;(Quoted from version 1.&lt;span class="caps"&gt;0RC4&lt;/span&gt; of the&amp;nbsp;book.)&lt;/p&gt;
&lt;p&gt;In this post I analyze the runtime differences between point-free and pointful&amp;nbsp;definitions.&lt;/p&gt;
&lt;h2&gt;Behind the&amp;nbsp;scenes&lt;/h2&gt;
&lt;p&gt;As &lt;a href="#Further-resources"&gt;Tom Ellis describes&lt;/a&gt;, the definitions of &lt;code&gt;g&lt;/code&gt; and &lt;code&gt;f&lt;/code&gt; translate to the following (in a close approximation to the “Core” language used during&amp;nbsp;compilation):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;f&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;\&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="kr"&gt;let&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;x3&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;x10&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="kr"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;x3&lt;/span&gt; &lt;span class="n"&gt;x10&lt;/span&gt;
&lt;span class="nf"&gt;g&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;let&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;tg&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;quot;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="kr"&gt;in&lt;/span&gt; &lt;span class="nf"&gt;\&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;tg&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;
&lt;span class="nf"&gt;g&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;\&lt;/span&gt;&lt;span class="kr"&gt;_&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(Calling &lt;code&gt;f g&lt;/code&gt; with these definitions does &lt;em&gt;not&lt;/em&gt; result in the same trace in GHCi 8.6.5 as with the original definitions. However, the code has the expected behavior if loaded into GHCi from a source file like &lt;a href="#Sharing"&gt;that below&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;Two things to point out here. First, every function definition is a lambda. Second, &lt;code&gt;g&lt;/code&gt; was turned into a &lt;em&gt;let&lt;/em&gt; expression because we can only apply functions to variables or literals (in Core), not to function calls. &lt;em&gt;Edited to add:&lt;/em&gt; It would be reasonable to ask why &lt;code&gt;g = const (trace "hi g" 2)&lt;/code&gt;  doesn&amp;#8217;t translate to &lt;code&gt;\y -&amp;gt; let {tg = trace "hi g" 2} in const tg y&lt;/code&gt; (similar to &lt;code&gt;f&lt;/code&gt;), to which the pragmatic answer is that &lt;em&gt;apparently&lt;/em&gt; the order is the&amp;nbsp;following:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;not-fully-applied functions are turned into&amp;nbsp;lambdas,&lt;/li&gt;
&lt;li&gt;parameters that are function calls are turned into named variables,&amp;nbsp;and&lt;/li&gt;
&lt;li&gt;named function arguments from the left-hand side of &lt;code&gt;=&lt;/code&gt; are moved to the right as a&amp;nbsp;lambda.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Evaluation with&amp;nbsp;sharing&lt;/h2&gt;
&lt;p&gt;This is what happens during the evaluation of &lt;code&gt;f g&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;ans&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;ans&lt;/code&gt; is a function call, so its evaluation proceeds with substituting &lt;code&gt;g&lt;/code&gt; for the argument of &lt;code&gt;f&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;ans&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;let&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;x3&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;x10&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="kr"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;x3&lt;/span&gt; &lt;span class="n"&gt;x10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;ans&lt;/code&gt; is a &lt;em&gt;let&lt;/em&gt; expression, so we put the following &lt;em&gt;thunks&lt;/em&gt; for &lt;code&gt;x3&lt;/code&gt; and &lt;code&gt;x10&lt;/code&gt; on the heap under some unique&amp;nbsp;name:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Heap:&lt;/span&gt;
&lt;span class="nf"&gt;ans_x3&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="nf"&gt;ans_x10&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&amp;#8230;and then proceed with evaluating the &lt;em&gt;in&lt;/em&gt;&amp;nbsp;part:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;ans&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;ans_x3&lt;/span&gt; &lt;span class="n"&gt;ans_x10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;During the evaluation of this function call, &lt;code&gt;ans_x3&lt;/code&gt; will be evaluated (or potentially &lt;code&gt;ans_x10&lt;/code&gt; first, or both in parallel). &lt;code&gt;ans_x3&lt;/code&gt; is a function call, so first we evaluate &lt;code&gt;g&lt;/code&gt; to a lambda. As &lt;code&gt;g&lt;/code&gt; is a &lt;em&gt;let&lt;/em&gt; expression, we create a closure for &lt;code&gt;trace "hi g" 2&lt;/code&gt; on the heap, and then continue with the &lt;em&gt;in&lt;/em&gt; part of &lt;code&gt;g&lt;/code&gt; (&lt;code&gt;\y -&amp;gt; const tg y&lt;/code&gt;). This is a lambda now, meaning it&amp;#8217;s in weak head normal form, so the heap contents for &lt;code&gt;g&lt;/code&gt; is overwritten with&amp;nbsp;that:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Heap:&lt;/span&gt;
&lt;span class="nf"&gt;g_tg&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;quot;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nf"&gt;g&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;\&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;g_tg&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Back to &lt;code&gt;ans_x3&lt;/code&gt;, now the argument &lt;code&gt;3&lt;/code&gt; is substituted in the definition of &lt;code&gt;g&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;ans_x3&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;g_tg&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is a function call, with &lt;code&gt;const&lt;/code&gt; already a lambda &lt;code&gt;\x _ -&amp;gt; x&lt;/code&gt;, so the arguments can now be substituted in the body, leaving us&amp;nbsp;with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Heap:&lt;/span&gt;
&lt;span class="nf"&gt;ans_x3&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g_tg&lt;/span&gt;  &lt;span class="c1"&gt;-- (Pointer to the same address as g_tg.)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;During the evaluation of &lt;code&gt;g_tg&lt;/code&gt;, the magic printout happens (&lt;code&gt;hi g&lt;/code&gt; on stdout), and its value is resolved to be &lt;code&gt;2&lt;/code&gt;, so the heap is updated as&amp;nbsp;such:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Heap:&lt;/span&gt;
&lt;span class="nf"&gt;g_tg&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And &lt;code&gt;ans_x3&lt;/code&gt; is a pointer to the same memory content &lt;code&gt;2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Analogously, the evaluation of &lt;code&gt;ans_x10&lt;/code&gt; proceeds as&amp;nbsp;such:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;ans_x10&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;g_tg&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="nf"&gt;ans_x10&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g_tg&lt;/span&gt;
&lt;span class="c1"&gt;-- let ans_x10 points to the memory location of g_tg:&lt;/span&gt;
&lt;span class="nf"&gt;ans_x10&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, &lt;code&gt;ans = (+) ans_x3 ans_x10&lt;/code&gt;, which evaluates to &lt;code&gt;ans = 4&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Evaluation without&amp;nbsp;sharing&lt;/h2&gt;
&lt;p&gt;In contrast, the evaluation of &lt;code&gt;f g'&lt;/code&gt; proceeds as&amp;nbsp;follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;ans&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt;
&lt;span class="nf"&gt;ans&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;let&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;x3&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;x10&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="kr"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;x3&lt;/span&gt; &lt;span class="n"&gt;x10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Heap:&lt;/span&gt;
&lt;span class="nf"&gt;ans_x3&amp;#39;&lt;/span&gt;  &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="nf"&gt;ans_x10&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;g&amp;#39;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nf"&gt;ans&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;ans_x3&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;ans_x10&amp;#39;&lt;/span&gt;
&lt;span class="nf"&gt;ans_x3&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now &lt;code&gt;hi g'&lt;/code&gt; is printed, and the heap is&amp;nbsp;updated:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Heap:&lt;/span&gt;
&lt;span class="nf"&gt;ans_x3&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When evaluating &lt;code&gt;ans_x10'&lt;/code&gt;, we &lt;strong&gt;again print&lt;/strong&gt; &lt;code&gt;hi g'&lt;/code&gt;, and store the result of the trace under a different&amp;nbsp;thunk:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Heap:&lt;/span&gt;
&lt;span class="nf"&gt;ans_x10&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now &lt;code&gt;ans'&lt;/code&gt; evaluates to &lt;code&gt;(+) 2 2&lt;/code&gt;, i.e. &lt;code&gt;4&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Attempt at verifying my translated&amp;nbsp;definitions&lt;/h2&gt;
&lt;p&gt;I attempted to verify what I was saying above about the definitions of &lt;code&gt;f&lt;/code&gt;, &lt;code&gt;g&lt;/code&gt;, &lt;code&gt;g'&lt;/code&gt; in Core, using the &lt;code&gt;-ddump-simpl&lt;/code&gt; compiler flag of GHCi, but it didn&amp;#8217;t fulfil my&amp;nbsp;expectations.&lt;/p&gt;
&lt;p&gt;&lt;a name="Sharing"&gt;&lt;/a&gt;Sharing.hs:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kr"&gt;module&lt;/span&gt; &lt;span class="nn"&gt;Sharing&lt;/span&gt; &lt;span class="kr"&gt;where&lt;/span&gt;

&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;Debug.Trace&lt;/span&gt;

&lt;span class="nf"&gt;f&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="ow"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;::&lt;/span&gt; &lt;span class="kt"&gt;Int&lt;/span&gt;
&lt;span class="nf"&gt;g&lt;/span&gt;   &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="ow"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;  &lt;span class="c1"&gt;-- share&lt;/span&gt;
&lt;span class="nf"&gt;g&amp;#39;&lt;/span&gt;  &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;\&lt;/span&gt;&lt;span class="kr"&gt;_&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="ow"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;span class="c1"&gt;-- don&amp;#39;t share&lt;/span&gt;
&lt;span class="nf"&gt;g&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;let&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;tg&lt;/span&gt; &lt;span class="ow"&gt;=&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hi g&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="ow"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int&lt;/span&gt;&lt;span class="p"&gt;)}&lt;/span&gt; &lt;span class="kr"&gt;in&lt;/span&gt; &lt;span class="nf"&gt;\&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;tg&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;  &lt;span class="c1"&gt;-- share (equivalent to g)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In&amp;nbsp;GHCi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ddump&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;simpl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dsuppress&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Wno&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;missing&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signatures&lt;/span&gt;
&lt;span class="n"&gt;Prelude&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="n"&gt;Sharing&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;Compiling&lt;/span&gt; &lt;span class="n"&gt;Sharing&lt;/span&gt;          &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;Sharing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;interpreted&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;====================&lt;/span&gt; &lt;span class="n"&gt;Tidy&lt;/span&gt; &lt;span class="n"&gt;Core&lt;/span&gt; &lt;span class="o"&gt;====================&lt;/span&gt;
&lt;span class="n"&gt;Result&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;Tidy&lt;/span&gt; &lt;span class="n"&gt;Core&lt;/span&gt;
  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;terms&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;52&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;coercions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;joins&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; \ &lt;span class="n"&gt;x_a1Fl&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;fNumInt&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_a1Fl&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="c1"&gt;# 3#)) (x_a1Fl (I# 10#))&lt;/span&gt;
&lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; \ &lt;span class="err"&gt;@&lt;/span&gt; &lt;span class="n"&gt;b_a1Gi&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unpackCString&lt;/span&gt;&lt;span class="c1"&gt;# &amp;quot;hi g&amp;quot;#) (I# 2#))&lt;/span&gt;
&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; = \ @ p_a1G6 -&amp;gt; \ _ -&amp;gt; trace (unpackCString# &amp;quot;hi g&amp;#39;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;#) (I# 2#)&lt;/span&gt;
&lt;span class="n"&gt;tg_r1F4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;trace&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unpackCString&lt;/span&gt;&lt;span class="c1"&gt;# &amp;quot;hi g&amp;quot;#) (I# 2#)&lt;/span&gt;
&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; \ &lt;span class="err"&gt;@&lt;/span&gt; &lt;span class="n"&gt;b_a1FJ&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; \ &lt;span class="n"&gt;y_a1Fn&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;tg_r1F4&lt;/span&gt; &lt;span class="n"&gt;y_a1Fn&lt;/span&gt;

&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;some&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;stuff&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nonetheless, as &lt;a href="https://stackoverflow.com/a/6121495/8424390"&gt;a &lt;span class="caps"&gt;SO&lt;/span&gt; answer describes&lt;/a&gt;, we can see that a function application in Core is defined as &lt;code&gt;Expr Atom&lt;/code&gt;, where &lt;em&gt;Atom&lt;/em&gt; is &lt;code&gt;var | Literal&lt;/code&gt;. I attempted to install &lt;a href="http://hackage.haskell.org/package/ghc-core"&gt;ghc-core&lt;/a&gt; but the build failed, so further analysis is put on the&amp;nbsp;shelf.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;So, what&amp;#8217;s the essential difference between &lt;code&gt;g&lt;/code&gt; and &lt;code&gt;g'&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;&lt;code&gt;g = const (trace "hi g" 2)&lt;/code&gt; is a function application where the argument is a function application, which is treated as a &lt;em&gt;let&lt;/em&gt; expression. When you evaluate &lt;code&gt;g ()&lt;/code&gt;, the auxiliary variable introduced by the &lt;em&gt;let&lt;/em&gt; – i.e.,&lt;code&gt;tg = trace "hi g" 2&lt;/code&gt; – is evaluated to a literal and its value is stored on the heap. On subsequent calls, some other argument can be applied to the &lt;code&gt;const tg&lt;/code&gt; function, but its first argument &lt;code&gt;tg&lt;/code&gt; is already&amp;nbsp;evaluated.&lt;/p&gt;
&lt;p&gt;In contrast, &lt;code&gt;g' = \_ -&amp;gt; trace "hi g'" 2&lt;/code&gt; is a lambda, so it is already fully evaluated, and nothing in it can be simplified further. If we apply &lt;code&gt;g'&lt;/code&gt; first to the argument &lt;code&gt;()&lt;/code&gt;, the expression &lt;code&gt;g' ()&lt;/code&gt; will evaluate to the body of &lt;code&gt;g'&lt;/code&gt; with the unused parameter discarded, i.e. &lt;code&gt;trace "hi g'" 2&lt;/code&gt;. If we later evaluate &lt;code&gt;g' []&lt;/code&gt;, then it again results in the (same) body after the (dummy) function application. Nowhere during this process did we store the value of &lt;code&gt;trace "hi g'" 2&lt;/code&gt;: in particular, we didn&amp;#8217;t update the definition of &lt;code&gt;g'&lt;/code&gt; to &lt;code&gt;\_ -&amp;gt; 2&lt;/code&gt;, simply because that is not the definition of &lt;code&gt;g'&lt;/code&gt;. (But could we have updated it? Even though functions are always pure, I think the answer is generally &lt;em&gt;no&lt;/em&gt;: sometimes the result of a function is bigger than the definition, and the result is not needed often enough to warrant this speed–memory&amp;nbsp;tradeoff.)&lt;/p&gt;
&lt;p&gt;Recall the original&amp;nbsp;wording:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;functions aren’t shared when there are named arguments but are when the arguments are elided, as in&amp;nbsp;pointfree.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As we saw, &lt;em&gt;functions&lt;/em&gt; themselves are never shared. Rather, if &lt;code&gt;g&lt;/code&gt; is a partially applied function whose argument is a function application &lt;code&gt;fun arg&lt;/code&gt;, then &lt;code&gt;g&lt;/code&gt; is equivalent to a &lt;em&gt;let&lt;/em&gt; expression, and after its first evaluation &lt;code&gt;g&lt;/code&gt; will &lt;em&gt;change&lt;/em&gt; to a lambda with &lt;code&gt;fun arg&lt;/code&gt; already&amp;nbsp;evaluated.&lt;/p&gt;
&lt;p&gt;As a generally-okay heuristic, point-free definitions allow sharing inner function calls, whereas nothing in a lambda (or a function with all arguments on the left-hand side) is&amp;nbsp;shared.&lt;/p&gt;
&lt;h2&gt;Further&amp;nbsp;resources&lt;/h2&gt;
&lt;p&gt;More details on similar behavior are given by Tom Ellis in his talk &lt;a href="https://skillsmatter.com/skillscasts/8726-haskell-programs-how-do-they-run"&gt;&lt;em&gt;Haskell programs: how do they run?&lt;/em&gt;&lt;/a&gt; (free registration required to watch the&amp;nbsp;talk).&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://skillsmatter.com/skillscasts/8800-functional-and-low-level-watching-the-stg-execute"&gt;talk of David Luposchainsky (a.k.a. &lt;code&gt;quchen&lt;/code&gt;)&lt;/a&gt; goes into more depth – down to the Core –, in which he uses his own implementation of the spineless tagless graph reduction machine (&lt;span class="caps"&gt;STG&lt;/span&gt;), to visualize the evaluation of any given Haskell code (&lt;a href="https://github.com/quchen/stgi"&gt;link to repo&lt;/a&gt;).&lt;/p&gt;</content><category term="programming"></category><category term="Haskell"></category></entry><entry><title>The wise men puzzle</title><link href="https://www.treszkai.com/2018/08/18/wise-men/" rel="alternate"></link><published>2018-08-18T00:00:00+02:00</published><updated>2018-08-18T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2018-08-18:/2018/08/18/wise-men/</id><summary type="html">&lt;p&gt;Analyzing the wise men puzzle of modal&amp;nbsp;logic.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Today I understood the wise men puzzle at a conceptual level, well enough that I could explain it and possibly generalize to similar domains. This post is my attempt at explaining&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;The puzzle is described in &lt;!-- {% cite Huth2000-Logic-book %} --&gt; &lt;a class="citation" href="#Huth2000-Logic-book"&gt;(Huth &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Ryan, 2000)&lt;/a&gt; as&amp;nbsp;follows:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There are three wise men. It&amp;#8217;s common knowledge—known by everyone and known to be known by everyone, etc.—that there are three red hats and two white hats. The king puts a hat on each of the wise men in such a way that they are not able to see their own hat, and asks each one in turn whether they are not able to see their own hat, and asks each one in turn whether they know the color of the hat on their head. Suppose the first man says he does not know; then the second says he does not know either.
It follows that the third man must be able to say that he knows the colour of his hat. Why is this? What colour has the third man&amp;#8217;s&amp;nbsp;hat?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Let&amp;#8217;s call the people Alpha, Beta, Gamma, in the order they&amp;nbsp;speak.&lt;/p&gt;
&lt;p&gt;One solution is to think about the puzzle in terms of possible worlds. A world in this problem is described by an assignment of hat colors to people, which is equally an ordered triple of colours &lt;script type="math/tex"&gt;⟨c_1, c_2, c_3⟩&lt;/script&gt;, with &lt;script type="math/tex"&gt;c_i ∈ \{R,W\}&lt;/script&gt;. There are only 2 white hats, so in the beginning, the seven possible worlds&amp;nbsp;are&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\begin{array}{cc}
⟨R,R,R⟩ &amp; ⟨R,R,W⟩ &amp; ⟨R,W,R⟩ &amp; ⟨R,W,W⟩ \\
⟨W,R,R⟩ &amp; ⟨W,R,W⟩ &amp; ⟨W,W,R⟩ &amp; \\
\end{array}. %]]&gt;&lt;/script&gt;
&lt;p&gt;If Beta and Gamma were both wearing white hats, then Alpha would know that that his hat is red. Therefore, when Alpha says &amp;#8220;no&amp;#8221;, Beta and Gamma both learn that both of them cannot be white, i.e. at least one of them is red. The remaining possible worlds&amp;nbsp;are&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\begin{array}{cc}
{⟨R,R,R⟩} &amp; ⟨R,R,W⟩ &amp; ⟨R,W,R⟩ &amp; \crossed{⟨R,W,W⟩} \\
{⟨W,R,R⟩} &amp; ⟨W,R,W⟩ &amp; ⟨W,W,R⟩ &amp; \\
\end{array}. %]]&gt;&lt;/script&gt;
&lt;p&gt;Now, &lt;em&gt;we&lt;/em&gt; know that the world is one of the 6 worlds above, but Beta also sees the hats of Alpha and Gamma. What we think as outsiders only matters for whether &lt;em&gt;we&lt;/em&gt; can tell who&amp;#8217;s wearing what.
But back to the observations of A,B,C. When Beta says &amp;#8220;no&amp;#8221;, that rules out the worlds where Gamma is white (because then Beta would be&amp;nbsp;red).&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\begin{array}{cc}
{⟨R,R,R⟩} &amp; \crossed{⟨R,R,W⟩} &amp; ⟨R,W,R⟩ &amp; \crossed{⟨R,W,W⟩} \\
{⟨W,R,R⟩} &amp; \crossed{⟨W,R,W⟩} &amp; ⟨W,W,R⟩ &amp; \\
\end{array} %]]&gt;&lt;/script&gt;
&lt;p&gt;This means that Gamma is red, and he also knows&amp;nbsp;this.&lt;/p&gt;
&lt;h1&gt;Another&amp;nbsp;way&lt;/h1&gt;
&lt;p&gt;Our solution is more procedural than is necessary, and it does not show the essence of omniscient agents acting with one another. As this problem is small enough, we could list for every world every statement any agent could make, which is simply their knowledge base of true statements (i.e. whatever they can deduce from their view and from the common knowledge, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;). (Say, with atoms &lt;script type="math/tex"&gt;R_1, R_2, R_3, W_1, W_2, W_3&lt;/script&gt;, meaning &amp;#8220;I think person &lt;script type="math/tex"&gt;i&lt;/script&gt; has color X&amp;#8221;, with a &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt; abbreviating &lt;script type="math/tex"&gt;R_1\wedge W_2 \wedge R_3&lt;/script&gt;.) We can only do this because we are not interested in making statements like &amp;#8220;X knows that Y knows that Z knows that φ&amp;#8221;.
Besides, in every world, we implicitly include what is common knowledge, and what any agent can see, i.e. the whole problem statement in the opening paragraph.
The common knowledge at the beginning in any of these worlds is &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩&lt;/script&gt;. That&amp;#8217;s not very much, but at least symmetric, which allows us to write down only three&amp;nbsp;worlds.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,W,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,W,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When Alpha says &amp;#8220;no&amp;#8221; in the beginning, that means he is not in a world where from his knowledge base he can conclude his own colour. His statement becomes common knowledge (&lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;), i.e. &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt; is extended with &lt;script type="math/tex"&gt;\lnot(W_2\wedge W_3)&lt;/script&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨R,W,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨R,W,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,W,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;\crossed{⟨R,W,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨R,W,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨R,W,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We were able to cross out some worlds! And in the world &lt;script type="math/tex"&gt;⟨R,W,W⟩&lt;/script&gt; we were left with zero possible worlds for Alpha, i.e. Alpha&amp;#8217;s statement would lead to a contradiction: he would have answered &amp;#8220;yes&amp;#8221;. In fact, this was how we eliminated possible-worlds in the previous solution. Next turn: the king asks Beta, who says &amp;#8220;no&amp;#8221;. The common knowledge is extended with &lt;script type="math/tex"&gt;\lnot(W_1 \wedge W_3)&lt;/script&gt;. (Right? At this point I can imagine myself making an incorrect&amp;nbsp;deduction.)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div id="mistaken1" style="display: block;"&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨W,R,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id="fixed1" style="display: none;"&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\star \wedge \lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;\crossed{⟨R,R,W}⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨W,R,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;\crossed{⟨R,R,W}⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;\crossed{⟨R,R,R}⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨R,R,W}⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨W,R,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,R,W⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨W,R,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;\crossed{⟨W,R,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;\crossed{⟨W,R,W⟩}&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Another world disappeared. But what about &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;, why is it still there, when last time we argued that it&amp;#8217;s not possible for Gamma to be white? In fact, it is not: in that world Beta would have said yes, as he knew what colour he had.
Although never explicitly stated, we assumed that if someone&amp;#8217;s not then he&amp;#8217;s white, and vice versa. Use &lt;script type="math/tex"&gt;\star&lt;/script&gt; to denote this&amp;nbsp;fact:&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\star ≡ \bigwedge_{i=1}^3 (\lnot R_i → W_i) \wedge (\lnot W_i → R_i). %]]&gt;&lt;/script&gt;
&lt;p&gt;We also know that common knowledge is true: for every formula &lt;script type="math/tex"&gt;φ&lt;/script&gt;, it&amp;#8217;s an axiom that &lt;script type="math/tex"&gt;\mathcal C φ → φ&lt;/script&gt;.
Then, it&amp;#8217;s simple to show that Alpha is red and Gamma is white, Beta is&amp;nbsp;red.&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\mathcal C \Big((R_1 \vee R_2 \vee R_3) \wedge (R_2 \vee R_3) \wedge (R_1 \vee R_3) \Big) \wedge \star \vdash
    (R_1 \wedge W_3) → R_2. %]]&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
function showById(id, btn, displayStyle) {
    document.getElementById(id).style.display = 'block';
    btn.style.display = 'none';
}
function showInlineById(id, btn, displayStyle) {
    document.getElementById(id).style.display = 'inline';
    btn.style.display = 'none';
}
function hideById(id, btn) {
    document.getElementById(id).style.display = 'none';
    btn.style.display = 'none';
}
&lt;/script&gt;

&lt;p&gt;Click this to fix that above: &lt;a href="#" onclick="showById('fixed1', this); hideById('mistaken1', this); return false;"&gt;click me!&lt;/a&gt; (Needs&amp;nbsp;JavaScript.)&lt;/p&gt;
&lt;p&gt;Now we are left with the following&amp;nbsp;worlds:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\star \wedge \lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;span id="mistaken2" markdown="1"&gt;&lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt;&lt;/span&gt; &lt;span id="fixed2" style="display: none;"&gt;&lt;script type="math/tex"&gt;\crossed{⟨R,R,W⟩}&lt;/script&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\star \wedge \lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\star \wedge \lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;World&lt;/strong&gt; &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;, &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;: &lt;script type="math/tex"&gt;\star \wedge \lnot⟨W,W,W⟩\ \wedge \lnot(W_2\wedge W_3) \wedge \lnot(W_1\wedge W_3)&lt;/script&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alpha: &lt;script type="math/tex"&gt;⟨R,W,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Beta: &lt;script type="math/tex"&gt;⟨W,R,R⟩&lt;/script&gt;, &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;li&gt;Gamma: &lt;script type="math/tex"&gt;⟨W,W,R⟩&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;At first sight, Gamma&amp;#8217;s knowledge base in some worlds (&lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt;) contains a world with &lt;script type="math/tex"&gt;\lnot R_3&lt;/script&gt;. But every four of the above worlds has &lt;script type="math/tex"&gt;R_3&lt;/script&gt;, meaning &lt;script type="math/tex"&gt;R_3&lt;/script&gt; is deducible from &lt;script type="math/tex"&gt;\star&lt;/script&gt; and the &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;, making &lt;script type="math/tex"&gt;⟨R,R,W⟩&lt;/script&gt; in world &lt;script type="math/tex"&gt;⟨R,R,R⟩&lt;/script&gt; impossible. &lt;a href="#" onclick="showInlineById('fixed2', this); hideById('mistaken2', this); return false;"&gt;Click me to fix that.&lt;/a&gt; This means &lt;script type="math/tex"&gt;R_3&lt;/script&gt; is &lt;abbr title="Common knowledge"&gt;&lt;span class="caps"&gt;CK&lt;/span&gt;&lt;/abbr&gt;.&amp;nbsp;Yay!&lt;/p&gt;
&lt;p&gt;Note: there might be some other true statements that could be deduced, so maybe Alpha knows his colour too in some worlds—I haven&amp;#8217;t solved the problem in full. For example, when Gamma answers &amp;#8220;yes&amp;#8221; in the end, it doesn&amp;#8217;t say anything we didn&amp;#8217;t already know, and nothing that Alpha and Beta didn&amp;#8217;t know already, as &lt;script type="math/tex"&gt;R_3&lt;/script&gt; can be deduced from the common knowledge. Maybe someone else knows theirs&amp;nbsp;too?&lt;/p&gt;
&lt;h1&gt;Another&amp;nbsp;problem&lt;/h1&gt;
&lt;p&gt;A slight modification is to map a natural number &lt;script type="math/tex"&gt;k&lt;/script&gt; to worlds where X is able to decide their colour after &lt;script type="math/tex"&gt;k&lt;/script&gt; utterances, if it wasn&amp;#8217;t X who spoke&amp;nbsp;last.&lt;/p&gt;
&lt;p&gt;Related: it feels like there is a situation with &lt;script type="math/tex"&gt;n&gt;2&lt;/script&gt; people, where two agents can keep on discarding possible worlds just by them speaking in turns. If you know of one such problem, please let me&amp;nbsp;know.&lt;/p&gt;
&lt;h1&gt;Notes&lt;/h1&gt;
&lt;p&gt;I hope I didn&amp;#8217;t make a mistake in the calculations, I admit I enumerated the possible worlds by hand instead of with&amp;nbsp;Prolog.&lt;/p&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Listen to people when they say&amp;nbsp;&amp;#8220;no&amp;#8221;.&lt;/p&gt;
&lt;h1&gt;References&lt;/h1&gt;
&lt;!&amp;#8212; {% bibliography &amp;#8212;cited %} &amp;#8212;&gt;

&lt;ol class="bibliography"&gt;&lt;li&gt;&lt;span id="Huth2000-Logic-book"&gt;Huth, M., &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Ryan, &lt;span class="caps"&gt;M. D.&lt;/span&gt;(2000). &lt;i&gt;Logic in Computer Science - modelling and reasoning about systems&lt;/i&gt;. Cambridge University&amp;nbsp;Press.&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="math"></category><category term="starred"></category><category term="logic"></category></entry><entry><title>Blog post summary: Medical AI safety: where are we and where are we heading</title><link href="https://www.treszkai.com/2018/07/11/medical-safety/" rel="alternate"></link><published>2018-07-11T00:00:00+02:00</published><updated>2018-07-11T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2018-07-11:/2018/07/11/medical-safety/</id><summary type="html">&lt;p&gt;I summarize a blog post about medical &lt;span class="caps"&gt;AI&lt;/span&gt; safety, which describes the potential consequences of using advanced medical systems without sufficient evidence to back up their&amp;nbsp;usefulness.&lt;/p&gt;</summary><content type="html">&lt;p&gt;In this post I summarize a &lt;a href="https://lukeoakdenrayner.wordpress.com/2018/07/11/medical-ai-safety-we-have-a-problem/"&gt;blog post about “medical &lt;span class="caps"&gt;AI&lt;/span&gt; safety”&lt;/a&gt;: the potential consequences of using advanced medical systems without sufficient evidence to back up their&amp;nbsp;usefulness.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Epistemic status: the author (Luke Oakden-Rayner) is a PhD candidate radiologist, and I&amp;#8217;m not an expert in&amp;nbsp;medicine.&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For the first time ever, &lt;span class="caps"&gt;AI&lt;/span&gt; systems could actually be responsible for medical&amp;nbsp;disasters.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The risk of a medical &lt;span class="caps"&gt;AI&lt;/span&gt; system increases with its complexity: from the lowest complexity &lt;em&gt;processing systems&lt;/em&gt;, through &lt;em&gt;triage systems&lt;/em&gt; that order the priority queue of patients, we are now moving towards autonomous &lt;em&gt;diagnostic systems&lt;/em&gt;, and eventually to autonomous &lt;em&gt;prediction systems&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Some systems in the wild are worse than humans in both recall and&amp;nbsp;sensitivity:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Not only did &lt;span class="caps"&gt;CAD&lt;/span&gt; [computer-aided diagnosis] increase the recalls without improving cancer detection, but, in some cases, even decreased sensitivity by missing some&amp;nbsp;cancers.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Nonetheless, we are already proceeding to the next&amp;nbsp;level:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A few months ago the &lt;span class="caps"&gt;FDA&lt;/span&gt; approved a new &lt;span class="caps"&gt;AI&lt;/span&gt; system by IDx, and it makes independent medical decisions without the need for a clinician. [In this case, screening for eye disease through a retina&amp;nbsp;scan.]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But on the upside, these tools improve the ratio of people&amp;nbsp;screened:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;But while there is a big potential upside here (about 50% of people with diabetes are not screened regularly enough), and the decision to “refer or not” is rarely immediately vision-threatening, approving a system like this without &lt;em&gt;clinical testing&lt;/em&gt; raises some&amp;nbsp;concerns.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And systems operate now on a larger scale&amp;nbsp;too:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span class="caps"&gt;NHS&lt;/span&gt; is already using an automated smart-phone triage system “powered by” babylonhealth &lt;span class="caps"&gt;AI&lt;/span&gt;. This one is definitely capable of leading to serious harm, since it recommends when to go (or not to go) to&amp;nbsp;hospital.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#8230; which system gave 90% confidence to non-lethal diagnosis X, not even offering lethal diagnosis Y which was suggested by 90% of MDs on Twitter. (And I assume it&amp;#8217;s not even an adversarial attack.) It&amp;#8217;s fair to say that there is room for improvement. (Compare this with the amount of news coverage received by the monthly crash of an autonomous&amp;nbsp;vehicle.)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The real point is that none of the &lt;span class="caps"&gt;FDA&lt;/span&gt;, &lt;span class="caps"&gt;NHS&lt;/span&gt;, nor the various regulatory agencies in other nations appear to be concerned [to the extent required] about the specific risks of autonomous decision making &lt;span class="caps"&gt;AI&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Are we potentially racing towards an &lt;span class="caps"&gt;AI&lt;/span&gt; event on the scale of elixir sulfanilamide [which prompted the foundation of &lt;span class="caps"&gt;FDA&lt;/span&gt;] or thalidomide [which the &lt;span class="caps"&gt;FDA&lt;/span&gt; banned before other countries, preventing 10,000 birth&amp;nbsp;malformations]?&lt;/p&gt;
&lt;/blockquote&gt;</content><category term="AI"></category><category term="AI"></category><category term="medicine"></category></entry><entry><title>International Winter School on Gravity and Light, Tutorial 3: Multilinear Algebra – Solutions for Exercise 1</title><link href="https://www.treszkai.com/2018/06/09/multilinear-tutorial/" rel="alternate"></link><published>2018-06-09T00:00:00+02:00</published><updated>2018-06-09T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2018-06-09:/2018/06/09/multilinear-tutorial/</id><summary type="html">&lt;p&gt;Solutions for exercise 1 of tutorial 3 of the International Winter School on Gravity and&amp;nbsp;Light.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Solutions for exercise 1 of &lt;a href="https://www.youtube.com/watch?v=5oeWX3NUhMA"&gt;tutorial 3&lt;/a&gt; of the &lt;a href="https://gravity-and-light.herokuapp.com"&gt;International Winter School on Gravity and Light&lt;/a&gt;. (&lt;a href="https://www.youtube.com/watch?v=mbv3T15nWq0"&gt;Link to video of lecture 3&lt;/a&gt;.)&lt;/p&gt;
&lt;h2&gt;Notation&lt;/h2&gt;
&lt;p&gt;On this solution sheet, I&amp;#8217;ll speak of a vector space &lt;script type="math/tex"&gt;(V,+,\cdot)&lt;/script&gt; over a field &lt;script type="math/tex"&gt;K&lt;/script&gt;, where &lt;script type="math/tex"&gt;+: V\times V \rightarrow V&lt;/script&gt; is the addition and &lt;script type="math/tex"&gt;\cdot: K \times V \rightarrow V&lt;/script&gt; is called (scalar) multiplication or S-multiplication. The field &lt;script type="math/tex"&gt;(K, \textcolor{red}{+}, \textcolor{red}{\cdot})&lt;/script&gt; has &lt;script type="math/tex"&gt;\textcolor{red}{+}:K\times K \rightarrow K&lt;/script&gt; as addition and &lt;script type="math/tex"&gt;\textcolor{red}{\cdot}:K\times K \rightarrow K&lt;/script&gt; as multiplication operations. The dot is often omitted, i.e. &lt;script type="math/tex"&gt;a \mathbf v&lt;/script&gt; is short for &lt;script type="math/tex"&gt;a \cdot \mathbf v&lt;/script&gt;, &lt;script type="math/tex"&gt;a b&lt;/script&gt; is short for &lt;script type="math/tex"&gt;a \textcolor{red}{\cdot} b&lt;/script&gt;. (Note that the lecture dealt with real vector spaces, i.e. the field &lt;script type="math/tex"&gt;K&lt;/script&gt; was always the set of reals &lt;script type="math/tex"&gt;\mathbb R&lt;/script&gt;.)
The scalars, i.e. the elements of &lt;script type="math/tex"&gt;K&lt;/script&gt;, are denoted with normal letters &lt;script type="math/tex"&gt;a,b&lt;/script&gt;, and the vectors, i.e. the elements of &lt;script type="math/tex"&gt;V&lt;/script&gt;, are denoted with boldface letters &lt;script type="math/tex"&gt;\mathbf u, \mathbf v, \mathbf w&lt;/script&gt;.&lt;/p&gt;
&lt;script type="text/javascript"&gt;
function showById(id, btn) {
    document.getElementById(id).style.display = 'block';
    btn.style.display = 'none';
}
function showByClass(cls, btn) {
    for (var x of document.getElementsByClassName(cls))
        x.style.display = 'block';
    btn.style.display = 'none';
}
function hideByClass(cls) {
    for (var x of document.getElementsByClassName(cls))
        x.style.display = 'none';
}
&lt;/script&gt;

&lt;h1&gt;Exercise 1: True or&amp;nbsp;false?&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Tick the correct statements, but not the incorrect ones.&lt;/em&gt; &lt;a href="#" onclick="showByClass('answer', this); hideByClass('show-answer'); return false;"&gt;Show all&amp;nbsp;answers&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;a) Which statements on vector spaces are&amp;nbsp;correct?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;Commutativity of multiplication is a vector space axiom.&lt;/em&gt; &lt;a href="#" onclick="showById('answer1', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer1" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The scalar multiplication &lt;script type="math/tex"&gt;\cdot: K \times V \rightarrow V&lt;/script&gt; doesn&amp;#8217;t even have the same sets in its two arguments, i.e. &lt;script type="math/tex"&gt;\mathbf v \cdot a&lt;/script&gt; is not even&amp;nbsp;defined.&lt;/li&gt;
&lt;li&gt;The vector space has the commutativity of &lt;em&gt;addition&lt;/em&gt; as an axiom: for any &lt;script type="math/tex"&gt;\mathbf u,\mathbf v \in V&lt;/script&gt;, &lt;script type="math/tex"&gt;{\mathbf u+\mathbf v} = {\mathbf v + \mathbf u}&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;The underlying field &lt;script type="math/tex"&gt;K&lt;/script&gt;
&lt;em&gt;does&lt;/em&gt; have the commutativity of multiplication as a field axiom: for any &lt;script type="math/tex"&gt;a,b \in K&lt;/script&gt;, &lt;script type="math/tex"&gt;a \textcolor{red}{\cdot} b = b \textcolor{red}{\cdot} a&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;As a consequence, for any &lt;script type="math/tex"&gt;\mathbf v \in V&lt;/script&gt; and &lt;script type="math/tex"&gt;a, b \in K&lt;/script&gt;,&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
 a (b \mathbf v) = (a\textcolor{red}{\cdot} b)\mathbf v = (b \textcolor{red}{\cdot} a)\mathbf v = b(a \mathbf v). %]]&gt;&lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;Every vector is a matrix with only one column.&lt;/em&gt; &lt;a href="#" onclick="showById('answer2', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer2" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;By definition, a vector is an element of a vector space. If we fix a basis for the vector space, then any vector can be represented by an ordered set of numbers, which could be treated as a column vector, i.e. a matrix with one column. However, this representation depends on the choice of&amp;nbsp;basis.&lt;/li&gt;
&lt;li&gt;The &lt;a href="https://youtu.be/5oeWX3NUhMA?t=1m09s"&gt;official answer&lt;/a&gt; brings up as a counterexample the vector space of polynomials up to some finite degree. However, here again we could represent the vectors as a column vector with any choice of a basis. E.g. using the standard basis, &lt;script type="math/tex"&gt;p(x) = 0x^2 + 4x + 5 &lt;/script&gt; could be represented as &lt;script type="math/tex"&gt;\mathbf p = [0, 4, 5]^T&lt;/script&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;Every linear map between vector spaces can be represented by a unique quadratic matrix.&lt;/em&gt; &lt;a href="#" onclick="showById('answer3', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer3" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;As above, a linear map &lt;script type="math/tex"&gt;f: V \rightarrow W &lt;/script&gt; can be represented as a unique matrix only once bases are chosen for its domain &lt;script type="math/tex"&gt;V&lt;/script&gt; and codomain &lt;script type="math/tex"&gt;W&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;This matrix is quadratic only if the dimensions of &lt;script type="math/tex"&gt;V&lt;/script&gt; and &lt;script type="math/tex"&gt;W&lt;/script&gt; are&amp;nbsp;equal.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;Every vector space has a corresponding dual vector space.&lt;/em&gt; &lt;a href="#" onclick="showById('answer4', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer4" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;true.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The dual space of a vector space &lt;script type="math/tex"&gt;V&lt;/script&gt; is defined as the set of linear maps from &lt;script type="math/tex"&gt;V&lt;/script&gt; to &lt;script type="math/tex"&gt;K&lt;/script&gt;: &lt;script type="math/tex"&gt;V^* \coloneqq Hom(V,K) \coloneqq \{φ\ \vert \ φ: V \linmap K\} &lt;/script&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;The set of everywhere positive functions on &lt;script type="math/tex"&gt;\mathbb R&lt;/script&gt; with pointwise addition and S-multiplication is a vector space.&lt;/em&gt; &lt;a href="#" onclick="showById('answer5', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer5" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This set doesn&amp;#8217;t have a commutative identity element: by the field axioms of &lt;script type="math/tex"&gt;\mathbb R&lt;/script&gt;, it could only be the constant zero function, but that&amp;#8217;s not an element of the&amp;nbsp;set.&lt;/li&gt;
&lt;li&gt;This set doesn&amp;#8217;t have a commutative inverse for any&amp;nbsp;element.&lt;/li&gt;
&lt;li&gt;For the scalar multiplication we&amp;#8217;d need to know the underlying field. Usually it would be &lt;script type="math/tex"&gt;\mathbb R&lt;/script&gt;, but then S-multiplication with a negative number wouldn&amp;#8217;t result in an everywhere positive function. (Although one can construct a field from &lt;script type="math/tex"&gt;\mathbb R^+&lt;/script&gt;, I wonder how well that would combine with the above attempt at a vector&amp;nbsp;space.)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;b) What is true about tensors and their&amp;nbsp;components?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;The tensor product of two tensors is a tensor.&lt;/em&gt; &lt;a href="#" onclick="showById('answer6', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer6" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;true.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The lecture didn&amp;#8217;t mention tensor products, so a definition is in order. The product of an &lt;script type="math/tex"&gt; (l,k) &lt;/script&gt;-tensor &lt;script type="math/tex"&gt;S&lt;/script&gt; and an &lt;script type="math/tex"&gt; (n,m) &lt;/script&gt;-tensor &lt;script type="math/tex"&gt;T&lt;/script&gt; is an &lt;script type="math/tex"&gt; (l+n,k+m) &lt;/script&gt;-tensor &lt;script type="math/tex"&gt; S \otimes T &lt;/script&gt;, whose &lt;script type="math/tex"&gt; (i_1, \ldots, i_{l+n}, j_1, \ldots, j_{k+m}) &lt;/script&gt;-th component is the product of the relevant components of &lt;script type="math/tex"&gt;S&lt;/script&gt; and &lt;script type="math/tex"&gt;T&lt;/script&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
 (S \otimes T)^{i_1, \ldots, i_l, i_{l+1}, \ldots, i_{l+n}}_ {j_1, \ldots, j_k, j_{k+1}, \ldots, j_{k+m} } =
   S^{i_1, \ldots, i_l}_ {j_1, \ldots, j_k}
   T^{i_{1}, \ldots, i_{n}}_ {j_{1}, \ldots, j_{m}}. %]]&gt;&lt;/script&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Tensor#Tensor_product"&gt;Source:&amp;nbsp;Wikipedia&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This means that if the arguments of &lt;script type="math/tex"&gt; S \otimes T &lt;/script&gt; are&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the &lt;script type="math/tex"&gt;l+n&lt;/script&gt; linear maps &lt;script type="math/tex"&gt;φ^{(p)} = \sum^{dim V}_{i=1} \varphi^{(p)}_i \epsilon^i&lt;/script&gt; for &lt;script type="math/tex"&gt;1 \le p \le l+n&lt;/script&gt;,&amp;nbsp;and&lt;/li&gt;
&lt;li&gt;the &lt;script type="math/tex"&gt;k+m&lt;/script&gt; vectors &lt;script type="math/tex"&gt; \v_{(q)} = \sum^{dim V}_{j=1} v_{(q)}^j \e_j &lt;/script&gt; for &lt;script type="math/tex"&gt;1 \le q \le k+m&lt;/script&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(with some particular choice of basis vectors &lt;script type="math/tex"&gt;\{\e_i\}_i&lt;/script&gt; and basis covectors &lt;script type="math/tex"&gt;\{\epsilon^i\}_i&lt;/script&gt; ),&amp;nbsp;then&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\begin{aligned}
(S\otimes T) &amp;(φ^{(1)}, \ldots, φ^{(l+n)}, \v_{(1)}, \ldots, \v_{(k+m)}) = \\
  &amp;= S (φ^{(1)}, \ldots, φ^{(l)}, \v_{(1)}, \ldots, \v_{(k)})\,\cdot\,
  T (φ^{(l+1)}, \ldots, φ^{(l+n)}, \v_{(k+1)}, \ldots, \v_{(k+m)})\\
  &amp;= \Bigg(
      \sum_{i_1}^{\dim V} \cdots \sum_{i_l}^{\dim V}
      \sum_{j_1}^{\dim V} \cdots \sum_{j_k}^{\dim V}
      \varphi^{(1)}_{i_1} \ldots \varphi^{(l)}_{i_l}
      v_{(1)}^{j_1} \ldots v_{(k)}^{j_k}
      S^{i_1, \ldots, i_l}_{j_1, \ldots, j_k}
  \Bigg) \cdot \phantom.\\
  &amp;\phantom{=} \Bigg(
      \sum_{i_{l+1}}^{\dim V} \cdots \sum_{i_{l+n}}^{\dim V}
      \sum_{j_{k+1}}^{\dim V} \cdots \sum_{j_{k+m}}^{\dim V}
      \varphi^{(l+1)}_{i_{l+1}} \ldots \varphi^{(l+n)}_{i_{l+n}}
      v_{(k+1)}^{j_{k+1}} \ldots v_{(k+m)}^{j_{k+m}}
      T^{i_{l+1}, \ldots, i_{l+n}}_{j_{k+1}, \ldots, j_{k+n}}
  \Bigg) \\
  &amp;=  \sum_{i_1}^{\dim V} \cdots \sum_{i_{l+n}}^{\dim V}
      \sum_{j_1}^{\dim V} \cdots \sum_{j_{k+m}}^{\dim V}
      \varphi^{(1)}_{i_1} \ldots \varphi^{(l+n)}_{i_{l+n}}
      v_{(1)}^{j_1} \ldots v_{(k+m)}^{j_{k+m}}
      S^{i_1, \ldots, i_l}_{j_1, \ldots, j_k}
      T^{i_{l+1}, \ldots, i_{l+n}}_{j_{k+1}, \ldots, j_{k+n}}.
\end{aligned} %]]&gt;&lt;/script&gt;
&lt;p&gt;These &lt;script type="math/tex"&gt; (l+n+k+m) &lt;/script&gt; summations are quite a mess, but the above derivation shows that the &lt;a href="http://mathworld.wolfram.com/EinsteinSummation.html"&gt;Einstein summation convention&lt;/a&gt; works for tensor products as&amp;nbsp;well:&lt;/p&gt;
&lt;script type="math/tex; mode=display"&gt;% &lt;![CDATA[
\begin{aligned}
(S\otimes T) &amp;(φ^{(1)}, \ldots, φ^{(l+n)}, v_{(1)}, \ldots, v_{(k+m)}) =\\
  &amp;= S (φ^{(1)}, \ldots, φ^{(l)}, v_{(1)}, \ldots, v_{(k)})\,\cdot\,
  T (φ^{(l+1)}, \ldots, φ^{(l+n)}, v_{(k+1)}, \ldots, v_{(k+m)})\\
  &amp;= \Big(
      \varphi^{(1)}_{i_1} \ldots \varphi^{(l)}_{i_l}
      v_{(1)}^{j_1} \ldots v_{(k)}^{j_k}
      S^{i_1, \ldots, i_l}_{j_1, \ldots, j_k}
  \Big)
  \Big(
      \varphi^{(l+1)}_{i_{l+1}} \ldots \varphi^{(l+n)}_{i_{l+n}}
      v_{(k+1)}^{j_{k+1}} \ldots v_{(k+m)}^{j_{k+m}}
      T^{i_{l+1}, \ldots, i_{l+n}}_{j_{k+1}, \ldots, j_{k+n}}
  \Big) \\
 &amp;=  \varphi^{(1)}_{i_1} \ldots \varphi^{(l+n)}_{i_{l+n}}
      v_{(1)}^{j_1} \ldots v_{(k+m)}^{j_{k+m}}
      S^{i_1, \ldots, i_l}_{j_1, \ldots, j_k}
      T^{i_{l+1}, \ldots, i_{l+n}}_{j_{k+1}, \ldots, j_{k+n}}.
\end{aligned} %]]&gt;&lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;You can always reconstruct a tensor from its components and the corresponding basis.&lt;/em&gt; &lt;a href="#" onclick="showById('answer7', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer7" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;true.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If we know the basis vectors for the vector space and the dual vector space, then the components of the vector and covector arguments are uniquely determined, and we can apply the tensor to the arguments using the components of the tensor (or some relevant finite subset in case &lt;script type="math/tex"&gt;V&lt;/script&gt; is not finite&amp;nbsp;dimensional).&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;The number of indices of the tensor components depends on dimension.&lt;/em&gt; &lt;a href="#" onclick="showById('answer8', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer8" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A tensor component usually has one index for each argument, e.g. for a &lt;script type="math/tex"&gt;(2,1)&lt;/script&gt;-tensor &lt;script type="math/tex"&gt;T&lt;/script&gt;, the components are &lt;script type="math/tex"&gt;T^{i_1,i_2}_{j_1}&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;The &lt;em&gt;range&lt;/em&gt; of these indices does depend on the dimension: each index ranges from &lt;script type="math/tex"&gt;1&lt;/script&gt; to &lt;script type="math/tex"&gt;\dim V&lt;/script&gt;. Therefore an &lt;script type="math/tex"&gt; (n,m) &lt;/script&gt;-tensor &lt;script type="math/tex"&gt;T&lt;/script&gt; has &lt;script type="math/tex"&gt; (\dim V)^{n+m} &lt;/script&gt; many&amp;nbsp;components.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;The Einstein summation convention does not apply to tensor components.&lt;/em&gt; &lt;a href="#" onclick="showById('answer9', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer9" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification: see&amp;nbsp;above.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &lt;em&gt;A change of basis does not change the tensor components.&lt;/em&gt; &lt;a href="#" onclick="showById('answer10', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer10" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the tensor components are defined with respect to a given&amp;nbsp;basis.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;c) Given a basis for a &lt;script type="math/tex"&gt;d&lt;/script&gt;-dimensional vector space &lt;script type="math/tex"&gt;V&lt;/script&gt;,&amp;nbsp;&amp;#8230;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &amp;#8230;&lt;em&gt;one can find exactly &lt;script type="math/tex"&gt;d^2&lt;/script&gt;-different dual bases for the corresponding dual vector space &lt;script type="math/tex"&gt; V^* &lt;/script&gt;.&lt;/em&gt; &lt;a href="#" onclick="showById('answer11', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer11" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Given a basis of &lt;script type="math/tex"&gt;V&lt;/script&gt;, &lt;script type="math/tex"&gt;E = \{\mathbf{e}_i\}_{i=1}^d \subset V&lt;/script&gt;, there is a &lt;em&gt;unique&lt;/em&gt; dual basis of &lt;script type="math/tex"&gt;V^* &lt;/script&gt;, namely &lt;script type="math/tex"&gt;E^* = \{\epsilon_i\}_{i=1}^d&lt;/script&gt;, where &lt;script type="math/tex"&gt;\epsilon_i(\e_i) = 1&lt;/script&gt; and &lt;script type="math/tex"&gt;\epsilon_i(\e_j) = 0&lt;/script&gt; for &lt;script type="math/tex"&gt;i ≠ j&lt;/script&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &amp;#8230;&lt;em&gt;by removing one basis vector of the basis of &lt;script type="math/tex"&gt;V&lt;/script&gt;, a basis for a &lt;script type="math/tex"&gt;(d - 1)&lt;/script&gt;-dimensional vector space &lt;script type="math/tex"&gt;V_1&lt;/script&gt; is obtained.&lt;/em&gt; &lt;a href="#" onclick="showById('answer12', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer12" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;true.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The resulting set of &lt;script type="math/tex"&gt;(d-1)&lt;/script&gt; vectors are still linearly independent, and their span is a &lt;script type="math/tex"&gt;(d-1)&lt;/script&gt;-dimensional subspace of &lt;script type="math/tex"&gt;V&lt;/script&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &amp;#8230;&lt;em&gt;the continuity of a map &lt;script type="math/tex"&gt;f : V → W&lt;/script&gt; depends on the choice of basis for the vector space &lt;script type="math/tex"&gt;W&lt;/script&gt;.&lt;/em&gt; &lt;a href="#" onclick="showById('answer13', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer13" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;false.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The continuity of a map is defined for &lt;em&gt;topological spaces&lt;/em&gt;, not for vector&amp;nbsp;spaces.&lt;/li&gt;
&lt;li&gt;
&lt;script type="math/tex"&gt;f&lt;/script&gt; is continuous &lt;em&gt;iff&lt;/em&gt; the preimage of every open set in &lt;script type="math/tex"&gt;W&lt;/script&gt; is open in &lt;script type="math/tex"&gt;V&lt;/script&gt;. Note that no term in this definition depends on the choice of basis for either &lt;script type="math/tex"&gt;V&lt;/script&gt; or &lt;script type="math/tex"&gt;W&lt;/script&gt;.&lt;/li&gt;
&lt;li&gt;Assuming that &lt;script type="math/tex"&gt;V&lt;/script&gt; and &lt;script type="math/tex"&gt;W&lt;/script&gt; are real vector spaces, it is customary to equip them with the standard topology. A set &lt;script type="math/tex"&gt;A&lt;/script&gt; is open in &lt;script type="math/tex"&gt;V&lt;/script&gt;
&lt;em&gt;iff&lt;/em&gt; either it is the union of open &lt;script type="math/tex"&gt;ε&lt;/script&gt;-balls, or of Cartesian products of open intervals. While these definitions assume a basis for &lt;script type="math/tex"&gt;V&lt;/script&gt;, they all result in the exact same topologies. (Meaning a set can be covered with open balls &lt;em&gt;iff&lt;/em&gt; it can be covered with open cuboids &lt;em&gt;iff&lt;/em&gt; it can be covered with open cubes – an interesting but easy-to-prove&amp;nbsp;result.)&lt;/li&gt;
&lt;li&gt;It&amp;#8217;s easy to see that every &lt;em&gt;linear&lt;/em&gt; map between real vector spaces (equipped with the standard topology) is&amp;nbsp;continuous.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &amp;#8230;&lt;em&gt;one can extract the components of the elements of the dual vector space &lt;script type="math/tex"&gt;V^*&lt;/script&gt;.&lt;/em&gt; &lt;a href="#" onclick="showById('answer14', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer14" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;true.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a basis for &lt;script type="math/tex"&gt;V&lt;/script&gt; uniquely determines a dual basis for &lt;script type="math/tex"&gt;V^* &lt;/script&gt;, which uniquely determines the components of any&amp;nbsp;covector.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;?.&lt;/strong&gt; &amp;#8230;&lt;em&gt;each vector of &lt;script type="math/tex"&gt;V&lt;/script&gt; can be reconstructed from its components.&lt;/em&gt; &lt;a href="#" onclick="showById('answer15', this); return false;" class="show-answer"&gt;Show&amp;nbsp;answer&lt;/a&gt;&lt;/p&gt;
&lt;div class="answer" id="answer15" style="display: none;"&gt;
&lt;p&gt;&lt;em&gt;Answer:&lt;/em&gt;&amp;nbsp;true.&lt;/p&gt;
&lt;p&gt;Clarification:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Given the basis vectors &lt;script type="math/tex"&gt;\mathbf{e}_i&lt;/script&gt; and components &lt;script type="math/tex"&gt;v^i&lt;/script&gt; for &lt;script type="math/tex"&gt;1 \leq i \leq d&lt;/script&gt;, &lt;script type="math/tex"&gt;\mathbf{v} = \sum_{i=1}^d v^i \mathbf{e}_i&lt;/script&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</content><category term="math"></category><category term="starred"></category></entry><entry><title>Probabilistically interesting planning problems</title><link href="https://www.treszkai.com/2018/05/28/probabilistically-interesting/" rel="alternate"></link><published>2018-05-28T00:00:00+02:00</published><updated>2018-05-28T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2018-05-28:/2018/05/28/probabilistically-interesting/</id><summary type="html">&lt;p&gt;This post briefly describes the problem of probabilistic planning, and explains what makes a planning problem “probabilistically&amp;nbsp;interesting”.&lt;/p&gt;</summary><content type="html">&lt;p&gt;This post briefly describes the problem of &lt;em&gt;probabilistic planning&lt;/em&gt;, and explains in informal terms what makes a planning problem &lt;em&gt;probabilistically interesting&lt;/em&gt;, along with some&amp;nbsp;examples.&lt;/p&gt;
&lt;h1&gt;Primer on probabilistic&amp;nbsp;planning&lt;/h1&gt;
&lt;p&gt;In a nutshell, planning is about &lt;em&gt;finding a way to win&lt;/em&gt;, and as such, the field of research on planners is vast. However, there is no single textbook definition of “planning”, so in this post I&amp;#8217;ll try to be as general as possible. One description of a planning problem could be: given a description of an environment, find a sequence of actions that brings the environment from the initial state of the environment to a goal state. There are multiple ways to describe the environment: for example in formal logic with the &lt;a href="https://en.wikipedia.org/wiki/Situation_calculus"&gt;situation calculus&lt;/a&gt;, or more commonly as a &lt;a href="https://en.wikipedia.org/wiki/Markov_decision_process"&gt;Markov decision process (&lt;span class="caps"&gt;MDP&lt;/span&gt;)&lt;/a&gt;. In probabilistic planning problems, the functions describing the &lt;span class="caps"&gt;MDP&lt;/span&gt; are not necessarily deterministic: executing action &lt;script type="math/tex"&gt;a&lt;/script&gt; in state &lt;script type="math/tex"&gt;s&lt;/script&gt; will bring the environment to state &lt;script type="math/tex"&gt;s'&lt;/script&gt; with a probability of &lt;script type="math/tex"&gt;T(s,a,s')&lt;/script&gt;. In contrast with the &lt;em&gt;control problem&lt;/em&gt; of reinforcement learning, where the goal is to find an optimal &lt;em&gt;policy&lt;/em&gt; (i.e. a mapping from states to actions), in planning one is interested only in a partial policy that brings the agent closer to a goal state, or frequently only a single action that brings the agent closer to a goal state from the current state. An example planning problem is thus: “Siri, show me a way to the library.” Then Siri responds either with a plan that I can follow from the first step to the last (i.e. a route from start to finish), or only an action that I can take right now (“go forward 100&amp;nbsp;meters”).&lt;/p&gt;
&lt;p&gt;Graphical representation of an example &lt;span class="caps"&gt;MDP&lt;/span&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Graphical representation of an example MDP" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/MDP-env.jpg"&gt;&lt;/p&gt;
&lt;p&gt;An example policy for the same &lt;span class="caps"&gt;MDP&lt;/span&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="An example policy for the same MDP" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/MDP-policy.jpg"&gt;&lt;/p&gt;
&lt;p&gt;An example plan for the same &lt;span class="caps"&gt;MDP&lt;/span&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="An example plan for the same MDP" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/MDP-plan.jpg"&gt;&lt;/p&gt;
&lt;p&gt;The approach taken by a planner differs based on the discounting factor \&lt;script type="math/tex"&gt; \gamma \&lt;/script&gt; and the distribution of rewards. In a &lt;em&gt;shortest path problem&lt;/em&gt; the future rewards are discounted (\&lt;script type="math/tex"&gt; 0 &lt; \gamma &lt; 1 \&lt;/script&gt;), and there might be a constant negative reward for every step taken. Together with a positive reward in goal states, an agent with the goal of maximizing return – i.e. the sum of discounted expected future rewards – has incentives to minimize the length of the path to the goal. However, if there is no discounting (\&lt;script type="math/tex"&gt;\gamma = 1 \&lt;/script&gt;) and there&amp;#8217;s a positive reward only in the goal states, it is sufficient for the agent to find &lt;em&gt;any&lt;/em&gt; way to the goal. (Some call these &lt;em&gt;goal-based problems&lt;/em&gt; &lt;a href="#Yoon2008-probabilistic-planning"&gt;(Yoon, Fern, Givan, &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Kambhampati, 2008)&lt;/a&gt;.) In the next section we&amp;#8217;ll see that not all plans are created equal, so even in the non-discounted case we want one that ends up in a goal state with the highest&amp;nbsp;probability.&lt;/p&gt;
&lt;p&gt;In an &lt;em&gt;offline&lt;/em&gt; approach to deterministic planning problems, a planner is given an environment, initial state and goal state, and it needs to return a sequence of actions that brings the environment to the goal state. However, this offline approach does not work for probabilistic problems, where the outcome of an action is not always in our control. Hence a probabilistic planner is usually executed &lt;em&gt;online&lt;/em&gt;: it makes an observation (e.g. the current state of the environment, in the fully observable case), does some magic, and outputs a single action that brings the agent closer to a goal state. Nature brings the agent to a new state, not necessarily the one you desired, and these steps are repeated, until you run out of time or end up at a&amp;nbsp;goal.&lt;/p&gt;
&lt;p&gt;Since the fourth &lt;a href="http://icaps-conference.org/index.php/Main/Competitions"&gt;International Planning Competition&lt;/a&gt; in 2004 hosted by the &lt;span class="caps"&gt;ICAPS&lt;/span&gt; (International Conference on Automated Planning and Scheduling), this event featured a probabilistic track. The winner of &lt;span class="caps"&gt;IPPC&lt;/span&gt; 2004 was &lt;span class="caps"&gt;FF&lt;/span&gt;-Replan, a planner that simplifies the probabilistic planning problem into a deterministic one by not considering the multiple potential effects of an action &lt;a href="#Yoon2007-FF-replan"&gt;(Yoon, Fern, &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Givan, 2007)&lt;/a&gt; – hence the title of the paper, “&lt;span class="caps"&gt;FF&lt;/span&gt;-Replan: A Baseline for Probabilistic&amp;nbsp;Planning.”&lt;/p&gt;
&lt;h1&gt;Probabilistically interesting planning&amp;nbsp;problems&lt;/h1&gt;
&lt;p&gt;Iain Little and Sylvie Thiébaux analyzed the common characteristics of planning problems that can and cannot be optimally solved by a planner like &lt;span class="caps"&gt;FF&lt;/span&gt;-Replan &lt;a href="#Little2007-probabilistic-planning"&gt;(Little &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Thiébaux, 2007)&lt;/a&gt;. They gave necessary and sufficient conditions for a probabilistic planning problem to be &lt;em&gt;probabilistically interesting&lt;/em&gt;: on a problem fulfilling these conditions, a planner that determinizes the problem will lose crucial information, and will do worse than a probabilistic planner. In this section I&amp;#8217;ll summarize these conditions using natural language, slightly diverging from the vocabulary of the paper. For formal definitions and more examples, see the &lt;a href="http://users.cecs.anu.edu.au/~iain/icaps07.pdf"&gt;original paper&lt;/a&gt;; it is an interesting&amp;nbsp;read.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Criterion 1:&lt;/em&gt; there are multiple paths from the start to the goal. If there is only a single path, then any planner that finds &lt;em&gt;a&lt;/em&gt; path will do equally good, as this will be the only&amp;nbsp;one.&lt;/p&gt;
&lt;p&gt;Counterexample:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Graphical description of an MDP with a single goal trajectory" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/counter-1.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Criterion 2:&lt;/em&gt; where the above two paths diverge, there is a choice about which way to go, i.e. a state \&lt;script type="math/tex"&gt;s_{crossroads}\&lt;/script&gt; from which action \&lt;script type="math/tex"&gt;a_1\&lt;/script&gt; leads to one road with a different probability than action \&lt;script type="math/tex"&gt;a_2\&lt;/script&gt; does. (Yes, this is a sufficient condition for the first criterion.) If it&amp;#8217;s only luck that separates the two paths, then the agent doesn&amp;#8217;t have much of a choice to do&amp;nbsp;better.&lt;/p&gt;
&lt;p&gt;Counterexample:&lt;/p&gt;
&lt;p&gt;&lt;img alt="MDP with skill doesn't help" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/counter-2.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Criterion 3:&lt;/em&gt; there must be a non-trivially avoidable dead end in the environment. A &lt;em&gt;dead end&lt;/em&gt; is an absorbing state that is not a goal state, i.e. a state from which there is no path to any goal state. For a dead end to be &lt;em&gt;avoidable&lt;/em&gt;, there must be a state \&lt;script type="math/tex"&gt;s_{crossroads}\&lt;/script&gt; with at least two possible actions \&lt;script type="math/tex"&gt;a_{deadly}\&lt;/script&gt; and \&lt;script type="math/tex"&gt;a_{winning}\&lt;/script&gt;, such that executing \&lt;script type="math/tex"&gt;a_{deadly}\&lt;/script&gt; brings the agent to the dead end with a higher probability than executing \&lt;script type="math/tex"&gt;a_{winning}\&lt;/script&gt;. A dead end is &lt;em&gt;non-trivially avoidable&lt;/em&gt; if \&lt;script type="math/tex"&gt;s_{crossroads}\&lt;/script&gt; is on a path from the initial state to a goal state, and there is a non-zero chance of reaching a goal state after executing either \&lt;script type="math/tex"&gt;a_{winning}\&lt;/script&gt; or \&lt;script type="math/tex"&gt;a_{deadly}\&lt;/script&gt;.&lt;/p&gt;
&lt;p&gt;Counterexample: the probabilistic version of Blocksworld, where the worst case scenario is that a block is dropped accidentally, does not contain dead ends; the environment is irreducible. (This was an actual problem of &lt;span class="caps"&gt;IPPC&lt;/span&gt;&amp;nbsp;2004.)&lt;/p&gt;
&lt;p&gt;&lt;img alt="Probabilistic Blocks world" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/blocksworld.png"&gt;&lt;/p&gt;
&lt;p&gt;Counterexample: all dead ends are&amp;nbsp;unavoidable.&lt;/p&gt;
&lt;p&gt;&lt;img alt="MDP with no avoidable dead end" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/counter-3b.png"&gt;&lt;/p&gt;
&lt;p&gt;Counterexample: all dead ends are trivially&amp;nbsp;avoidable.&lt;/p&gt;
&lt;p&gt;&lt;img alt="MDP with only trivially avoidable dead ends" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/counter-3c.png"&gt;&lt;/p&gt;
&lt;h1&gt;A simple yet “interesting” planning&amp;nbsp;problem&lt;/h1&gt;
&lt;p&gt;A very simple problem that is probabilistically interesting is what the authors call &lt;code&gt;climber&lt;/code&gt;, described by the following&amp;nbsp;story:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You are stuck on a roof because the ladder you climbed up on fell down. There are plenty of people around; if you call out for help someone will certainly lift the ladder up again. Or you can try to climb down without it. You aren’t a very good climber though, so there is a 40% chance that you will fall and break your neck if you do it alone. What do you&amp;nbsp;do?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Graphical representation of the &lt;code&gt;climber&lt;/code&gt; problem:
&lt;img alt="Graphical representation of the climber problem" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/climber-orig.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Despite the simplicity of this problem, most methods to turn it into a deterministic problem fail. Little and Thiébaux described 3 ways to determinize a problem, and they called a resulting deteministic problem a&amp;nbsp;“compilation”.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;&lt;span class="caps"&gt;REPLAN1&lt;/span&gt;&lt;/em&gt; approach simply drops all but the most likely outcome of every action, and finds the shortest goal trajectory. (This was the approach used by &lt;span class="caps"&gt;FF&lt;/span&gt;-Replan.) Compilation of the climber problem according to &lt;span class="caps"&gt;REPLAN1&lt;/span&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Compilation of the climber problem according to REPLAN1" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/climber-det1.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;span class="caps"&gt;REPLAN2&lt;/span&gt;(shortest)&lt;/em&gt; turns every possible probabilistic outcome of an action into the outcome of a deterministic action, each with a cost of 1. Optimizing for smallest cost thus finds the &lt;em&gt;shortest&lt;/em&gt; goal trajectory, but this might not be the one with the highest success probability. Compilation of the climber problem according to &lt;span class="caps"&gt;REPLAN2&lt;/span&gt;(shortest):&lt;/p&gt;
&lt;p&gt;&lt;img alt="Compilation of the climber problem according to REPLAN2(shortest)" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/climber-det2.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;span class="caps"&gt;REPLAN2&lt;/span&gt;(most-likely)&lt;/em&gt; also turns every outcome into a separate deterministic action, but the new action costs are the negative log probability of the relevant outcome. This is the only compilation of the problem that finds the optimal path for &lt;code&gt;climber&lt;/code&gt;, but for many other problems even this one will be suboptimal. The resulting compilation is as&amp;nbsp;follows:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Compilation of the climber problem according to REPLAN2(most-likely)" src="https://www.treszkai.com/2018/05/28/probabilistically-interesting/climber-det3.jpg"&gt;&lt;/p&gt;
&lt;h1&gt;Summary&lt;/h1&gt;
&lt;p&gt;Finding the optimal goal trajectory in a probabilistic planning problem is computationally expensive, so most planners use some heuristics. One way to plan in a stochastic environment is to change the probabilistic planning problem into a deterministic shortest path problem and replan after (almost) every step, which is computationally efficient, but in many cases suboptimal. This article outlined the attributes of probabilistically interesting problems, where the deterministic replanning approach often fails. As such, recent probabilistic planners use more complicated methods (or often a portfolio of probabilistic planners), but replanners remain a good baseline to compare&amp;nbsp;against.&lt;/p&gt;
&lt;h1&gt;References&lt;/h1&gt;
&lt;ol class="bibliography"&gt;&lt;li&gt;&lt;span id="Little2007-probabilistic-planning"&gt;Little, I., &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Thiébaux, S. (2007). Probabilistic planning vs. replanning. &lt;i&gt;Workshop, &lt;span class="caps"&gt;ICAPS&lt;/span&gt; 2007&lt;/i&gt;. Retrieved from http://users.cecs.anu.edu.au/&amp;nbsp;iain/icaps07.pdf&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id="Yoon2007-FF-replan"&gt;Yoon, S. W., Fern, A., &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Givan, R. (2007). &lt;span class="caps"&gt;FF&lt;/span&gt;-Replan: A Baseline for Probabilistic Planning. In &lt;span class="caps"&gt;M. S.&lt;/span&gt; Boddy, M. Fox, &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; S. Thiébaux (Eds.), &lt;i&gt;Proceedings of the Seventeenth International Conference on Automated
               Planning and Scheduling, &lt;span class="caps"&gt;ICAPS&lt;/span&gt; 2007, Providence, Rhode Island, &lt;span class="caps"&gt;USA&lt;/span&gt;,
               September 22-26, 2007&lt;/i&gt; (p. 352). &lt;span class="caps"&gt;AAAI&lt;/span&gt;. Retrieved from http://www.aaai.org/Library/&lt;span class="caps"&gt;ICAPS&lt;/span&gt;/2007/icaps07-045.php&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id="Yoon2008-probabilistic-planning"&gt;Yoon, S. W., Fern, A., Givan, R., &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Kambhampati, S. (2008). Probabilistic Planning via Determinization in Hindsight. In D. Fox &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; &lt;span class="caps"&gt;C. P.&lt;/span&gt; Gomes (Eds.), &lt;i&gt;Proceedings of the Twenty-Third &lt;span class="caps"&gt;AAAI&lt;/span&gt; Conference on Artificial Intelligence,
               &lt;span class="caps"&gt;AAAI&lt;/span&gt; 2008, Chicago, Illinois, &lt;span class="caps"&gt;USA&lt;/span&gt;, July 13-17, 2008&lt;/i&gt; (pp. 1010–1016). &lt;span class="caps"&gt;AAAI&lt;/span&gt; Press. Retrieved from http://www.aaai.org/Library/&lt;span class="caps"&gt;AAAI&lt;/span&gt;/2008/aaai08-160.php&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="AI"></category></entry><entry><title>Change YouTube speed from your favorites bar</title><link href="https://www.treszkai.com/2018/05/23/youtube-speed/" rel="alternate"></link><published>2018-05-23T00:00:00+02:00</published><updated>2018-05-23T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2018-05-23:/2018/05/23/youtube-speed/</id><summary type="html">&lt;p&gt;While the &lt;span class="caps"&gt;UI&lt;/span&gt; of YouTube only shows only limited set of high-speed options, it is possible to set the speed to any floating point value. Even better, one can do so from their favorites bar with&amp;nbsp;bookmarklets.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="I feel the need... the need for speed!" src="https://www.treszkai.com/2018/05/23/youtube-speed/need-for-speed.gif"&gt;&lt;/p&gt;
&lt;h1&gt;Premise&lt;/h1&gt;
&lt;p&gt;While the &lt;span class="caps"&gt;UI&lt;/span&gt; of YouTube only shows only limited set of high-speed options, it is possible to set the speed to any floating point value. Even better, one can do so from their favorites bar with&amp;nbsp;bookmarklets.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Youtube dialog to set speed" src="https://www.treszkai.com/2018/05/23/youtube-speed/youtube.png"&gt; &amp;nbsp;&amp;nbsp;⇒&amp;nbsp;&amp;nbsp; &lt;img alt="Bookmarks to set youtube speed" src="https://www.treszkai.com/2018/05/23/youtube-speed/bookmarklets.png"&gt;&lt;/p&gt;
&lt;h1&gt;Method&lt;/h1&gt;
&lt;p&gt;Simply add any of the following code snippets as&amp;nbsp;bookmarks.&lt;/p&gt;
&lt;p&gt;If you have a fixed speed in mind, e.g.&amp;nbsp;2.5:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;javascript:document.getElementsByTagName("video")[0].playbackRate=2.5;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Or save this line to show a prompt that asks for a floating-point&amp;nbsp;input:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;javascript:var%20speed=prompt("Speed:","1.");document.getElementsByTagName("video")[0].playbackRate=parseFloat(speed);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Which results in the following&amp;nbsp;prompt:&lt;/p&gt;
&lt;p&gt;&lt;img alt="A prompt that asks for speed" src="https://www.treszkai.com/2018/05/23/youtube-speed/custom.png"&gt;&lt;/p&gt;
&lt;h1&gt;Caveats&lt;/h1&gt;
&lt;p&gt;Works with YouTube and&amp;nbsp;Vimeo.&lt;/p&gt;
&lt;p&gt;The speed display in the video player will remain to show the last&amp;nbsp;setting.&lt;/p&gt;
&lt;h1&gt;References&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;GIF&lt;/span&gt;: &lt;a href="https://www.youtube.com/watch?v=fR2hajcuFEM"&gt;Top&amp;nbsp;Gun&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Script: &lt;a href="https://www.quora.com/Is-there-a-way-of-watching-YouTube-videos-at-higher-than-2x-speed/answer/John-Vuong-12"&gt;Quora answer of John&amp;nbsp;Vuong&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="misc"></category></entry><entry><title>Some versatile tools for bash</title><link href="https://www.treszkai.com/2018/05/16/bash-versatile/" rel="alternate"></link><published>2018-05-16T00:00:00+02:00</published><updated>2018-05-16T00:00:00+02:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2018-05-16:/2018/05/16/bash-versatile/</id><summary type="html">&lt;p&gt;A 7-line bash script that includes 90% of what an average user&amp;nbsp;needs.&lt;/p&gt;</summary><content type="html">&lt;p&gt;I rarely use bash besides the basics: I could use a &lt;code&gt;for&lt;/code&gt; loop even if woken up at night, but my knowledge of the language doesn&amp;#8217;t go much further. Hence instead of trying to memorize all the &lt;code&gt;{}%$&lt;/code&gt; magic, having a few versatile commands in my toolbox comes&amp;nbsp;handy.&lt;/p&gt;
&lt;p&gt;Recently I faced the task of renaming a set of files {&lt;code&gt;foo 02.jpg&lt;/code&gt;, &amp;#8230;, &lt;code&gt;foo 74.jpg&lt;/code&gt;} to {&lt;code&gt;foo 06.jpg&lt;/code&gt;, &amp;#8230;, &lt;code&gt;foo 78.jpg&lt;/code&gt;}, while keeping the order. My approach contained nothing&amp;nbsp;extraordinary:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="sb"&gt;`&lt;/span&gt;seq &lt;span class="m"&gt;74&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="nb"&gt;printf&lt;/span&gt; -v oldname &lt;span class="s2"&gt;&amp;quot;foo %02d.jpg&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;$i&lt;/span&gt;
    &lt;span class="nb"&gt;printf&lt;/span&gt; -v newname &lt;span class="s2"&gt;&amp;quot;foo %02d.jpg&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;+4&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; bc&lt;span class="k"&gt;)&lt;/span&gt;

    mv &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$oldname&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$newname&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yet there were some educational points in&amp;nbsp;it:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;One loops a variable &lt;code&gt;x&lt;/code&gt; over the lines of a string &lt;code&gt;values&lt;/code&gt; by &lt;code&gt;for x in values; do something; something_else; done&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;seq a b&lt;/code&gt; simply prints out the integers from &lt;code&gt;a&lt;/code&gt; to &lt;code&gt;b&lt;/code&gt;, inclusive, regardless of which is&amp;nbsp;larger.&lt;/li&gt;
&lt;li&gt;Variable &lt;code&gt;x&lt;/code&gt; is assigned a value by &lt;code&gt;x=foobar&lt;/code&gt;, where there must be &lt;em&gt;no spaces around the equation sign&lt;/em&gt;.The value of &lt;code&gt;x&lt;/code&gt; can then be referred to by &lt;code&gt;$x&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Renaming a set of files to a similar name but later in the alphabet must be done in reverse&amp;nbsp;order.&lt;/li&gt;
&lt;li&gt;Bash has a built-in &lt;code&gt;printf&lt;/code&gt; that seems to work as in C: first the string to be printed with format specifiers like &lt;code&gt;%02d&lt;/code&gt;, followed by the arguments whose values are used according to the format&amp;nbsp;specifiers.&lt;/li&gt;
&lt;li&gt;With the &lt;code&gt;-v&lt;/code&gt; option of &lt;code&gt;printf&lt;/code&gt;, you can save the output into a&amp;nbsp;variable.&lt;/li&gt;
&lt;li&gt;One can use &lt;code&gt;$(  )&lt;/code&gt; for executing a command and having bash treat the output as the source code. (It&amp;#8217;s the same as using backticks, as around &lt;code&gt;seq 74 2&lt;/code&gt;, but allows nesting and is clearer. Kinda like &lt;code&gt;eval&lt;/code&gt; in other languages, like JavaScript.) Not shown here, but it even works in quotation marks, e.g. &lt;code&gt;"$(echo hey yo)"&lt;/code&gt; is like writing &lt;code&gt;"hey yo"&lt;/code&gt;. Note that the trailing newline is&amp;nbsp;deleted.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bc&lt;/code&gt; is a calculator that reads from the input and outputs nothing but the result on a single&amp;nbsp;line.&lt;/li&gt;
&lt;li&gt;Don’t forget the quotes around arguments with spaces, like with &lt;code&gt;mv&lt;/code&gt; above.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One minute of further bash tips are provided by Julia Evans &lt;a href="https://drawings.jvns.ca/bashtips/"&gt;[here]&lt;/a&gt;.&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>Some proofs in first-order logic</title><link href="https://www.treszkai.com/2018/02/27/logic-courseworks/" rel="alternate"></link><published>2018-02-27T00:00:00+01:00</published><updated>2018-02-27T00:00:00+01:00</updated><author><name>Laszlo Treszkai</name></author><id>tag:www.treszkai.com,2018-02-27:/2018/02/27/logic-courseworks/</id><summary type="html">&lt;p&gt;This page lists some interesting problems in mathematical logic that I solved during my&amp;nbsp;studies&lt;/p&gt;</summary><content type="html">&lt;p&gt;I had the fortune to study classical logic from &lt;a href="http://www.renyi.hu/~csirmaz/"&gt;László Csirmaz&lt;/a&gt; at the Eötvös Loránd University, Budapest. Although I was not officially enrolled in the course, he was kind enough to mark my weekly homework regardless of my lack of student status. These were originally written in Hungarian, and I translated a few of them into&amp;nbsp;English.&lt;/p&gt;
&lt;h1&gt;A non-standard model of Robinson&amp;nbsp;arithmetics&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Give a model that fulfills every axiom of the Robinson arithmetics, and which contains contains two elements that are neither greater than or equal to, nor smaller than or equal to one another; or prove that such a model doesn&amp;#8217;t&amp;nbsp;exist.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.treszkai.com/2018/02/27/logic-courseworks/2017-03-logic-cw4ex4.pdf"&gt;Solution (&lt;span class="caps"&gt;PDF&lt;/span&gt;)&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;A two-formula version of the diagonal&amp;nbsp;lemma&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Let &lt;script type="math/tex"&gt;\Gamma&lt;/script&gt; be a theorem which can represent every recursive function. Prove that for every pair of formulae &lt;script type="math/tex"&gt;\Phi(x)&lt;/script&gt; and &lt;script type="math/tex"&gt;\Psi(x)&lt;/script&gt; with one free variable, there exist closed formulae &lt;script type="math/tex"&gt;\eta&lt;/script&gt; and &lt;script type="math/tex"&gt;\theta&lt;/script&gt; such that &lt;script type="math/tex"&gt;\Gamma \proves \eta \,\leftrightarrow\, \Phi(\Godel{\theta})&lt;/script&gt; and &lt;script type="math/tex"&gt;\Gamma \proves \theta \,\leftrightarrow\, \Psi(\Godel{\eta})&lt;/script&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.treszkai.com/2018/02/27/logic-courseworks/2017-05-logic-cw9ex1.pdf"&gt;Solution (&lt;span class="caps"&gt;PDF&lt;/span&gt;)&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Final steps of the proof of Gödel&amp;#8217;s completeness&amp;nbsp;theorem&lt;/h1&gt;
&lt;p&gt;When proving Gödel&amp;#8217;s completeness theorem during the lectures, I was missing a crucial step from the proof, so I &lt;a href="https://www.treszkai.com/2018/02/27/logic-courseworks/2017-07-logic-henkin.pdf"&gt;proved it myself&lt;/a&gt;.&lt;/p&gt;</content><category term="math"></category><category term="starred"></category></entry></feed>